// @ts-no-check

/**!
 * Drago0znzwLua
 * @version 1.0
 * @copyright MIT & LGPLv3 License
 * @comment Main development by Drago Cuven
 * @comment With help from.. alot of people (check the code)
 * Do not remove this comment
 */
// @ts-ignore
(async function (Scratch) {
  'use strict';
  if (!Scratch.extensions.unsandboxed) {
    throw new Error('"Dragonian Lua" must be ran unsandboxed.');
  }

  const menuIconURI =
    'data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9Ijk0NyIgaGVpZ2h0PSI5NDciIHZpZXdCb3g9IjAgMCA5NDcgOTQ3IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSJuYXZ5IiBkPSJNODM1LjUgNDczLjZjMC0xOTkuOC0xNjIuMi0zNjItMzYyLTM2MnMtMzYyIDE2Mi4yLTM2MiAzNjIgMTYyLjIgMzYyIDM2MiAzNjIgMzYyLTE2Mi4yIDM2Mi0zNjIiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNNzI5LjUgMzIzLjZjMC01OC41LTQ3LjUtMTA2LTEwNi0xMDZzLTEwNiA0Ny41LTEwNiAxMDYgNDcuNSAxMDYgMTA2IDEwNiAxMDYtNDcuNSAxMDYtMTA2Ii8+PHBhdGggZmlsbD0ibmF2eSIgZD0iTTk0MS41IDExMS41YzAtNTguNS00Ny41LTEwNi0xMDYtMTA2cy0xMDYgNDcuNS0xMDYgMTA2IDQ3LjUgMTA2IDEwNiAxMDYgMTA2LTQ3LjQgMTA2LTEwNiIvPjxwYXRoIGQ9Ik0yNTguMSA2MjcuOGgxMTcuM3YyNi43SDIyNy44VjQxN2gzMC4zem0yNTcuNCAyNi43di0yMy44Yy0xNiAyMi41LTMxLjkgMzEuMy01NyAzMS4zLTMzLjIgMC01NC40LTE4LjItNTQuNC00Ni42VjQ4My44aDI3djEyMC45YzAgMjAuNSAxMy43IDMzLjYgMzUuMiAzMy42IDI4LjMgMCA0Ni42LTIyLjggNDYuNi01Ny43di05Ni44aDI3djE3MC43em0yMjIuOSA0LjZjLTguOCAyLjMtMTMgMi45LTE4LjYgMi45LTE3LjYgMC0yNi4xLTcuOC0yOC0yNS4xLTE5LjIgMTcuNi0zNi41IDI1LjEtNTggMjUuMS0zNC41IDAtNTYtMTkuNS01Ni01MC41IDAtMjIuMiAxMC4xLTM3LjUgMzAtNDUuNiAxMC40LTQuMiAxNi4zLTUuNSA1NC43LTEwLjQgMjEuNS0yLjYgMjguMy03LjUgMjguMy0xOC45di03LjJjMC0xNi4zLTEzLjctMjUuNC0zOC4xLTI1LjQtMjUuNCAwLTM3LjggOS40LTQwLjEgMzAuM2gtMjcuNGMuNy0xNi45IDMuOS0yNi43IDExLjctMzUuNSAxMS40LTEyLjcgMzEuOS0xOS45IDU2LjctMTkuOSA0MiAwIDY0LjIgMTYuMyA2NC4yIDQ2LjZ2MTAwLjRjMCA4LjUgNS4yIDEzLjQgMTQuNyAxMy40IDEuNiAwIDIuOSAwIDUuOS0uN3ptLTQ3LjYtODljLTkuMSA0LjItMTUgNS41LTQzLjcgOS40LTI5IDQuMi00MS4xIDEzLjQtNDEuMSAzMS4zIDAgMTcuMyAxMi40IDI3LjQgMzMuNiAyNy40IDE2IDAgMjkuMy01LjIgNDAuNC0xNS4zIDguMS03LjUgMTAuOC0xMyAxMC44LTIyLjJ6IiBmaWxsPSIjRkZGIi8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSJncmF5IiBzdHJva2Utd2lkdGg9IjEwLjg2MSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtZGFzaGFycmF5PSI0MC44NDciIGQ9Ik04OTAuNiAyNjFjMzMuNSA2NS44IDUxIDEzOC42IDUxIDIxMi41IDAgMjU4LjQtMjA5LjcgNDY4LjEtNDY4LjEgNDY4LjFTNS40IDczMS45IDUuNCA0NzMuNSAyMTUuMSA1LjQgNDczLjUgNS40YzgzLjEgMCAxNjQuNiAyMi4xIDIzNi4yIDYzLjkiLz48L3N2Zz4=';

  const extId = 'Drago0znzwLua';
  const {Cast, BlockType, ArgumentType, vm} = Scratch;
  const {runtime} = vm;
  const Thread = (
    // PenguinMod
    vm.exports.Thread ??
    // TurboWarp and forks
    vm.exports.i_will_not_ask_for_help_when_these_break().Thread
  );

  // @todo Find a way to embed this so it works offline
  //       and prevent global leakage
  function waitFinish(script) {
    // @ts-ignore
    return new Promise((resolve) => {
      script.addEventListener('load', resolve);
    });
  }

  // Currently this can be used on TurboWarp via staging.
  // https://staging.turbowarp.org/
  if (!Scratch.BlockShape) throw new Error(`VM is outdated! please see TurboWarp/scratch-vm#210`);

  // @todo Find a way to embed this so it works offline
  //       and prevent global leakage
  // just use the dataurl when the extension is finished
  // @ts-ignore I know it exists so shut it TS
  const {LuaFactory} = await import('data:application/javascript;charset=utf-8;base64,LyoqCiAqIEJ1bmRsZWQgYnkganNEZWxpdnIgdXNpbmcgUm9sbHVwIHYyLjc5LjIgYW5kIFRlcnNlciB2NS4zOS4wLgogKiBPcmlnaW5hbCBmaWxlOiAvbnBtL3dhc21vb25AMS4xNi4wL2Rpc3QvaW5kZXguanMKICoKICogRG8gTk9UIHVzZSBTUkkgd2l0aCBkeW5hbWljYWxseSBnZW5lcmF0ZWQgZmlsZXMhIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vd3d3LmpzZGVsaXZyLmNvbS91c2luZy1zcmktd2l0aC1keW5hbWljLWZpbGVzCiAqLwp2YXIgZT0iL2FwcC8uY2FjaGUvbnBtL3dhc21vb25AMS4xNi4wL2Rpc3QiLHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fTtmdW5jdGlvbiByKCl7dGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9ZnVuY3Rpb24gYSgpe3Rocm93IG5ldyBFcnJvcigiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9dmFyIG49cixpPWE7ZnVuY3Rpb24gdShlKXtpZihuPT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dChlLDApO2lmKChuPT09cnx8IW4pJiZzZXRUaW1lb3V0KXJldHVybiBuPXNldFRpbWVvdXQsc2V0VGltZW91dChlLDApO3RyeXtyZXR1cm4gbihlLDApfWNhdGNoKHQpe3RyeXtyZXR1cm4gbi5jYWxsKG51bGwsZSwwKX1jYXRjaCh0KXtyZXR1cm4gbi5jYWxsKHRoaXMsZSwwKX19fSJmdW5jdGlvbiI9PXR5cGVvZiB0LnNldFRpbWVvdXQmJihuPXNldFRpbWVvdXQpLCJmdW5jdGlvbiI9PXR5cGVvZiB0LmNsZWFyVGltZW91dCYmKGk9Y2xlYXJUaW1lb3V0KTt2YXIgbyxzPVtdLGw9ITEsaD0tMTtmdW5jdGlvbiBjKCl7bCYmbyYmKGw9ITEsby5sZW5ndGg/cz1vLmNvbmNhdChzKTpoPS0xLHMubGVuZ3RoJiZkKCkpfWZ1bmN0aW9uIGQoKXtpZighbCl7dmFyIGU9dShjKTtsPSEwO2Zvcih2YXIgdD1zLmxlbmd0aDt0Oyl7Zm9yKG89cyxzPVtdOysraDx0OylvJiZvW2hdLnJ1bigpO2g9LTEsdD1zLmxlbmd0aH1vPW51bGwsbD0hMSxmdW5jdGlvbihlKXtpZihpPT09Y2xlYXJUaW1lb3V0KXJldHVybiBjbGVhclRpbWVvdXQoZSk7aWYoKGk9PT1hfHwhaSkmJmNsZWFyVGltZW91dClyZXR1cm4gaT1jbGVhclRpbWVvdXQsY2xlYXJUaW1lb3V0KGUpO3RyeXtyZXR1cm4gaShlKX1jYXRjaCh0KXt0cnl7cmV0dXJuIGkuY2FsbChudWxsLGUpfWNhdGNoKHQpe3JldHVybiBpLmNhbGwodGhpcyxlKX19fShlKX19ZnVuY3Rpb24gZihlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWYucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9O2Z1bmN0aW9uIHAoKXt9dmFyIG09cCxfPXAsZz1wLGI9cCx3PXAseT1wLHY9cDt2YXIgRT10LnBlcmZvcm1hbmNlfHx7fSxMPUUubm93fHxFLm1vek5vd3x8RS5tc05vd3x8RS5vTm93fHxFLndlYmtpdE5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIFQ9bmV3IERhdGU7dmFyIGs9e25leHRUaWNrOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07cy5wdXNoKG5ldyBmKGUsdCkpLDEhPT1zLmxlbmd0aHx8bHx8dShkKX0sdGl0bGU6ImJyb3dzZXIiLGJyb3dzZXI6ITAsZW52Ont9LGFyZ3Y6W10sdmVyc2lvbjoiIix2ZXJzaW9uczp7fSxvbjptLGFkZExpc3RlbmVyOl8sb25jZTpnLG9mZjpiLHJlbW92ZUxpc3RlbmVyOncscmVtb3ZlQWxsTGlzdGVuZXJzOnksZW1pdDp2LGJpbmRpbmc6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpfSxjd2Q6ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LGNoZGlyOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkIil9LHVtYXNrOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGhydGltZTpmdW5jdGlvbihlKXt2YXIgdD0uMDAxKkwuY2FsbChFKSxyPU1hdGguZmxvb3IodCksYT1NYXRoLmZsb29yKHQlMSoxZTkpO3JldHVybiBlJiYoci09ZVswXSwoYS09ZVsxXSk8MCYmKHItLSxhKz0xZTkpKSxbcixhXX0scGxhdGZvcm06ImJyb3dzZXIiLHJlbGVhc2U6e30sY29uZmlnOnt9LHVwdGltZTpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZS1UKS8xZTN9fSxTPVtdLEE9W10sUj0idW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQ4QXJyYXk/VWludDhBcnJheTpBcnJheSxNPSExO2Z1bmN0aW9uIE8oKXtNPSEwO2Zvcih2YXIgZT0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIsdD0wO3Q8NjQ7Kyt0KVNbdF09ZVt0XSxBW2UuY2hhckNvZGVBdCh0KV09dDtBWyItIi5jaGFyQ29kZUF0KDApXT02MixBWyJfIi5jaGFyQ29kZUF0KDApXT02M31mdW5jdGlvbiBGKGUsdCxyKXtmb3IodmFyIGEsbixpPVtdLHU9dDt1PHI7dSs9MylhPShlW3VdPDwxNikrKGVbdSsxXTw8OCkrZVt1KzJdLGkucHVzaChTWyhuPWEpPj4xOCY2M10rU1tuPj4xMiY2M10rU1tuPj42JjYzXStTWzYzJm5dKTtyZXR1cm4gaS5qb2luKCIiKX1mdW5jdGlvbiB4KGUpe3ZhciB0O018fE8oKTtmb3IodmFyIHI9ZS5sZW5ndGgsYT1yJTMsbj0iIixpPVtdLHU9MTYzODMsbz0wLHM9ci1hO288cztvKz11KWkucHVzaChGKGUsbyxvK3U+cz9zOm8rdSkpO3JldHVybiAxPT09YT8odD1lW3ItMV0sbis9U1t0Pj4yXSxuKz1TW3Q8PDQmNjNdLG4rPSI9PSIpOjI9PT1hJiYodD0oZVtyLTJdPDw4KStlW3ItMV0sbis9U1t0Pj4xMF0sbis9U1t0Pj40JjYzXSxuKz1TW3Q8PDImNjNdLG4rPSI9IiksaS5wdXNoKG4pLGkuam9pbigiIil9ZnVuY3Rpb24gUChlLHQscixhLG4pe3ZhciBpLHUsbz04Km4tYS0xLHM9KDE8PG8pLTEsbD1zPj4xLGg9LTcsYz1yP24tMTowLGQ9cj8tMToxLGY9ZVt0K2NdO2ZvcihjKz1kLGk9ZiYoMTw8LWgpLTEsZj4+PS1oLGgrPW87aD4wO2k9MjU2KmkrZVt0K2NdLGMrPWQsaC09OCk7Zm9yKHU9aSYoMTw8LWgpLTEsaT4+PS1oLGgrPWE7aD4wO3U9MjU2KnUrZVt0K2NdLGMrPWQsaC09OCk7aWYoMD09PWkpaT0xLWw7ZWxzZXtpZihpPT09cylyZXR1cm4gdT9OYU46MS8wKihmPy0xOjEpO3UrPU1hdGgucG93KDIsYSksaS09bH1yZXR1cm4oZj8tMToxKSp1Kk1hdGgucG93KDIsaS1hKX1mdW5jdGlvbiBJKGUsdCxyLGEsbixpKXt2YXIgdSxvLHMsbD04Kmktbi0xLGg9KDE8PGwpLTEsYz1oPj4xLGQ9MjM9PT1uP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxmPWE/MDppLTEscD1hPzE6LTEsbT10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9TWF0aC5hYnModCksaXNOYU4odCl8fHQ9PT0xLzA/KG89aXNOYU4odCk/MTowLHU9aCk6KHU9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksdCoocz1NYXRoLnBvdygyLC11KSk8MSYmKHUtLSxzKj0yKSwodCs9dStjPj0xP2QvczpkKk1hdGgucG93KDIsMS1jKSkqcz49MiYmKHUrKyxzLz0yKSx1K2M+PWg/KG89MCx1PWgpOnUrYz49MT8obz0odCpzLTEpKk1hdGgucG93KDIsbiksdSs9Yyk6KG89dCpNYXRoLnBvdygyLGMtMSkqTWF0aC5wb3coMixuKSx1PTApKTtuPj04O2VbcitmXT0yNTUmbyxmKz1wLG8vPTI1NixuLT04KTtmb3IodT11PDxufG8sbCs9bjtsPjA7ZVtyK2ZdPTI1NSZ1LGYrPXAsdS89MjU2LGwtPTgpO2VbcitmLXBdfD0xMjgqbX12YXIgTj17fS50b1N0cmluZyxDPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PU4uY2FsbChlKX07ZnVuY3Rpb24gVSgpe3JldHVybiBCLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzfWZ1bmN0aW9uIEQoZSx0KXtpZihVKCk8dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgiKTtyZXR1cm4gQi5UWVBFRF9BUlJBWV9TVVBQT1JUPyhlPW5ldyBVaW50OEFycmF5KHQpKS5fX3Byb3RvX189Qi5wcm90b3R5cGU6KG51bGw9PT1lJiYoZT1uZXcgQih0KSksZS5sZW5ndGg9dCksZX1mdW5jdGlvbiBCKGUsdCxyKXtpZighKEIuVFlQRURfQVJSQVlfU1VQUE9SVHx8dGhpcyBpbnN0YW5jZW9mIEIpKXJldHVybiBuZXcgQihlLHQscik7aWYoIm51bWJlciI9PXR5cGVvZiBlKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdGhyb3cgbmV3IEVycm9yKCJJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpO3JldHVybiBqKHRoaXMsZSl9cmV0dXJuIFYodGhpcyxlLHQscil9ZnVuY3Rpb24gVihlLHQscixhKXtpZigibnVtYmVyIj09dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpO3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgQXJyYXlCdWZmZXImJnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9mdW5jdGlvbihlLHQscixhKXtpZih0LmJ5dGVMZW5ndGgscjwwfHx0LmJ5dGVMZW5ndGg8cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiJ29mZnNldCcgaXMgb3V0IG9mIGJvdW5kcyIpO2lmKHQuYnl0ZUxlbmd0aDxyKyhhfHwwKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiJ2xlbmd0aCcgaXMgb3V0IG9mIGJvdW5kcyIpO3Q9dm9pZCAwPT09ciYmdm9pZCAwPT09YT9uZXcgVWludDhBcnJheSh0KTp2b2lkIDA9PT1hP25ldyBVaW50OEFycmF5KHQscik6bmV3IFVpbnQ4QXJyYXkodCxyLGEpO0IuVFlQRURfQVJSQVlfU1VQUE9SVD8oZT10KS5fX3Byb3RvX189Qi5wcm90b3R5cGU6ZT16KGUsdCk7cmV0dXJuIGV9KGUsdCxyLGEpOiJzdHJpbmciPT10eXBlb2YgdD9mdW5jdGlvbihlLHQscil7InN0cmluZyI9PXR5cGVvZiByJiYiIiE9PXJ8fChyPSJ1dGY4Iik7aWYoIUIuaXNFbmNvZGluZyhyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciZW5jb2RpbmciIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKTt2YXIgYT0wfEcodCxyKTtlPUQoZSxhKTt2YXIgbj1lLndyaXRlKHQscik7biE9PWEmJihlPWUuc2xpY2UoMCxuKSk7cmV0dXJuIGV9KGUsdCxyKTpmdW5jdGlvbihlLHQpe2lmKCQodCkpe3ZhciByPTB8SCh0Lmxlbmd0aCk7cmV0dXJuIDA9PT0oZT1EKGUscikpLmxlbmd0aHx8dC5jb3B5KGUsMCwwLHIpLGV9aWYodCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8Imxlbmd0aCJpbiB0KXJldHVybiJudW1iZXIiIT10eXBlb2YgdC5sZW5ndGh8fChhPXQubGVuZ3RoKSE9YT9EKGUsMCk6eihlLHQpO2lmKCJCdWZmZXIiPT09dC50eXBlJiZDKHQuZGF0YSkpcmV0dXJuIHooZSx0LmRhdGEpfXZhciBhO3Rocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4iKX0oZSx0KX1mdW5jdGlvbiBZKGUpe2lmKCJudW1iZXIiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpO2lmKGU8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJyl9ZnVuY3Rpb24gaihlLHQpe2lmKFkodCksZT1EKGUsdDwwPzA6MHxIKHQpKSwhQi5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcih2YXIgcj0wO3I8dDsrK3IpZVtyXT0wO3JldHVybiBlfWZ1bmN0aW9uIHooZSx0KXt2YXIgcj10Lmxlbmd0aDwwPzA6MHxIKHQubGVuZ3RoKTtlPUQoZSxyKTtmb3IodmFyIGE9MDthPHI7YSs9MSllW2FdPTI1NSZ0W2FdO3JldHVybiBlfWZ1bmN0aW9uIEgoZSl7aWYoZT49VSgpKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4IitVKCkudG9TdHJpbmcoMTYpKyIgYnl0ZXMiKTtyZXR1cm4gMHxlfWZ1bmN0aW9uICQoZSl7cmV0dXJuIShudWxsPT1lfHwhZS5faXNCdWZmZXIpfWZ1bmN0aW9uIEcoZSx0KXtpZigkKGUpKXJldHVybiBlLmxlbmd0aDtpZigidW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiYiZnVuY3Rpb24iPT10eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3JiYoQXJyYXlCdWZmZXIuaXNWaWV3KGUpfHxlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKXJldHVybiBlLmJ5dGVMZW5ndGg7InN0cmluZyIhPXR5cGVvZiBlJiYoZT0iIitlKTt2YXIgcj1lLmxlbmd0aDtpZigwPT09cilyZXR1cm4gMDtmb3IodmFyIGE9ITE7Oylzd2l0Y2godCl7Y2FzZSJhc2NpaSI6Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpyZXR1cm4gcjtjYXNlInV0ZjgiOmNhc2UidXRmLTgiOmNhc2Ugdm9pZCAwOnJldHVybiB3ZShlKS5sZW5ndGg7Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiAyKnI7Y2FzZSJoZXgiOnJldHVybiByPj4+MTtjYXNlImJhc2U2NCI6cmV0dXJuIHllKGUpLmxlbmd0aDtkZWZhdWx0OmlmKGEpcmV0dXJuIHdlKGUpLmxlbmd0aDt0PSgiIit0KS50b0xvd2VyQ2FzZSgpLGE9ITB9fWZ1bmN0aW9uIFcoZSx0LHIpe3ZhciBhPSExO2lmKCh2b2lkIDA9PT10fHx0PDApJiYodD0wKSx0PnRoaXMubGVuZ3RoKXJldHVybiIiO2lmKCh2b2lkIDA9PT1yfHxyPnRoaXMubGVuZ3RoKSYmKHI9dGhpcy5sZW5ndGgpLHI8PTApcmV0dXJuIiI7aWYoKHI+Pj49MCk8PSh0Pj4+PTApKXJldHVybiIiO2ZvcihlfHwoZT0idXRmOCIpOzspc3dpdGNoKGUpe2Nhc2UiaGV4IjpyZXR1cm4gc2UodGhpcyx0LHIpO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6cmV0dXJuIG5lKHRoaXMsdCxyKTtjYXNlImFzY2lpIjpyZXR1cm4gdWUodGhpcyx0LHIpO2Nhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIG9lKHRoaXMsdCxyKTtjYXNlImJhc2U2NCI6cmV0dXJuIGFlKHRoaXMsdCxyKTtjYXNlInVjczIiOmNhc2UidWNzLTIiOmNhc2UidXRmMTZsZSI6Y2FzZSJ1dGYtMTZsZSI6cmV0dXJuIGxlKHRoaXMsdCxyKTtkZWZhdWx0OmlmKGEpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIitlKTtlPShlKyIiKS50b0xvd2VyQ2FzZSgpLGE9ITB9fWZ1bmN0aW9uIHEoZSx0LHIpe3ZhciBhPWVbdF07ZVt0XT1lW3JdLGVbcl09YX1mdW5jdGlvbiBLKGUsdCxyLGEsbil7aWYoMD09PWUubGVuZ3RoKXJldHVybi0xO2lmKCJzdHJpbmciPT10eXBlb2Ygcj8oYT1yLHI9MCk6cj4yMTQ3NDgzNjQ3P3I9MjE0NzQ4MzY0NzpyPC0yMTQ3NDgzNjQ4JiYocj0tMjE0NzQ4MzY0OCkscj0rcixpc05hTihyKSYmKHI9bj8wOmUubGVuZ3RoLTEpLHI8MCYmKHI9ZS5sZW5ndGgrcikscj49ZS5sZW5ndGgpe2lmKG4pcmV0dXJuLTE7cj1lLmxlbmd0aC0xfWVsc2UgaWYocjwwKXtpZighbilyZXR1cm4tMTtyPTB9aWYoInN0cmluZyI9PXR5cGVvZiB0JiYodD1CLmZyb20odCxhKSksJCh0KSlyZXR1cm4gMD09PXQubGVuZ3RoPy0xOlgoZSx0LHIsYSxuKTtpZigibnVtYmVyIj09dHlwZW9mIHQpcmV0dXJuIHQmPTI1NSxCLlRZUEVEX0FSUkFZX1NVUFBPUlQmJiJmdW5jdGlvbiI9PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP24/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGUsdCxyKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGUsdCxyKTpYKGUsW3RdLHIsYSxuKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXIiKX1mdW5jdGlvbiBYKGUsdCxyLGEsbil7dmFyIGksdT0xLG89ZS5sZW5ndGgscz10Lmxlbmd0aDtpZih2b2lkIDAhPT1hJiYoInVjczIiPT09KGE9U3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkpfHwidWNzLTIiPT09YXx8InV0ZjE2bGUiPT09YXx8InV0Zi0xNmxlIj09PWEpKXtpZihlLmxlbmd0aDwyfHx0Lmxlbmd0aDwyKXJldHVybi0xO3U9MixvLz0yLHMvPTIsci89Mn1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIDE9PT11P2VbdF06ZS5yZWFkVUludDE2QkUodCp1KX1pZihuKXt2YXIgaD0tMTtmb3IoaT1yO2k8bztpKyspaWYobChlLGkpPT09bCh0LC0xPT09aD8wOmktaCkpe2lmKC0xPT09aCYmKGg9aSksaS1oKzE9PT1zKXJldHVybiBoKnV9ZWxzZS0xIT09aCYmKGktPWktaCksaD0tMX1lbHNlIGZvcihyK3M+byYmKHI9by1zKSxpPXI7aT49MDtpLS0pe2Zvcih2YXIgYz0hMCxkPTA7ZDxzO2QrKylpZihsKGUsaStkKSE9PWwodCxkKSl7Yz0hMTticmVha31pZihjKXJldHVybiBpfXJldHVybi0xfWZ1bmN0aW9uIEooZSx0LHIsYSl7cj1OdW1iZXIocil8fDA7dmFyIG49ZS5sZW5ndGgtcjthPyhhPU51bWJlcihhKSk+biYmKGE9bik6YT1uO3ZhciBpPXQubGVuZ3RoO2lmKGklMiE9MCl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGhleCBzdHJpbmciKTthPmkvMiYmKGE9aS8yKTtmb3IodmFyIHU9MDt1PGE7Kyt1KXt2YXIgbz1wYXJzZUludCh0LnN1YnN0cigyKnUsMiksMTYpO2lmKGlzTmFOKG8pKXJldHVybiB1O2Vbcit1XT1vfXJldHVybiB1fWZ1bmN0aW9uIFooZSx0LHIsYSl7cmV0dXJuIHZlKHdlKHQsZS5sZW5ndGgtciksZSxyLGEpfWZ1bmN0aW9uIFEoZSx0LHIsYSl7cmV0dXJuIHZlKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTA7cjxlLmxlbmd0aDsrK3IpdC5wdXNoKDI1NSZlLmNoYXJDb2RlQXQocikpO3JldHVybiB0fSh0KSxlLHIsYSl9ZnVuY3Rpb24gZWUoZSx0LHIsYSl7cmV0dXJuIFEoZSx0LHIsYSl9ZnVuY3Rpb24gdGUoZSx0LHIsYSl7cmV0dXJuIHZlKHllKHQpLGUscixhKX1mdW5jdGlvbiByZShlLHQscixhKXtyZXR1cm4gdmUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsYSxuLGk9W10sdT0wO3U8ZS5sZW5ndGgmJiEoKHQtPTIpPDApOysrdSlhPShyPWUuY2hhckNvZGVBdCh1KSk+Pjgsbj1yJTI1NixpLnB1c2gobiksaS5wdXNoKGEpO3JldHVybiBpfSh0LGUubGVuZ3RoLXIpLGUscixhKX1mdW5jdGlvbiBhZShlLHQscil7cmV0dXJuIDA9PT10JiZyPT09ZS5sZW5ndGg/eChlKTp4KGUuc2xpY2UodCxyKSl9ZnVuY3Rpb24gbmUoZSx0LHIpe3I9TWF0aC5taW4oZS5sZW5ndGgscik7Zm9yKHZhciBhPVtdLG49dDtuPHI7KXt2YXIgaSx1LG8scyxsPWVbbl0saD1udWxsLGM9bD4yMzk/NDpsPjIyMz8zOmw+MTkxPzI6MTtpZihuK2M8PXIpc3dpdGNoKGMpe2Nhc2UgMTpsPDEyOCYmKGg9bCk7YnJlYWs7Y2FzZSAyOjEyOD09KDE5MiYoaT1lW24rMV0pKSYmKHM9KDMxJmwpPDw2fDYzJmkpPjEyNyYmKGg9cyk7YnJlYWs7Y2FzZSAzOmk9ZVtuKzFdLHU9ZVtuKzJdLDEyOD09KDE5MiZpKSYmMTI4PT0oMTkyJnUpJiYocz0oMTUmbCk8PDEyfCg2MyZpKTw8Nnw2MyZ1KT4yMDQ3JiYoczw1NTI5Nnx8cz41NzM0MykmJihoPXMpO2JyZWFrO2Nhc2UgNDppPWVbbisxXSx1PWVbbisyXSxvPWVbbiszXSwxMjg9PSgxOTImaSkmJjEyOD09KDE5MiZ1KSYmMTI4PT0oMTkyJm8pJiYocz0oMTUmbCk8PDE4fCg2MyZpKTw8MTJ8KDYzJnUpPDw2fDYzJm8pPjY1NTM1JiZzPDExMTQxMTImJihoPXMpfW51bGw9PT1oPyhoPTY1NTMzLGM9MSk6aD42NTUzNSYmKGgtPTY1NTM2LGEucHVzaChoPj4+MTAmMTAyM3w1NTI5NiksaD01NjMyMHwxMDIzJmgpLGEucHVzaChoKSxuKz1jfXJldHVybiBmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtpZih0PD1pZSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZSk7dmFyIHI9IiIsYT0wO2Zvcig7YTx0OylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxlLnNsaWNlKGEsYSs9aWUpKTtyZXR1cm4gcn0oYSl9Qi5UWVBFRF9BUlJBWV9TVVBQT1JUPXZvaWQgMD09PXQuVFlQRURfQVJSQVlfU1VQUE9SVHx8dC5UWVBFRF9BUlJBWV9TVVBQT1JULFUoKSxCLnBvb2xTaXplPTgxOTIsQi5fYXVnbWVudD1mdW5jdGlvbihlKXtyZXR1cm4gZS5fX3Byb3RvX189Qi5wcm90b3R5cGUsZX0sQi5mcm9tPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gVihudWxsLGUsdCxyKX0sQi5UWVBFRF9BUlJBWV9TVVBQT1JUJiYoQi5wcm90b3R5cGUuX19wcm90b19fPVVpbnQ4QXJyYXkucHJvdG90eXBlLEIuX19wcm90b19fPVVpbnQ4QXJyYXksInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5zcGVjaWVzJiZCW1N5bWJvbC5zcGVjaWVzXSksQi5hbGxvYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGEpe3JldHVybiBZKHQpLHQ8PTA/RChlLHQpOnZvaWQgMCE9PXI/InN0cmluZyI9PXR5cGVvZiBhP0QoZSx0KS5maWxsKHIsYSk6RChlLHQpLmZpbGwocik6RChlLHQpfShudWxsLGUsdCxyKX0sQi5hbGxvY1Vuc2FmZT1mdW5jdGlvbihlKXtyZXR1cm4gaihudWxsLGUpfSxCLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbihlKXtyZXR1cm4gaihudWxsLGUpfSxCLmlzQnVmZmVyPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiYoISFlLl9pc0J1ZmZlcnx8RWUoZSl8fGZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlLnJlYWRGbG9hdExFJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5zbGljZSYmRWUoZS5zbGljZSgwLDApKX0oZSkpfSxCLmNvbXBhcmU9ZnVuY3Rpb24oZSx0KXtpZighJChlKXx8ISQodCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycyIpO2lmKGU9PT10KXJldHVybiAwO2Zvcih2YXIgcj1lLmxlbmd0aCxhPXQubGVuZ3RoLG49MCxpPU1hdGgubWluKHIsYSk7bjxpOysrbilpZihlW25dIT09dFtuXSl7cj1lW25dLGE9dFtuXTticmVha31yZXR1cm4gcjxhPy0xOmE8cj8xOjB9LEIuaXNFbmNvZGluZz1mdW5jdGlvbihlKXtzd2l0Y2goU3RyaW5nKGUpLnRvTG93ZXJDYXNlKCkpe2Nhc2UiaGV4IjpjYXNlInV0ZjgiOmNhc2UidXRmLTgiOmNhc2UiYXNjaWkiOmNhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6Y2FzZSJiYXNlNjQiOmNhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sQi5jb25jYXQ9ZnVuY3Rpb24oZSx0KXtpZighQyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aWYoMD09PWUubGVuZ3RoKXJldHVybiBCLmFsbG9jKDApO3ZhciByO2lmKHZvaWQgMD09PXQpZm9yKHQ9MCxyPTA7cjxlLmxlbmd0aDsrK3IpdCs9ZVtyXS5sZW5ndGg7dmFyIGE9Qi5hbGxvY1Vuc2FmZSh0KSxuPTA7Zm9yKHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIGk9ZVtyXTtpZighJChpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7aS5jb3B5KGEsbiksbis9aS5sZW5ndGh9cmV0dXJuIGF9LEIuYnl0ZUxlbmd0aD1HLEIucHJvdG90eXBlLl9pc0J1ZmZlcj0hMCxCLnByb3RvdHlwZS5zd2FwMTY9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTIhPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzIik7Zm9yKHZhciB0PTA7dDxlO3QrPTIpcSh0aGlzLHQsdCsxKTtyZXR1cm4gdGhpc30sQi5wcm90b3R5cGUuc3dhcDMyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSU0IT0wKXRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cyIpO2Zvcih2YXIgdD0wO3Q8ZTt0Kz00KXEodGhpcyx0LHQrMykscSh0aGlzLHQrMSx0KzIpO3JldHVybiB0aGlzfSxCLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTghPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzIik7Zm9yKHZhciB0PTA7dDxlO3QrPTgpcSh0aGlzLHQsdCs3KSxxKHRoaXMsdCsxLHQrNikscSh0aGlzLHQrMix0KzUpLHEodGhpcyx0KzMsdCs0KTtyZXR1cm4gdGhpc30sQi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT0wfHRoaXMubGVuZ3RoO3JldHVybiAwPT09ZT8iIjowPT09YXJndW1lbnRzLmxlbmd0aD9uZSh0aGlzLDAsZSk6Vy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbihlKXtpZighJChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIik7cmV0dXJuIHRoaXM9PT1lfHwwPT09Qi5jb21wYXJlKHRoaXMsZSl9LEIucHJvdG90eXBlLmluc3BlY3Q9ZnVuY3Rpb24oKXt2YXIgZT0iIjtyZXR1cm4gdGhpcy5sZW5ndGg+MCYmKGU9dGhpcy50b1N0cmluZygiaGV4IiwwLDUwKS5tYXRjaCgvLnsyfS9nKS5qb2luKCIgIiksdGhpcy5sZW5ndGg+NTAmJihlKz0iIC4uLiAiKSksIjxCdWZmZXIgIitlKyI+In0sQi5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihlLHQscixhLG4pe2lmKCEkKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtpZih2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1yJiYocj1lP2UubGVuZ3RoOjApLHZvaWQgMD09PWEmJihhPTApLHZvaWQgMD09PW4mJihuPXRoaXMubGVuZ3RoKSx0PDB8fHI+ZS5sZW5ndGh8fGE8MHx8bj50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigib3V0IG9mIHJhbmdlIGluZGV4Iik7aWYoYT49biYmdD49cilyZXR1cm4gMDtpZihhPj1uKXJldHVybi0xO2lmKHQ+PXIpcmV0dXJuIDE7aWYodGhpcz09PWUpcmV0dXJuIDA7Zm9yKHZhciBpPShuPj4+PTApLShhPj4+PTApLHU9KHI+Pj49MCktKHQ+Pj49MCksbz1NYXRoLm1pbihpLHUpLHM9dGhpcy5zbGljZShhLG4pLGw9ZS5zbGljZSh0LHIpLGg9MDtoPG87KytoKWlmKHNbaF0hPT1sW2hdKXtpPXNbaF0sdT1sW2hdO2JyZWFrfXJldHVybiBpPHU/LTE6dTxpPzE6MH0sQi5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybi0xIT09dGhpcy5pbmRleE9mKGUsdCxyKX0sQi5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbihlLHQscil7cmV0dXJuIEsodGhpcyxlLHQsciwhMCl9LEIucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gSyh0aGlzLGUsdCxyLCExKX0sQi5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0LHIsYSl7aWYodm9pZCAwPT09dClhPSJ1dGY4IixyPXRoaXMubGVuZ3RoLHQ9MDtlbHNlIGlmKHZvaWQgMD09PXImJiJzdHJpbmciPT10eXBlb2YgdClhPXQscj10aGlzLmxlbmd0aCx0PTA7ZWxzZXtpZighaXNGaW5pdGUodCkpdGhyb3cgbmV3IEVycm9yKCJCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCIpO3R8PTAsaXNGaW5pdGUocik/KHJ8PTAsdm9pZCAwPT09YSYmKGE9InV0ZjgiKSk6KGE9cixyPXZvaWQgMCl9dmFyIG49dGhpcy5sZW5ndGgtdDtpZigodm9pZCAwPT09cnx8cj5uKSYmKHI9biksZS5sZW5ndGg+MCYmKHI8MHx8dDwwKXx8dD50aGlzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiKTthfHwoYT0idXRmOCIpO2Zvcih2YXIgaT0hMTs7KXN3aXRjaChhKXtjYXNlImhleCI6cmV0dXJuIEoodGhpcyxlLHQscik7Y2FzZSJ1dGY4IjpjYXNlInV0Zi04IjpyZXR1cm4gWih0aGlzLGUsdCxyKTtjYXNlImFzY2lpIjpyZXR1cm4gUSh0aGlzLGUsdCxyKTtjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiBlZSh0aGlzLGUsdCxyKTtjYXNlImJhc2U2NCI6cmV0dXJuIHRlKHRoaXMsZSx0LHIpO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gcmUodGhpcyxlLHQscik7ZGVmYXVsdDppZihpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYSk7YT0oIiIrYSkudG9Mb3dlckNhc2UoKSxpPSEwfX0sQi5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6IkJ1ZmZlciIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fTt2YXIgaWU9NDA5NjtmdW5jdGlvbiB1ZShlLHQscil7dmFyIGE9IiI7cj1NYXRoLm1pbihlLmxlbmd0aCxyKTtmb3IodmFyIG49dDtuPHI7KytuKWErPVN0cmluZy5mcm9tQ2hhckNvZGUoMTI3JmVbbl0pO3JldHVybiBhfWZ1bmN0aW9uIG9lKGUsdCxyKXt2YXIgYT0iIjtyPU1hdGgubWluKGUubGVuZ3RoLHIpO2Zvcih2YXIgbj10O248cjsrK24pYSs9U3RyaW5nLmZyb21DaGFyQ29kZShlW25dKTtyZXR1cm4gYX1mdW5jdGlvbiBzZShlLHQscil7dmFyIGE9ZS5sZW5ndGg7KCF0fHx0PDApJiYodD0wKSwoIXJ8fHI8MHx8cj5hKSYmKHI9YSk7Zm9yKHZhciBuPSIiLGk9dDtpPHI7KytpKW4rPWJlKGVbaV0pO3JldHVybiBufWZ1bmN0aW9uIGxlKGUsdCxyKXtmb3IodmFyIGE9ZS5zbGljZSh0LHIpLG49IiIsaT0wO2k8YS5sZW5ndGg7aSs9MiluKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFbaV0rMjU2KmFbaSsxXSk7cmV0dXJuIG59ZnVuY3Rpb24gaGUoZSx0LHIpe2lmKGUlMSE9MHx8ZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJvZmZzZXQgaXMgbm90IHVpbnQiKTtpZihlK3Q+cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCIpfWZ1bmN0aW9uIGNlKGUsdCxyLGEsbixpKXtpZighJChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCciYnVmZmVyIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJyk7aWYodD5ufHx0PGkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpO2lmKHIrYT5lLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIil9ZnVuY3Rpb24gZGUoZSx0LHIsYSl7dDwwJiYodD02NTUzNSt0KzEpO2Zvcih2YXIgbj0wLGk9TWF0aC5taW4oZS5sZW5ndGgtciwyKTtuPGk7KytuKWVbcituXT0odCYyNTU8PDgqKGE/bjoxLW4pKT4+PjgqKGE/bjoxLW4pfWZ1bmN0aW9uIGZlKGUsdCxyLGEpe3Q8MCYmKHQ9NDI5NDk2NzI5NSt0KzEpO2Zvcih2YXIgbj0wLGk9TWF0aC5taW4oZS5sZW5ndGgtciw0KTtuPGk7KytuKWVbcituXT10Pj4+OCooYT9uOjMtbikmMjU1fWZ1bmN0aW9uIHBlKGUsdCxyLGEsbixpKXtpZihyK2E+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpO2lmKHI8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIil9ZnVuY3Rpb24gbWUoZSx0LHIsYSxuKXtyZXR1cm4gbnx8cGUoZSwwLHIsNCksSShlLHQscixhLDIzLDQpLHIrNH1mdW5jdGlvbiBfZShlLHQscixhLG4pe3JldHVybiBufHxwZShlLDAsciw4KSxJKGUsdCxyLGEsNTIsOCkscis4fUIucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKGUsdCl7dmFyIHIsYT10aGlzLmxlbmd0aDtpZigoZT1+fmUpPDA/KGUrPWEpPDAmJihlPTApOmU+YSYmKGU9YSksKHQ9dm9pZCAwPT09dD9hOn5+dCk8MD8odCs9YSk8MCYmKHQ9MCk6dD5hJiYodD1hKSx0PGUmJih0PWUpLEIuVFlQRURfQVJSQVlfU1VQUE9SVCkocj10aGlzLnN1YmFycmF5KGUsdCkpLl9fcHJvdG9fXz1CLnByb3RvdHlwZTtlbHNle3ZhciBuPXQtZTtyPW5ldyBCKG4sdm9pZCAwKTtmb3IodmFyIGk9MDtpPG47KytpKXJbaV09dGhpc1tpK2VdfXJldHVybiByfSxCLnByb3RvdHlwZS5yZWFkVUludExFPWZ1bmN0aW9uKGUsdCxyKXtlfD0wLHR8PTAscnx8aGUoZSx0LHRoaXMubGVuZ3RoKTtmb3IodmFyIGE9dGhpc1tlXSxuPTEsaT0wOysraTx0JiYobio9MjU2KTspYSs9dGhpc1tlK2ldKm47cmV0dXJuIGF9LEIucHJvdG90eXBlLnJlYWRVSW50QkU9ZnVuY3Rpb24oZSx0LHIpe2V8PTAsdHw9MCxyfHxoZShlLHQsdGhpcy5sZW5ndGgpO2Zvcih2YXIgYT10aGlzW2UrLS10XSxuPTE7dD4wJiYobio9MjU2KTspYSs9dGhpc1tlKy0tdF0qbjtyZXR1cm4gYX0sQi5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fGhlKGUsMSx0aGlzLmxlbmd0aCksdGhpc1tlXX0sQi5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fGhlKGUsMix0aGlzLmxlbmd0aCksdGhpc1tlXXx0aGlzW2UrMV08PDh9LEIucHJvdG90eXBlLnJlYWRVSW50MTZCRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxoZShlLDIsdGhpcy5sZW5ndGgpLHRoaXNbZV08PDh8dGhpc1tlKzFdfSxCLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8aGUoZSw0LHRoaXMubGVuZ3RoKSwodGhpc1tlXXx0aGlzW2UrMV08PDh8dGhpc1tlKzJdPDwxNikrMTY3NzcyMTYqdGhpc1tlKzNdfSxCLnByb3RvdHlwZS5yZWFkVUludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8aGUoZSw0LHRoaXMubGVuZ3RoKSwxNjc3NzIxNip0aGlzW2VdKyh0aGlzW2UrMV08PDE2fHRoaXNbZSsyXTw8OHx0aGlzW2UrM10pfSxCLnByb3RvdHlwZS5yZWFkSW50TEU9ZnVuY3Rpb24oZSx0LHIpe2V8PTAsdHw9MCxyfHxoZShlLHQsdGhpcy5sZW5ndGgpO2Zvcih2YXIgYT10aGlzW2VdLG49MSxpPTA7KytpPHQmJihuKj0yNTYpOylhKz10aGlzW2UraV0qbjtyZXR1cm4gYT49KG4qPTEyOCkmJihhLT1NYXRoLnBvdygyLDgqdCkpLGF9LEIucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbihlLHQscil7ZXw9MCx0fD0wLHJ8fGhlKGUsdCx0aGlzLmxlbmd0aCk7Zm9yKHZhciBhPXQsbj0xLGk9dGhpc1tlKy0tYV07YT4wJiYobio9MjU2KTspaSs9dGhpc1tlKy0tYV0qbjtyZXR1cm4gaT49KG4qPTEyOCkmJihpLT1NYXRoLnBvdygyLDgqdCkpLGl9LEIucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fGhlKGUsMSx0aGlzLmxlbmd0aCksMTI4JnRoaXNbZV0/LTEqKDI1NS10aGlzW2VdKzEpOnRoaXNbZV19LEIucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKGUsdCl7dHx8aGUoZSwyLHRoaXMubGVuZ3RoKTt2YXIgcj10aGlzW2VdfHRoaXNbZSsxXTw8ODtyZXR1cm4gMzI3Njgmcj80Mjk0OTAxNzYwfHI6cn0sQi5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24oZSx0KXt0fHxoZShlLDIsdGhpcy5sZW5ndGgpO3ZhciByPXRoaXNbZSsxXXx0aGlzW2VdPDw4O3JldHVybiAzMjc2OCZyPzQyOTQ5MDE3NjB8cjpyfSxCLnByb3RvdHlwZS5yZWFkSW50MzJMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxoZShlLDQsdGhpcy5sZW5ndGgpLHRoaXNbZV18dGhpc1tlKzFdPDw4fHRoaXNbZSsyXTw8MTZ8dGhpc1tlKzNdPDwyNH0sQi5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8aGUoZSw0LHRoaXMubGVuZ3RoKSx0aGlzW2VdPDwyNHx0aGlzW2UrMV08PDE2fHRoaXNbZSsyXTw8OHx0aGlzW2UrM119LEIucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fGhlKGUsNCx0aGlzLmxlbmd0aCksUCh0aGlzLGUsITAsMjMsNCl9LEIucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fGhlKGUsNCx0aGlzLmxlbmd0aCksUCh0aGlzLGUsITEsMjMsNCl9LEIucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihlLHQpe3JldHVybiB0fHxoZShlLDgsdGhpcy5sZW5ndGgpLFAodGhpcyxlLCEwLDUyLDgpfSxCLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHx8aGUoZSw4LHRoaXMubGVuZ3RoKSxQKHRoaXMsZSwhMSw1Miw4KX0sQi5wcm90b3R5cGUud3JpdGVVSW50TEU9ZnVuY3Rpb24oZSx0LHIsYSl7KGU9K2UsdHw9MCxyfD0wLGEpfHxjZSh0aGlzLGUsdCxyLE1hdGgucG93KDIsOCpyKS0xLDApO3ZhciBuPTEsaT0wO2Zvcih0aGlzW3RdPTI1NSZlOysraTxyJiYobio9MjU2KTspdGhpc1t0K2ldPWUvbiYyNTU7cmV0dXJuIHQrcn0sQi5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24oZSx0LHIsYSl7KGU9K2UsdHw9MCxyfD0wLGEpfHxjZSh0aGlzLGUsdCxyLE1hdGgucG93KDIsOCpyKS0xLDApO3ZhciBuPXItMSxpPTE7Zm9yKHRoaXNbdCtuXT0yNTUmZTstLW4+PTAmJihpKj0yNTYpOyl0aGlzW3Qrbl09ZS9pJjI1NTtyZXR1cm4gdCtyfSxCLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT0rZSx0fD0wLHJ8fGNlKHRoaXMsZSx0LDEsMjU1LDApLEIuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksdGhpc1t0XT0yNTUmZSx0KzF9LEIucHJvdG90eXBlLndyaXRlVUludDE2TEU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPStlLHR8PTAscnx8Y2UodGhpcyxlLHQsMiw2NTUzNSwwKSxCLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44KTpkZSh0aGlzLGUsdCwhMCksdCsyfSxCLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT0rZSx0fD0wLHJ8fGNlKHRoaXMsZSx0LDIsNjU1MzUsMCksQi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3RdPWU+Pj44LHRoaXNbdCsxXT0yNTUmZSk6ZGUodGhpcyxlLHQsITEpLHQrMn0sQi5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU9K2UsdHw9MCxyfHxjZSh0aGlzLGUsdCw0LDQyOTQ5NjcyOTUsMCksQi5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0aGlzW3QrM109ZT4+PjI0LHRoaXNbdCsyXT1lPj4+MTYsdGhpc1t0KzFdPWU+Pj44LHRoaXNbdF09MjU1JmUpOmZlKHRoaXMsZSx0LCEwKSx0KzR9LEIucHJvdG90eXBlLndyaXRlVUludDMyQkU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPStlLHR8PTAscnx8Y2UodGhpcyxlLHQsNCw0Mjk0OTY3Mjk1LDApLEIuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+MjQsdGhpc1t0KzFdPWU+Pj4xNix0aGlzW3QrMl09ZT4+PjgsdGhpc1t0KzNdPTI1NSZlKTpmZSh0aGlzLGUsdCwhMSksdCs0fSxCLnByb3RvdHlwZS53cml0ZUludExFPWZ1bmN0aW9uKGUsdCxyLGEpe2lmKGU9K2UsdHw9MCwhYSl7dmFyIG49TWF0aC5wb3coMiw4KnItMSk7Y2UodGhpcyxlLHQscixuLTEsLW4pfXZhciBpPTAsdT0xLG89MDtmb3IodGhpc1t0XT0yNTUmZTsrK2k8ciYmKHUqPTI1Nik7KWU8MCYmMD09PW8mJjAhPT10aGlzW3QraS0xXSYmKG89MSksdGhpc1t0K2ldPShlL3V8MCktbyYyNTU7cmV0dXJuIHQrcn0sQi5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbihlLHQscixhKXtpZihlPStlLHR8PTAsIWEpe3ZhciBuPU1hdGgucG93KDIsOCpyLTEpO2NlKHRoaXMsZSx0LHIsbi0xLC1uKX12YXIgaT1yLTEsdT0xLG89MDtmb3IodGhpc1t0K2ldPTI1NSZlOy0taT49MCYmKHUqPTI1Nik7KWU8MCYmMD09PW8mJjAhPT10aGlzW3QraSsxXSYmKG89MSksdGhpc1t0K2ldPShlL3V8MCktbyYyNTU7cmV0dXJuIHQrcn0sQi5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT0rZSx0fD0wLHJ8fGNlKHRoaXMsZSx0LDEsMTI3LC0xMjgpLEIuVFlQRURfQVJSQVlfU1VQUE9SVHx8KGU9TWF0aC5mbG9vcihlKSksZTwwJiYoZT0yNTUrZSsxKSx0aGlzW3RdPTI1NSZlLHQrMX0sQi5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT0rZSx0fD0wLHJ8fGNlKHRoaXMsZSx0LDIsMzI3NjcsLTMyNzY4KSxCLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09MjU1JmUsdGhpc1t0KzFdPWU+Pj44KTpkZSh0aGlzLGUsdCwhMCksdCsyfSxCLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPStlLHR8PTAscnx8Y2UodGhpcyxlLHQsMiwzMjc2NywtMzI3NjgpLEIuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT1lPj4+OCx0aGlzW3QrMV09MjU1JmUpOmRlKHRoaXMsZSx0LCExKSx0KzJ9LEIucHJvdG90eXBlLndyaXRlSW50MzJMRT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU9K2UsdHw9MCxyfHxjZSh0aGlzLGUsdCw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLEIuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1t0XT0yNTUmZSx0aGlzW3QrMV09ZT4+PjgsdGhpc1t0KzJdPWU+Pj4xNix0aGlzW3QrM109ZT4+PjI0KTpmZSh0aGlzLGUsdCwhMCksdCs0fSxCLnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPStlLHR8PTAscnx8Y2UodGhpcyxlLHQsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSxlPDAmJihlPTQyOTQ5NjcyOTUrZSsxKSxCLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbdF09ZT4+PjI0LHRoaXNbdCsxXT1lPj4+MTYsdGhpc1t0KzJdPWU+Pj44LHRoaXNbdCszXT0yNTUmZSk6ZmUodGhpcyxlLHQsITEpLHQrNH0sQi5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbWUodGhpcyxlLHQsITAscil9LEIucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbihlLHQscil7cmV0dXJuIG1lKHRoaXMsZSx0LCExLHIpfSxCLnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gX2UodGhpcyxlLHQsITAscil9LEIucHJvdG90eXBlLndyaXRlRG91YmxlQkU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBfZSh0aGlzLGUsdCwhMSxyKX0sQi5wcm90b3R5cGUuY29weT1mdW5jdGlvbihlLHQscixhKXtpZihyfHwocj0wKSxhfHwwPT09YXx8KGE9dGhpcy5sZW5ndGgpLHQ+PWUubGVuZ3RoJiYodD1lLmxlbmd0aCksdHx8KHQ9MCksYT4wJiZhPHImJihhPXIpLGE9PT1yKXJldHVybiAwO2lmKDA9PT1lLmxlbmd0aHx8MD09PXRoaXMubGVuZ3RoKXJldHVybiAwO2lmKHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigidGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKHI8MHx8cj49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoInNvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMiKTtpZihhPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoInNvdXJjZUVuZCBvdXQgb2YgYm91bmRzIik7YT50aGlzLmxlbmd0aCYmKGE9dGhpcy5sZW5ndGgpLGUubGVuZ3RoLXQ8YS1yJiYoYT1lLmxlbmd0aC10K3IpO3ZhciBuLGk9YS1yO2lmKHRoaXM9PT1lJiZyPHQmJnQ8YSlmb3Iobj1pLTE7bj49MDstLW4pZVtuK3RdPXRoaXNbbityXTtlbHNlIGlmKGk8MWUzfHwhQi5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihuPTA7bjxpOysrbillW24rdF09dGhpc1tuK3JdO2Vsc2UgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoZSx0aGlzLnN1YmFycmF5KHIscitpKSx0KTtyZXR1cm4gaX0sQi5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbihlLHQscixhKXtpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKCJzdHJpbmciPT10eXBlb2YgdD8oYT10LHQ9MCxyPXRoaXMubGVuZ3RoKToic3RyaW5nIj09dHlwZW9mIHImJihhPXIscj10aGlzLmxlbmd0aCksMT09PWUubGVuZ3RoKXt2YXIgbj1lLmNoYXJDb2RlQXQoMCk7bjwyNTYmJihlPW4pfWlmKHZvaWQgMCE9PWEmJiJzdHJpbmciIT10eXBlb2YgYSl0aHJvdyBuZXcgVHlwZUVycm9yKCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nIik7aWYoInN0cmluZyI9PXR5cGVvZiBhJiYhQi5pc0VuY29kaW5nKGEpKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrYSl9ZWxzZSJudW1iZXIiPT10eXBlb2YgZSYmKGUmPTI1NSk7aWYodDwwfHx0aGlzLmxlbmd0aDx0fHx0aGlzLmxlbmd0aDxyKXRocm93IG5ldyBSYW5nZUVycm9yKCJPdXQgb2YgcmFuZ2UgaW5kZXgiKTtpZihyPD10KXJldHVybiB0aGlzO3ZhciBpO2lmKHQ+Pj49MCxyPXZvaWQgMD09PXI/dGhpcy5sZW5ndGg6cj4+PjAsZXx8KGU9MCksIm51bWJlciI9PXR5cGVvZiBlKWZvcihpPXQ7aTxyOysraSl0aGlzW2ldPWU7ZWxzZXt2YXIgdT0kKGUpP2U6d2UobmV3IEIoZSxhKS50b1N0cmluZygpKSxvPXUubGVuZ3RoO2ZvcihpPTA7aTxyLXQ7KytpKXRoaXNbaSt0XT11W2klb119cmV0dXJuIHRoaXN9O3ZhciBnZT0vW14rXC8wLTlBLVphLXotX10vZztmdW5jdGlvbiBiZShlKXtyZXR1cm4gZTwxNj8iMCIrZS50b1N0cmluZygxNik6ZS50b1N0cmluZygxNil9ZnVuY3Rpb24gd2UoZSx0KXt2YXIgcjt0PXR8fDEvMDtmb3IodmFyIGE9ZS5sZW5ndGgsbj1udWxsLGk9W10sdT0wO3U8YTsrK3Upe2lmKChyPWUuY2hhckNvZGVBdCh1KSk+NTUyOTUmJnI8NTczNDQpe2lmKCFuKXtpZihyPjU2MzE5KXsodC09Myk+LTEmJmkucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYodSsxPT09YSl7KHQtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfW49cjtjb250aW51ZX1pZihyPDU2MzIwKXsodC09Myk+LTEmJmkucHVzaCgyMzksMTkxLDE4OSksbj1yO2NvbnRpbnVlfXI9NjU1MzYrKG4tNTUyOTY8PDEwfHItNTYzMjApfWVsc2UgbiYmKHQtPTMpPi0xJiZpLnB1c2goMjM5LDE5MSwxODkpO2lmKG49bnVsbCxyPDEyOCl7aWYoKHQtPTEpPDApYnJlYWs7aS5wdXNoKHIpfWVsc2UgaWYocjwyMDQ4KXtpZigodC09Mik8MClicmVhaztpLnB1c2gocj4+NnwxOTIsNjMmcnwxMjgpfWVsc2UgaWYocjw2NTUzNil7aWYoKHQtPTMpPDApYnJlYWs7aS5wdXNoKHI+PjEyfDIyNCxyPj42JjYzfDEyOCw2MyZyfDEyOCl9ZWxzZXtpZighKHI8MTExNDExMikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGNvZGUgcG9pbnQiKTtpZigodC09NCk8MClicmVhaztpLnB1c2gocj4+MTh8MjQwLHI+PjEyJjYzfDEyOCxyPj42JjYzfDEyOCw2MyZyfDEyOCl9fXJldHVybiBpfWZ1bmN0aW9uIHllKGUpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxyLGEsbixpLHU7TXx8TygpO3ZhciBvPWUubGVuZ3RoO2lmKG8lND4wKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCIpO2k9Ij0iPT09ZVtvLTJdPzI6Ij0iPT09ZVtvLTFdPzE6MCx1PW5ldyBSKDMqby80LWkpLGE9aT4wP28tNDpvO3ZhciBzPTA7Zm9yKHQ9MCxyPTA7dDxhO3QrPTQscis9MyluPUFbZS5jaGFyQ29kZUF0KHQpXTw8MTh8QVtlLmNoYXJDb2RlQXQodCsxKV08PDEyfEFbZS5jaGFyQ29kZUF0KHQrMildPDw2fEFbZS5jaGFyQ29kZUF0KHQrMyldLHVbcysrXT1uPj4xNiYyNTUsdVtzKytdPW4+PjgmMjU1LHVbcysrXT0yNTUmbjtyZXR1cm4gMj09PWk/KG49QVtlLmNoYXJDb2RlQXQodCldPDwyfEFbZS5jaGFyQ29kZUF0KHQrMSldPj40LHVbcysrXT0yNTUmbik6MT09PWkmJihuPUFbZS5jaGFyQ29kZUF0KHQpXTw8MTB8QVtlLmNoYXJDb2RlQXQodCsxKV08PDR8QVtlLmNoYXJDb2RlQXQodCsyKV0+PjIsdVtzKytdPW4+PjgmMjU1LHVbcysrXT0yNTUmbiksdX0oZnVuY3Rpb24oZSl7aWYoKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbT9lLnRyaW0oKTplLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0oZSkucmVwbGFjZShnZSwiIikpLmxlbmd0aDwyKXJldHVybiIiO2Zvcig7ZS5sZW5ndGglNCE9MDspZSs9Ij0iO3JldHVybiBlfShlKSl9ZnVuY3Rpb24gdmUoZSx0LHIsYSl7Zm9yKHZhciBuPTA7bjxhJiYhKG4rcj49dC5sZW5ndGh8fG4+PWUubGVuZ3RoKTsrK24pdFtuK3JdPWVbbl07cmV0dXJuIG59ZnVuY3Rpb24gRWUoZSl7cmV0dXJuISFlLmNvbnN0cnVjdG9yJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlciYmZS5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihlKX0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZjtmdW5jdGlvbiBMZShlKXt0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkeW5hbWljYWxseSByZXF1aXJlICInK2UrJyIuIFBsZWFzZSBjb25maWd1cmUgdGhlIGR5bmFtaWNSZXF1aXJlVGFyZ2V0cyBvci9hbmQgaWdub3JlRHluYW1pY1JlcXVpcmVzIG9wdGlvbiBvZiBAcm9sbHVwL3BsdWdpbi1jb21tb25qcyBhcHByb3ByaWF0ZWx5IGZvciB0aGlzIHJlcXVpcmUgY2FsbCB0byB3b3JrLicpfXZhciBUZT17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKHQpe3ZhciByPSJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQ/ZG9jdW1lbnQuY3VycmVudFNjcmlwdDpudWxsO3QuTHVhUmV0dXJuPXZvaWQgMCxmdW5jdGlvbihlKXtlW2UuT2s9MF09Ik9rIixlW2UuWWllbGQ9MV09IllpZWxkIixlW2UuRXJyb3JSdW49Ml09IkVycm9yUnVuIixlW2UuRXJyb3JTeW50YXg9M109IkVycm9yU3ludGF4IixlW2UuRXJyb3JNZW09NF09IkVycm9yTWVtIixlW2UuRXJyb3JFcnI9NV09IkVycm9yRXJyIixlW2UuRXJyb3JGaWxlPTZdPSJFcnJvckZpbGUifSh0Lkx1YVJldHVybnx8KHQuTHVhUmV0dXJuPXt9KSk7Y29uc3QgYT00LG49LTEsaT0xZTYsdT0taS0xZTM7dC5MdWFUeXBlPXZvaWQgMCxmdW5jdGlvbihlKXtlW2UuTm9uZT0tMV09Ik5vbmUiLGVbZS5OaWw9MF09Ik5pbCIsZVtlLkJvb2xlYW49MV09IkJvb2xlYW4iLGVbZS5MaWdodFVzZXJkYXRhPTJdPSJMaWdodFVzZXJkYXRhIixlW2UuTnVtYmVyPTNdPSJOdW1iZXIiLGVbZS5TdHJpbmc9NF09IlN0cmluZyIsZVtlLlRhYmxlPTVdPSJUYWJsZSIsZVtlLkZ1bmN0aW9uPTZdPSJGdW5jdGlvbiIsZVtlLlVzZXJkYXRhPTddPSJVc2VyZGF0YSIsZVtlLlRocmVhZD04XT0iVGhyZWFkIn0odC5MdWFUeXBlfHwodC5MdWFUeXBlPXt9KSksdC5MdWFFdmVudENvZGVzPXZvaWQgMCxmdW5jdGlvbihlKXtlW2UuQ2FsbD0wXT0iQ2FsbCIsZVtlLlJldD0xXT0iUmV0IixlW2UuTGluZT0yXT0iTGluZSIsZVtlLkNvdW50PTNdPSJDb3VudCIsZVtlLlRhaWxDYWxsPTRdPSJUYWlsQ2FsbCJ9KHQuTHVhRXZlbnRDb2Rlc3x8KHQuTHVhRXZlbnRDb2Rlcz17fSkpLHQuTHVhRXZlbnRNYXNrcz12b2lkIDAsZnVuY3Rpb24oZSl7ZVtlLkNhbGw9MV09IkNhbGwiLGVbZS5SZXQ9Ml09IlJldCIsZVtlLkxpbmU9NF09IkxpbmUiLGVbZS5Db3VudD04XT0iQ291bnQifSh0Lkx1YUV2ZW50TWFza3N8fCh0Lkx1YUV2ZW50TWFza3M9e30pKSx0Lkx1YUxpYnJhcmllcz12b2lkIDAsZnVuY3Rpb24oZSl7ZS5CYXNlPSJfRyIsZS5Db3JvdXRpbmU9ImNvcm91dGluZSIsZS5UYWJsZT0idGFibGUiLGUuSU89ImlvIixlLk9TPSJvcyIsZS5TdHJpbmc9InN0cmluZyIsZS5VVEY4PSJ1dGY4IixlLk1hdGg9Im1hdGgiLGUuRGVidWc9ImRlYnVnIixlLlBhY2thZ2U9InBhY2thZ2UifSh0Lkx1YUxpYnJhcmllc3x8KHQuTHVhTGlicmFyaWVzPXt9KSk7Y2xhc3MgbyBleHRlbmRzIEVycm9ye31jbGFzcyBze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy50YXJnZXQ9ZSx0aGlzLm9wdGlvbnM9dH19ZnVuY3Rpb24gbChlLHQpe3JldHVybiBuZXcgcyhlLHQpfWNsYXNzIGggZXh0ZW5kcyBOdW1iZXJ7fWNsYXNzIGMgZXh0ZW5kcyBBcnJheXt9Y29uc3QgZD0xZTM7Y2xhc3MgZntjb25zdHJ1Y3RvcihlLHQscixhKXt0aGlzLmNsb3NlZD0hMSx0aGlzLmx1YT1lLHRoaXMudHlwZUV4dGVuc2lvbnM9dCx0aGlzLmFkZHJlc3M9cix0aGlzLnBhcmVudD1hfW5ld1RocmVhZCgpe2NvbnN0IGU9dGhpcy5sdWEubHVhX25ld3RocmVhZCh0aGlzLmFkZHJlc3MpO2lmKCFlKXRocm93IG5ldyBFcnJvcigibHVhX25ld3RocmVhZCByZXR1cm5lZCBhIG51bGwgcG9pbnRlciIpO3JldHVybiBuZXcgZih0aGlzLmx1YSx0aGlzLnR5cGVFeHRlbnNpb25zLGUsdGhpcy5wYXJlbnR8fHRoaXMpfXJlc2V0VGhyZWFkKCl7dGhpcy5hc3NlcnRPayh0aGlzLmx1YS5sdWFfcmVzZXR0aHJlYWQodGhpcy5hZGRyZXNzKSl9bG9hZFN0cmluZyhlLHQpe2NvbnN0IHI9dGhpcy5sdWEubW9kdWxlLmxlbmd0aEJ5dGVzVVRGOChlKSxhPXIrMSxuPXRoaXMubHVhLm1vZHVsZS5fbWFsbG9jKGEpO3RyeXt0aGlzLmx1YS5tb2R1bGUuc3RyaW5nVG9VVEY4KGUsbixhKSx0aGlzLmFzc2VydE9rKHRoaXMubHVhLmx1YUxfbG9hZGJ1ZmZlcngodGhpcy5hZGRyZXNzLG4scixudWxsIT10P3Q6bixudWxsKSl9ZmluYWxseXt0aGlzLmx1YS5tb2R1bGUuX2ZyZWUobil9fWxvYWRGaWxlKGUpe3RoaXMuYXNzZXJ0T2sodGhpcy5sdWEubHVhTF9sb2FkZmlsZXgodGhpcy5hZGRyZXNzLGUsbnVsbCkpfXJlc3VtZShlPTApe2NvbnN0IHQ9dGhpcy5sdWEubW9kdWxlLl9tYWxsb2MoYSk7dHJ5e3JldHVybiB0aGlzLmx1YS5tb2R1bGUuc2V0VmFsdWUodCwwLCJpMzIiKSx7cmVzdWx0OnRoaXMubHVhLmx1YV9yZXN1bWUodGhpcy5hZGRyZXNzLG51bGwsZSx0KSxyZXN1bHRDb3VudDp0aGlzLmx1YS5tb2R1bGUuZ2V0VmFsdWUodCwiaTMyIil9fWZpbmFsbHl7dGhpcy5sdWEubW9kdWxlLl9mcmVlKHQpfX1nZXRUb3AoKXtyZXR1cm4gdGhpcy5sdWEubHVhX2dldHRvcCh0aGlzLmFkZHJlc3MpfXNldFRvcChlKXt0aGlzLmx1YS5sdWFfc2V0dG9wKHRoaXMuYWRkcmVzcyxlKX1yZW1vdmUoZSl7cmV0dXJuIHRoaXMubHVhLmx1YV9yZW1vdmUodGhpcy5hZGRyZXNzLGUpfXNldEZpZWxkKGUsdCxyKXtlPXRoaXMubHVhLmx1YV9hYnNpbmRleCh0aGlzLmFkZHJlc3MsZSksdGhpcy5wdXNoVmFsdWUociksdGhpcy5sdWEubHVhX3NldGZpZWxkKHRoaXMuYWRkcmVzcyxlLHQpfWFzeW5jIHJ1bihlPTAscil7Y29uc3QgYT10aGlzLnRpbWVvdXQ7dHJ5e3ZvaWQgMCE9PShudWxsPT1yP3ZvaWQgMDpyLnRpbWVvdXQpJiZ0aGlzLnNldFRpbWVvdXQoRGF0ZS5ub3coKStyLnRpbWVvdXQpO2xldCBhPXRoaXMucmVzdW1lKGUpO2Zvcig7YS5yZXN1bHQ9PT10Lkx1YVJldHVybi5ZaWVsZDspe2lmKHRoaXMudGltZW91dCYmRGF0ZS5ub3coKT50aGlzLnRpbWVvdXQpdGhyb3cgYS5yZXN1bHRDb3VudD4wJiZ0aGlzLnBvcChhLnJlc3VsdENvdW50KSxuZXcgbygidGhyZWFkIHRpbWVvdXQgZXhjZWVkZWQiKTtpZihhLnJlc3VsdENvdW50PjApe2NvbnN0IGU9dGhpcy5nZXRWYWx1ZSgtMSk7dGhpcy5wb3AoYS5yZXN1bHRDb3VudCksZT09PVByb21pc2UucmVzb2x2ZShlKT9hd2FpdCBlOmF3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRJbW1lZGlhdGUoZSkpKX1lbHNlIGF3YWl0IG5ldyBQcm9taXNlKChlPT5zZXRJbW1lZGlhdGUoZSkpKTthPXRoaXMucmVzdW1lKDApfXJldHVybiB0aGlzLmFzc2VydE9rKGEucmVzdWx0KSx0aGlzLmdldFN0YWNrVmFsdWVzKCl9ZmluYWxseXt2b2lkIDAhPT0obnVsbD09cj92b2lkIDA6ci50aW1lb3V0KSYmdGhpcy5zZXRUaW1lb3V0KGEpfX1ydW5TeW5jKGU9MCl7Y29uc3QgdD10aGlzLmdldFRvcCgpLWUtMTtyZXR1cm4gdGhpcy5hc3NlcnRPayh0aGlzLmx1YS5sdWFfcGNhbGxrKHRoaXMuYWRkcmVzcyxlLG4sMCwwLG51bGwpKSx0aGlzLmdldFN0YWNrVmFsdWVzKHQpfXBvcChlPTEpe3RoaXMubHVhLmx1YV9wb3AodGhpcy5hZGRyZXNzLGUpfWNhbGwoZSwuLi5yKXtjb25zdCBhPXRoaXMubHVhLmx1YV9nZXRnbG9iYWwodGhpcy5hZGRyZXNzLGUpO2lmKGEhPT10Lkx1YVR5cGUuRnVuY3Rpb24pdGhyb3cgbmV3IEVycm9yKGBBIGZ1bmN0aW9uIG9mIHR5cGUgJyR7YX0nIHdhcyBwdXNoZWQsIGV4cGVjdGVkIGlzICR7dC5MdWFUeXBlLkZ1bmN0aW9ufWApO2Zvcihjb25zdCBlIG9mIHIpdGhpcy5wdXNoVmFsdWUoZSk7Y29uc3QgaT10aGlzLmdldFRvcCgpLXIubGVuZ3RoLTE7cmV0dXJuIHRoaXMubHVhLmx1YV9jYWxsayh0aGlzLmFkZHJlc3Msci5sZW5ndGgsbiwwLG51bGwpLHRoaXMuZ2V0U3RhY2tWYWx1ZXMoaSl9Z2V0U3RhY2tWYWx1ZXMoZT0wKXtjb25zdCB0PXRoaXMuZ2V0VG9wKCktZSxyPW5ldyBjKHQpO2ZvcihsZXQgYT0wO2E8dDthKyspclthXT10aGlzLmdldFZhbHVlKGUrYSsxKTtyZXR1cm4gcn1zdGF0ZVRvVGhyZWFkKGUpe3ZhciB0O3JldHVybiBlPT09KG51bGw9PT0odD10aGlzLnBhcmVudCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuYWRkcmVzcyk/dGhpcy5wYXJlbnQ6bmV3IGYodGhpcy5sdWEsdGhpcy50eXBlRXh0ZW5zaW9ucyxlLHRoaXMucGFyZW50fHx0aGlzKX1wdXNoVmFsdWUoZSx0KXtjb25zdCByPXRoaXMuZ2V0VmFsdWVEZWNvcmF0aW9ucyhlKSxhPXIudGFyZ2V0O2lmKGEgaW5zdGFuY2VvZiBmKXJldHVybiB2b2lkKDE9PT10aGlzLmx1YS5sdWFfcHVzaHRocmVhZChhLmFkZHJlc3MpfHx0aGlzLmx1YS5sdWFfeG1vdmUoYS5hZGRyZXNzLHRoaXMuYWRkcmVzcywxKSk7Y29uc3Qgbj10aGlzLmdldFRvcCgpO3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSJ1bmRlZmluZWQiOnRoaXMubHVhLmx1YV9wdXNobmlsKHRoaXMuYWRkcmVzcyk7YnJlYWs7Y2FzZSJudW1iZXIiOk51bWJlci5pc0ludGVnZXIoYSk/dGhpcy5sdWEubHVhX3B1c2hpbnRlZ2VyKHRoaXMuYWRkcmVzcyxCaWdJbnQoYSkpOnRoaXMubHVhLmx1YV9wdXNobnVtYmVyKHRoaXMuYWRkcmVzcyxhKTticmVhaztjYXNlInN0cmluZyI6dGhpcy5sdWEubHVhX3B1c2hzdHJpbmcodGhpcy5hZGRyZXNzLGEpO2JyZWFrO2Nhc2UiYm9vbGVhbiI6dGhpcy5sdWEubHVhX3B1c2hib29sZWFuKHRoaXMuYWRkcmVzcyxhPzE6MCk7YnJlYWs7ZGVmYXVsdDppZighdGhpcy50eXBlRXh0ZW5zaW9ucy5maW5kKChlPT5lLmV4dGVuc2lvbi5wdXNoVmFsdWUodGhpcyxyLHQpKSkpdGhyb3cgbmV3IEVycm9yKGBUaGUgdHlwZSAnJHt0eXBlb2YgYX0nIGlzIG5vdCBzdXBwb3J0ZWQgYnkgTHVhYCl9aWYoci5vcHRpb25zLm1ldGF0YWJsZSYmdGhpcy5zZXRNZXRhdGFibGUoLTEsci5vcHRpb25zLm1ldGF0YWJsZSksdGhpcy5nZXRUb3AoKSE9PW4rMSl0aHJvdyBuZXcgRXJyb3IoYHB1c2hWYWx1ZSBleHBlY3RlZCBzdGFjayBzaXplICR7bisxfSwgZ290ICR7dGhpcy5nZXRUb3AoKX1gKX1zZXRNZXRhdGFibGUoZSx0KXtpZihlPXRoaXMubHVhLmx1YV9hYnNpbmRleCh0aGlzLmFkZHJlc3MsZSksdGhpcy5sdWEubHVhX2dldG1ldGF0YWJsZSh0aGlzLmFkZHJlc3MsZSkpe3RoaXMucG9wKDEpO2NvbnN0IHQ9dGhpcy5nZXRNZXRhdGFibGVOYW1lKGUpO3Rocm93IG5ldyBFcnJvcihgZGF0YSBhbHJlYWR5IGhhcyBhc3NvY2lhdGVkIG1ldGF0YWJsZTogJHt0fHwidW5rbm93biBuYW1lIn1gKX10aGlzLnB1c2hWYWx1ZSh0KSx0aGlzLmx1YS5sdWFfc2V0bWV0YXRhYmxlKHRoaXMuYWRkcmVzcyxlKX1nZXRNZXRhdGFibGVOYW1lKGUpe2NvbnN0IHI9dGhpcy5sdWEubHVhTF9nZXRtZXRhZmllbGQodGhpcy5hZGRyZXNzLGUsIl9fbmFtZSIpO2lmKHI9PT10Lkx1YVR5cGUuTmlsKXJldHVybjtpZihyIT09dC5MdWFUeXBlLlN0cmluZylyZXR1cm4gdm9pZCB0aGlzLnBvcCgxKTtjb25zdCBhPXRoaXMubHVhLmx1YV90b2xzdHJpbmcodGhpcy5hZGRyZXNzLC0xLG51bGwpO3JldHVybiB0aGlzLnBvcCgxKSxhfWdldFZhbHVlKGUscixhKXtlPXRoaXMubHVhLmx1YV9hYnNpbmRleCh0aGlzLmFkZHJlc3MsZSk7Y29uc3Qgbj1udWxsIT1yP3I6dGhpcy5sdWEubHVhX3R5cGUodGhpcy5hZGRyZXNzLGUpO3N3aXRjaChuKXtjYXNlIHQuTHVhVHlwZS5Ob25lOnJldHVybjtjYXNlIHQuTHVhVHlwZS5OaWw6cmV0dXJuIG51bGw7Y2FzZSB0Lkx1YVR5cGUuTnVtYmVyOnJldHVybiB0aGlzLmx1YS5sdWFfdG9udW1iZXJ4KHRoaXMuYWRkcmVzcyxlLG51bGwpO2Nhc2UgdC5MdWFUeXBlLlN0cmluZzpyZXR1cm4gdGhpcy5sdWEubHVhX3RvbHN0cmluZyh0aGlzLmFkZHJlc3MsZSxudWxsKTtjYXNlIHQuTHVhVHlwZS5Cb29sZWFuOnJldHVybiBCb29sZWFuKHRoaXMubHVhLmx1YV90b2Jvb2xlYW4odGhpcy5hZGRyZXNzLGUpKTtjYXNlIHQuTHVhVHlwZS5UaHJlYWQ6cmV0dXJuIHRoaXMuc3RhdGVUb1RocmVhZCh0aGlzLmx1YS5sdWFfdG90aHJlYWQodGhpcy5hZGRyZXNzLGUpKTtkZWZhdWx0OntsZXQgcjtuIT09dC5MdWFUeXBlLlRhYmxlJiZuIT09dC5MdWFUeXBlLlVzZXJkYXRhfHwocj10aGlzLmdldE1ldGF0YWJsZU5hbWUoZSkpO2NvbnN0IGk9dGhpcy50eXBlRXh0ZW5zaW9ucy5maW5kKCh0PT50LmV4dGVuc2lvbi5pc1R5cGUodGhpcyxlLG4scikpKTtyZXR1cm4gaT9pLmV4dGVuc2lvbi5nZXRWYWx1ZSh0aGlzLGUsYSk6KGNvbnNvbGUud2FybihgVGhlIHR5cGUgJyR7dGhpcy5sdWEubHVhX3R5cGVuYW1lKHRoaXMuYWRkcmVzcyxuKX0nIHJldHVybmVkIGlzIG5vdCBzdXBwb3J0ZWQgb24gSlNgKSxuZXcgaCh0aGlzLmx1YS5sdWFfdG9wb2ludGVyKHRoaXMuYWRkcmVzcyxlKSkpfX19Y2xvc2UoKXt0aGlzLmlzQ2xvc2VkKCl8fCh0aGlzLmhvb2tGdW5jdGlvblBvaW50ZXImJnRoaXMubHVhLm1vZHVsZS5yZW1vdmVGdW5jdGlvbih0aGlzLmhvb2tGdW5jdGlvblBvaW50ZXIpLHRoaXMuY2xvc2VkPSEwKX1zZXRUaW1lb3V0KGUpe2UmJmU+MD8odGhpcy5ob29rRnVuY3Rpb25Qb2ludGVyfHwodGhpcy5ob29rRnVuY3Rpb25Qb2ludGVyPXRoaXMubHVhLm1vZHVsZS5hZGRGdW5jdGlvbigoKCk9PntEYXRlLm5vdygpPmUmJih0aGlzLnB1c2hWYWx1ZShuZXcgbygidGhyZWFkIHRpbWVvdXQgZXhjZWVkZWQiKSksdGhpcy5sdWEubHVhX2Vycm9yKHRoaXMuYWRkcmVzcykpfSksInZpaSIpKSx0aGlzLmx1YS5sdWFfc2V0aG9vayh0aGlzLmFkZHJlc3MsdGhpcy5ob29rRnVuY3Rpb25Qb2ludGVyLHQuTHVhRXZlbnRNYXNrcy5Db3VudCxkKSx0aGlzLnRpbWVvdXQ9ZSk6dGhpcy5ob29rRnVuY3Rpb25Qb2ludGVyJiYodGhpcy5ob29rRnVuY3Rpb25Qb2ludGVyPXZvaWQgMCx0aGlzLnRpbWVvdXQ9dm9pZCAwLHRoaXMubHVhLmx1YV9zZXRob29rKHRoaXMuYWRkcmVzcyxudWxsLDAsMCkpfWdldFRpbWVvdXQoKXtyZXR1cm4gdGhpcy50aW1lb3V0fWdldFBvaW50ZXIoZSl7cmV0dXJuIG5ldyBoKHRoaXMubHVhLmx1YV90b3BvaW50ZXIodGhpcy5hZGRyZXNzLGUpKX1pc0Nsb3NlZCgpe3ZhciBlO3JldHVybiF0aGlzLmFkZHJlc3N8fHRoaXMuY2xvc2VkfHxCb29sZWFuKG51bGw9PT0oZT10aGlzLnBhcmVudCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaXNDbG9zZWQoKSl9aW5kZXhUb1N0cmluZyhlKXtjb25zdCB0PXRoaXMubHVhLmx1YUxfdG9sc3RyaW5nKHRoaXMuYWRkcmVzcyxlLG51bGwpO3JldHVybiB0aGlzLnBvcCgpLHR9ZHVtcFN0YWNrKGU9Y29uc29sZS5sb2cpe2NvbnN0IHQ9dGhpcy5nZXRUb3AoKTtmb3IobGV0IHI9MTtyPD10O3IrKyl7Y29uc3QgdD10aGlzLmx1YS5sdWFfdHlwZSh0aGlzLmFkZHJlc3Mscik7ZShyLHRoaXMubHVhLmx1YV90eXBlbmFtZSh0aGlzLmFkZHJlc3MsdCksdGhpcy5nZXRQb2ludGVyKHIpLHRoaXMuaW5kZXhUb1N0cmluZyhyKSx0aGlzLmdldFZhbHVlKHIsdCkpfX1hc3NlcnRPayhlKXtpZihlIT09dC5MdWFSZXR1cm4uT2smJmUhPT10Lkx1YVJldHVybi5ZaWVsZCl7Y29uc3Qgcj10Lkx1YVJldHVybltlXSxhPW5ldyBFcnJvcihgTHVhIEVycm9yKCR7cn0vJHtlfSlgKTtpZih0aGlzLmdldFRvcCgpPjApaWYoZT09PXQuTHVhUmV0dXJuLkVycm9yTWVtKWEubWVzc2FnZT10aGlzLmx1YS5sdWFfdG9sc3RyaW5nKHRoaXMuYWRkcmVzcywtMSxudWxsKTtlbHNle2NvbnN0IGU9dGhpcy5nZXRWYWx1ZSgtMSk7ZSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz1lLnN0YWNrKSxhLm1lc3NhZ2U9dGhpcy5pbmRleFRvU3RyaW5nKC0xKX1pZihlIT09dC5MdWFSZXR1cm4uRXJyb3JNZW0pdHJ5e3RoaXMubHVhLmx1YUxfdHJhY2ViYWNrKHRoaXMuYWRkcmVzcyx0aGlzLmFkZHJlc3MsbnVsbCwxKTtjb25zdCBlPXRoaXMubHVhLmx1YV90b2xzdHJpbmcodGhpcy5hZGRyZXNzLC0xLG51bGwpOyJzdGFjayB0cmFjZWJhY2s6IiE9PWUudHJpbSgpJiYoYS5tZXNzYWdlPWAke2EubWVzc2FnZX1cbiR7ZX1gKSx0aGlzLnBvcCgxKX1jYXRjaChlKXtjb25zb2xlLndhcm4oIkZhaWxlZCB0byBnZW5lcmF0ZSBzdGFjayB0cmFjZSIsZSl9dGhyb3cgYX19Z2V0VmFsdWVEZWNvcmF0aW9ucyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHM/ZTpuZXcgcyhlLHt9KX19Y2xhc3MgcCBleHRlbmRzIGZ7Y29uc3RydWN0b3IoZSx0KXtpZih0KXtjb25zdCB0PXttZW1vcnlVc2VkOjB9LHI9ZS5tb2R1bGUuYWRkRnVuY3Rpb24oKChyLGEsbixpKT0+e2lmKDA9PT1pKXJldHVybiBhJiYodC5tZW1vcnlVc2VkLT1uLGUubW9kdWxlLl9mcmVlKGEpKSwwO2NvbnN0IHU9YT9pLW46aSxvPXQubWVtb3J5VXNlZCt1O2lmKGk+biYmdC5tZW1vcnlNYXgmJm8+dC5tZW1vcnlNYXgpcmV0dXJuIDA7Y29uc3Qgcz1lLm1vZHVsZS5fcmVhbGxvYyhhLGkpO3JldHVybiBzJiYodC5tZW1vcnlVc2VkPW8pLHN9KSwiaWlpaWkiKSxhPWUubHVhX25ld3N0YXRlKHIsbnVsbCk7aWYoIWEpdGhyb3cgZS5tb2R1bGUucmVtb3ZlRnVuY3Rpb24ociksbmV3IEVycm9yKCJsdWFfbmV3c3RhdGUgcmV0dXJuZWQgYSBudWxsIHBvaW50ZXIiKTtzdXBlcihlLFtdLGEpLHRoaXMubWVtb3J5U3RhdHM9dCx0aGlzLmFsbG9jYXRvckZ1bmN0aW9uUG9pbnRlcj1yfWVsc2Ugc3VwZXIoZSxbXSxlLmx1YUxfbmV3c3RhdGUoKSk7aWYodGhpcy5pc0Nsb3NlZCgpKXRocm93IG5ldyBFcnJvcigiR2xvYmFsIHN0YXRlIGNvdWxkIG5vdCBiZSBjcmVhdGVkIChwcm9iYWJseSBkdWUgdG8gbGFjayBvZiBtZW1vcnkpIil9Y2xvc2UoKXtpZighdGhpcy5pc0Nsb3NlZCgpKXtzdXBlci5jbG9zZSgpLHRoaXMubHVhLmx1YV9jbG9zZSh0aGlzLmFkZHJlc3MpLHRoaXMuYWxsb2NhdG9yRnVuY3Rpb25Qb2ludGVyJiZ0aGlzLmx1YS5tb2R1bGUucmVtb3ZlRnVuY3Rpb24odGhpcy5hbGxvY2F0b3JGdW5jdGlvblBvaW50ZXIpO2Zvcihjb25zdCBlIG9mIHRoaXMudHlwZUV4dGVuc2lvbnMpZS5leHRlbnNpb24uY2xvc2UoKX19cmVnaXN0ZXJUeXBlRXh0ZW5zaW9uKGUsdCl7dGhpcy50eXBlRXh0ZW5zaW9ucy5wdXNoKHtleHRlbnNpb246dCxwcmlvcml0eTplfSksdGhpcy50eXBlRXh0ZW5zaW9ucy5zb3J0KCgoZSx0KT0+dC5wcmlvcml0eS1lLnByaW9yaXR5KSl9bG9hZExpYnJhcnkoZSl7c3dpdGNoKGUpe2Nhc2UgdC5MdWFMaWJyYXJpZXMuQmFzZTp0aGlzLmx1YS5sdWFvcGVuX2Jhc2UodGhpcy5hZGRyZXNzKTticmVhaztjYXNlIHQuTHVhTGlicmFyaWVzLkNvcm91dGluZTp0aGlzLmx1YS5sdWFvcGVuX2Nvcm91dGluZSh0aGlzLmFkZHJlc3MpO2JyZWFrO2Nhc2UgdC5MdWFMaWJyYXJpZXMuVGFibGU6dGhpcy5sdWEubHVhb3Blbl90YWJsZSh0aGlzLmFkZHJlc3MpO2JyZWFrO2Nhc2UgdC5MdWFMaWJyYXJpZXMuSU86dGhpcy5sdWEubHVhb3Blbl9pbyh0aGlzLmFkZHJlc3MpO2JyZWFrO2Nhc2UgdC5MdWFMaWJyYXJpZXMuT1M6dGhpcy5sdWEubHVhb3Blbl9vcyh0aGlzLmFkZHJlc3MpO2JyZWFrO2Nhc2UgdC5MdWFMaWJyYXJpZXMuU3RyaW5nOmNhc2UgdC5MdWFMaWJyYXJpZXMuVVRGODp0aGlzLmx1YS5sdWFvcGVuX3N0cmluZyh0aGlzLmFkZHJlc3MpO2JyZWFrO2Nhc2UgdC5MdWFMaWJyYXJpZXMuTWF0aDp0aGlzLmx1YS5sdWFvcGVuX21hdGgodGhpcy5hZGRyZXNzKTticmVhaztjYXNlIHQuTHVhTGlicmFyaWVzLkRlYnVnOnRoaXMubHVhLmx1YW9wZW5fZGVidWcodGhpcy5hZGRyZXNzKTticmVhaztjYXNlIHQuTHVhTGlicmFyaWVzLlBhY2thZ2U6dGhpcy5sdWEubHVhb3Blbl9wYWNrYWdlKHRoaXMuYWRkcmVzcyl9dGhpcy5sdWEubHVhX3NldGdsb2JhbCh0aGlzLmFkZHJlc3MsZSl9Z2V0KGUpe2NvbnN0IHQ9dGhpcy5sdWEubHVhX2dldGdsb2JhbCh0aGlzLmFkZHJlc3MsZSkscj10aGlzLmdldFZhbHVlKC0xLHQpO3JldHVybiB0aGlzLnBvcCgpLHJ9c2V0KGUsdCl7dGhpcy5wdXNoVmFsdWUodCksdGhpcy5sdWEubHVhX3NldGdsb2JhbCh0aGlzLmFkZHJlc3MsZSl9Z2V0VGFibGUoZSxyKXtjb25zdCBhPXRoaXMuZ2V0VG9wKCksbj10aGlzLmx1YS5sdWFfZ2V0Z2xvYmFsKHRoaXMuYWRkcmVzcyxlKTt0cnl7aWYobiE9PXQuTHVhVHlwZS5UYWJsZSl0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmV4cGVjdGVkIHR5cGUgaW4gJHtlfS4gRXhwZWN0ZWQgJHt0Lkx1YVR5cGVbdC5MdWFUeXBlLlRhYmxlXX0uIEdvdCAke3QuTHVhVHlwZVtuXX0uYCk7cihhKzEpfWZpbmFsbHl7dGhpcy5nZXRUb3AoKSE9PWErMSYmY29uc29sZS53YXJuKGBnZXRUYWJsZTogZXhwZWN0ZWQgc3RhY2sgc2l6ZSAke2F9IGdvdCAke3RoaXMuZ2V0VG9wKCl9YCksdGhpcy5zZXRUb3AoYSl9fWdldE1lbW9yeVVzZWQoKXtyZXR1cm4gdGhpcy5nZXRNZW1vcnlTdGF0c1JlZigpLm1lbW9yeVVzZWR9Z2V0TWVtb3J5TWF4KCl7cmV0dXJuIHRoaXMuZ2V0TWVtb3J5U3RhdHNSZWYoKS5tZW1vcnlNYXh9c2V0TWVtb3J5TWF4KGUpe3RoaXMuZ2V0TWVtb3J5U3RhdHNSZWYoKS5tZW1vcnlNYXg9ZX1nZXRNZW1vcnlTdGF0c1JlZigpe2lmKCF0aGlzLm1lbW9yeVN0YXRzKXRocm93IG5ldyBFcnJvcigiTWVtb3J5IGFsbG9jYXRpb25zIGlzIG5vdCBiZWluZyB0cmFjZWQsIHBsZWFzZSBidWlsZCBlbmdpbmUgd2l0aCB7IHRyYWNlQWxsb2NhdGlvbnM6IHRydWUgfSIpO3JldHVybiB0aGlzLm1lbW9yeVN0YXRzfX1jbGFzcyBte2NvbnN0cnVjdG9yKGUsdCl7dGhpcy50aHJlYWQ9ZSx0aGlzLm5hbWU9dH1pc1R5cGUoZSxyLGEsbil7cmV0dXJuIGE9PT10Lkx1YVR5cGUuVXNlcmRhdGEmJm49PT10aGlzLm5hbWV9Z2V0VmFsdWUoZSx0LHIpe2NvbnN0IGE9ZS5sdWEubHVhTF90ZXN0dWRhdGEoZS5hZGRyZXNzLHQsdGhpcy5uYW1lKTtpZighYSl0aHJvdyBuZXcgRXJyb3IoYGRhdGEgZG9lcyBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgbWV0YXRhYmxlOiAke3RoaXMubmFtZX1gKTtjb25zdCBuPWUubHVhLm1vZHVsZS5nZXRWYWx1ZShhLCIqIik7cmV0dXJuIGUubHVhLmdldFJlZihuKX1wdXNoVmFsdWUoZSxyLG4pe2NvbnN0e3RhcmdldDppfT1yLHU9ZS5sdWEucmVmKGkpLG89ZS5sdWEubHVhX25ld3VzZXJkYXRhdXYoZS5hZGRyZXNzLGEsMCk7aWYoZS5sdWEubW9kdWxlLnNldFZhbHVlKG8sdSwiKiIpLHQuTHVhVHlwZS5OaWw9PT1lLmx1YS5sdWFMX2dldG1ldGF0YWJsZShlLmFkZHJlc3MsdGhpcy5uYW1lKSl0aHJvdyBlLnBvcCgyKSxuZXcgRXJyb3IoYG1ldGF0YWJsZSBub3QgZm91bmQ6ICR7dGhpcy5uYW1lfWApO3JldHVybiBlLmx1YS5sdWFfc2V0bWV0YXRhYmxlKGUuYWRkcmVzcywtMiksITB9fWNsYXNzIF8gZXh0ZW5kcyBte2NvbnN0cnVjdG9yKGUscil7aWYoc3VwZXIoZSwianNfZXJyb3IiKSx0aGlzLmdjUG9pbnRlcj1lLmx1YS5tb2R1bGUuYWRkRnVuY3Rpb24oKHI9Pntjb25zdCBhPWUubHVhLmx1YUxfY2hlY2t1ZGF0YShyLDEsdGhpcy5uYW1lKSxuPWUubHVhLm1vZHVsZS5nZXRWYWx1ZShhLCIqIik7cmV0dXJuIGUubHVhLnVucmVmKG4pLHQuTHVhUmV0dXJuLk9rfSksImlpIiksZS5sdWEubHVhTF9uZXdtZXRhdGFibGUoZS5hZGRyZXNzLHRoaXMubmFtZSkpe2NvbnN0IHQ9ZS5sdWEubHVhX2dldHRvcChlLmFkZHJlc3MpO2UubHVhLmx1YV9wdXNoc3RyaW5nKGUuYWRkcmVzcywicHJvdGVjdGVkIG1ldGF0YWJsZSIpLGUubHVhLmx1YV9zZXRmaWVsZChlLmFkZHJlc3MsdCwiX19tZXRhdGFibGUiKSxlLmx1YS5sdWFfcHVzaGNjbG9zdXJlKGUuYWRkcmVzcyx0aGlzLmdjUG9pbnRlciwwKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fZ2MiKSxlLnB1c2hWYWx1ZSgoKGUsdCk9PiJtZXNzYWdlIj09PXQ/ZS5tZXNzYWdlOm51bGwpKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9faW5kZXgiKSxlLnB1c2hWYWx1ZSgoZT0+ZS5tZXNzYWdlKSksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX3Rvc3RyaW5nIil9ZS5sdWEubHVhX3BvcChlLmFkZHJlc3MsMSksciYmZS5zZXQoIkVycm9yIix7Y3JlYXRlOmU9PntpZihlJiYic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlIG11c3QgYmUgYSBzdHJpbmciKTtyZXR1cm4gbmV3IEVycm9yKGUpfX0pfXB1c2hWYWx1ZShlLHQpe3JldHVybiB0LnRhcmdldCBpbnN0YW5jZW9mIEVycm9yJiZzdXBlci5wdXNoVmFsdWUoZSx0KX1jbG9zZSgpe3RoaXMudGhyZWFkLmx1YS5tb2R1bGUucmVtb3ZlRnVuY3Rpb24odGhpcy5nY1BvaW50ZXIpfX1mdW5jdGlvbiBnKGUsdCl7cmV0dXJuIG5ldyBfKGUsdCl9Y2xhc3MgYntjb25zdHJ1Y3RvcihlKXt0aGlzLmNvdW50PWV9fWZ1bmN0aW9uIHcoZSx0KXtyZXR1cm4gbmV3IHMoZSx0KX1jbGFzcyB5IGV4dGVuZHMgbXtjb25zdHJ1Y3RvcihlLHIpe3N1cGVyKGUsImpzX2Z1bmN0aW9uIiksdGhpcy5mdW5jdGlvblJlZ2lzdHJ5PSJ1bmRlZmluZWQiIT10eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnk/bmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KChlPT57dGhpcy50aHJlYWQuaXNDbG9zZWQoKXx8dGhpcy50aHJlYWQubHVhLmx1YUxfdW5yZWYodGhpcy50aHJlYWQuYWRkcmVzcyx1LGUpfSkpOnZvaWQgMCx0aGlzLm9wdGlvbnM9cix0aGlzLmNhbGxiYWNrQ29udGV4dD1lLm5ld1RocmVhZCgpLHRoaXMuY2FsbGJhY2tDb250ZXh0SW5kZXg9dGhpcy50aHJlYWQubHVhLmx1YUxfcmVmKGUuYWRkcmVzcyx1KSx0aGlzLmZ1bmN0aW9uUmVnaXN0cnl8fGNvbnNvbGUud2FybigiRnVuY3Rpb25UeXBlRXh0ZW5zaW9uOiBGaW5hbGl6YXRpb25SZWdpc3RyeSBub3QgZm91bmQuIE1lbW9yeSBsZWFrcyBsaWtlbHkuIiksdGhpcy5nY1BvaW50ZXI9ZS5sdWEubW9kdWxlLmFkZEZ1bmN0aW9uKChyPT57ZS5sdWEubHVhTF9jaGVja3VkYXRhKHIsMSx0aGlzLm5hbWUpO2NvbnN0IGE9ZS5sdWEubHVhTF9jaGVja3VkYXRhKHIsMSx0aGlzLm5hbWUpLG49ZS5sdWEubW9kdWxlLmdldFZhbHVlKGEsIioiKTtyZXR1cm4gZS5sdWEudW5yZWYobiksdC5MdWFSZXR1cm4uT2t9KSwiaWkiKSxlLmx1YS5sdWFMX25ld21ldGF0YWJsZShlLmFkZHJlc3MsdGhpcy5uYW1lKSYmKGUubHVhLmx1YV9wdXNoc3RyaW5nKGUuYWRkcmVzcywiX19nYyIpLGUubHVhLmx1YV9wdXNoY2Nsb3N1cmUoZS5hZGRyZXNzLHRoaXMuZ2NQb2ludGVyLDApLGUubHVhLmx1YV9zZXR0YWJsZShlLmFkZHJlc3MsLTMpLGUubHVhLmx1YV9wdXNoc3RyaW5nKGUuYWRkcmVzcywiX19tZXRhdGFibGUiKSxlLmx1YS5sdWFfcHVzaHN0cmluZyhlLmFkZHJlc3MsInByb3RlY3RlZCBtZXRhdGFibGUiKSxlLmx1YS5sdWFfc2V0dGFibGUoZS5hZGRyZXNzLC0zKSksZS5sdWEubHVhX3BvcChlLmFkZHJlc3MsMSksdGhpcy5mdW5jdGlvbldyYXBwZXI9ZS5sdWEubW9kdWxlLmFkZEZ1bmN0aW9uKCh0PT57Y29uc3Qgcj1lLnN0YXRlVG9UaHJlYWQodCksYT1lLmx1YS5sdWFMX2NoZWNrdWRhdGEodCxlLmx1YS5sdWFfdXB2YWx1ZWluZGV4KDEpLHRoaXMubmFtZSksbj1lLmx1YS5tb2R1bGUuZ2V0VmFsdWUoYSwiKiIpLHt0YXJnZXQ6aSxvcHRpb25zOnV9PWUubHVhLmdldFJlZihuKSxvPXIuZ2V0VG9wKCkscz1bXTtpZih1LnJlY2VpdmVUaHJlYWQmJnMucHVzaChyKSx1LnJlY2VpdmVBcmdzUXVhbnRpdHkpcy5wdXNoKG8pO2Vsc2UgZm9yKGxldCBlPTE7ZTw9bztlKyspe2NvbnN0IHQ9ci5nZXRWYWx1ZShlKTsxPT09ZSYmKG51bGw9PXU/dm9pZCAwOnUuc2VsZikmJnQ9PT11LnNlbGZ8fHMucHVzaCh0KX10cnl7Y29uc3QgZT1pLmFwcGx5KG51bGw9PXU/dm9pZCAwOnUuc2VsZixzKTtpZih2b2lkIDA9PT1lKXJldHVybiAwO2lmKGUgaW5zdGFuY2VvZiBiKXJldHVybiBlLmNvdW50O2lmKGUgaW5zdGFuY2VvZiBjKXtmb3IoY29uc3QgdCBvZiBlKXIucHVzaFZhbHVlKHQpO3JldHVybiBlLmxlbmd0aH1yZXR1cm4gci5wdXNoVmFsdWUoZSksMX1jYXRjaChlKXtpZihlPT09MS8wKXRocm93IGU7cmV0dXJuIHIucHVzaFZhbHVlKGUpLHIubHVhLmx1YV9lcnJvcihyLmFkZHJlc3MpfX0pLCJpaSIpfWNsb3NlKCl7dGhpcy50aHJlYWQubHVhLm1vZHVsZS5yZW1vdmVGdW5jdGlvbih0aGlzLmdjUG9pbnRlciksdGhpcy50aHJlYWQubHVhLm1vZHVsZS5yZW1vdmVGdW5jdGlvbih0aGlzLmZ1bmN0aW9uV3JhcHBlciksdGhpcy5jYWxsYmFja0NvbnRleHQuY2xvc2UoKSx0aGlzLmNhbGxiYWNrQ29udGV4dC5sdWEubHVhTF91bnJlZih0aGlzLmNhbGxiYWNrQ29udGV4dC5hZGRyZXNzLHUsdGhpcy5jYWxsYmFja0NvbnRleHRJbmRleCl9aXNUeXBlKGUscixhKXtyZXR1cm4gYT09PXQuTHVhVHlwZS5GdW5jdGlvbn1wdXNoVmFsdWUoZSxyKXtpZigiZnVuY3Rpb24iIT10eXBlb2Ygci50YXJnZXQpcmV0dXJuITE7Y29uc3Qgbj1lLmx1YS5yZWYociksaT1lLmx1YS5sdWFfbmV3dXNlcmRhdGF1dihlLmFkZHJlc3MsYSwwKTtpZihlLmx1YS5tb2R1bGUuc2V0VmFsdWUoaSxuLCIqIiksdC5MdWFUeXBlLk5pbD09PWUubHVhLmx1YUxfZ2V0bWV0YXRhYmxlKGUuYWRkcmVzcyx0aGlzLm5hbWUpKXRocm93IGUucG9wKDEpLGUubHVhLnVucmVmKG4pLG5ldyBFcnJvcihgbWV0YXRhYmxlIG5vdCBmb3VuZDogJHt0aGlzLm5hbWV9YCk7cmV0dXJuIGUubHVhLmx1YV9zZXRtZXRhdGFibGUoZS5hZGRyZXNzLC0yKSxlLmx1YS5sdWFfcHVzaGNjbG9zdXJlKGUuYWRkcmVzcyx0aGlzLmZ1bmN0aW9uV3JhcHBlciwxKSwhMH1nZXRWYWx1ZShlLHIpe3ZhciBhO2UubHVhLmx1YV9wdXNodmFsdWUoZS5hZGRyZXNzLHIpO2NvbnN0IG49ZS5sdWEubHVhTF9yZWYoZS5hZGRyZXNzLHUpLGk9KC4uLmUpPT57dmFyIHI7aWYodGhpcy5jYWxsYmFja0NvbnRleHQuaXNDbG9zZWQoKSlyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oIlRyaWVkIHRvIGNhbGwgYSBmdW5jdGlvbiBhZnRlciBjbG9zaW5nIGx1YSBzdGF0ZSIpO2NvbnN0IGE9dGhpcy5jYWxsYmFja0NvbnRleHQubmV3VGhyZWFkKCk7dHJ5e2NvbnN0IGk9YS5sdWEubHVhX3Jhd2dldGkoYS5hZGRyZXNzLHUsQmlnSW50KG4pKTtpZihpIT09dC5MdWFUeXBlLkZ1bmN0aW9uKXtjb25zdCBlPWEubHVhLmx1YUxfZ2V0bWV0YWZpZWxkKGEuYWRkcmVzcywtMSwiX19jYWxsIik7aWYoYS5wb3AoKSxlIT09dC5MdWFUeXBlLkZ1bmN0aW9uKXRocm93IG5ldyBFcnJvcihgQSB2YWx1ZSBvZiB0eXBlICcke2l9JyB3YXMgcHVzaGVkIGJ1dCBpdCBpcyBub3QgY2FsbGFibGVgKX1mb3IoY29uc3QgdCBvZiBlKWEucHVzaFZhbHVlKHQpOyhudWxsPT09KHI9dGhpcy5vcHRpb25zKXx8dm9pZCAwPT09cj92b2lkIDA6ci5mdW5jdGlvblRpbWVvdXQpJiZhLnNldFRpbWVvdXQoRGF0ZS5ub3coKSt0aGlzLm9wdGlvbnMuZnVuY3Rpb25UaW1lb3V0KTtjb25zdCBvPWEubHVhLmx1YV9wY2FsbGsoYS5hZGRyZXNzLGUubGVuZ3RoLDEsMCwwLG51bGwpO2lmKG89PT10Lkx1YVJldHVybi5ZaWVsZCl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCB5aWVsZCBpbiBjYWxsYmFja3MgZnJvbSBqYXZhc2NyaXB0Iik7cmV0dXJuIGEuYXNzZXJ0T2sobyksYS5nZXRUb3AoKT4wP2EuZ2V0VmFsdWUoLTEpOnZvaWQgMH1maW5hbGx5e2EuY2xvc2UoKSx0aGlzLmNhbGxiYWNrQ29udGV4dC5wb3AoKX19O3JldHVybiBudWxsPT09KGE9dGhpcy5mdW5jdGlvblJlZ2lzdHJ5KXx8dm9pZCAwPT09YXx8YS5yZWdpc3RlcihpLG4pLGl9fWZ1bmN0aW9uIHYoZSx0KXtyZXR1cm4gbmV3IHkoZSx0KX1jbGFzcyBFIGV4dGVuZHMgbXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcihlLCJqc19udWxsIiksdGhpcy5nY1BvaW50ZXI9ZS5sdWEubW9kdWxlLmFkZEZ1bmN0aW9uKChyPT57Y29uc3QgYT1lLmx1YS5sdWFMX2NoZWNrdWRhdGEociwxLHRoaXMubmFtZSksbj1lLmx1YS5tb2R1bGUuZ2V0VmFsdWUoYSwiKiIpO3JldHVybiBlLmx1YS51bnJlZihuKSx0Lkx1YVJldHVybi5Pa30pLCJpaSIpLGUubHVhLmx1YUxfbmV3bWV0YXRhYmxlKGUuYWRkcmVzcyx0aGlzLm5hbWUpKXtjb25zdCB0PWUubHVhLmx1YV9nZXR0b3AoZS5hZGRyZXNzKTtlLmx1YS5sdWFfcHVzaHN0cmluZyhlLmFkZHJlc3MsInByb3RlY3RlZCBtZXRhdGFibGUiKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fbWV0YXRhYmxlIiksZS5sdWEubHVhX3B1c2hjY2xvc3VyZShlLmFkZHJlc3MsdGhpcy5nY1BvaW50ZXIsMCksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2djIiksZS5wdXNoVmFsdWUoKCgpPT5udWxsKSksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2luZGV4IiksZS5wdXNoVmFsdWUoKCgpPT4ibnVsbCIpKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fdG9zdHJpbmciKSxlLnB1c2hWYWx1ZSgoKGUsdCk9PmU9PT10KSksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2VxIil9ZS5sdWEubHVhX3BvcChlLmFkZHJlc3MsMSksc3VwZXIucHVzaFZhbHVlKGUsbmV3IHMoe30se30pKSxlLmx1YS5sdWFfc2V0Z2xvYmFsKGUuYWRkcmVzcywibnVsbCIpfWdldFZhbHVlKGUsdCl7aWYoIWUubHVhLmx1YUxfdGVzdHVkYXRhKGUuYWRkcmVzcyx0LHRoaXMubmFtZSkpdGhyb3cgbmV3IEVycm9yKGBkYXRhIGRvZXMgbm90IGhhdmUgdGhlIGV4cGVjdGVkIG1ldGF0YWJsZTogJHt0aGlzLm5hbWV9YCk7cmV0dXJuIG51bGx9cHVzaFZhbHVlKGUsdCl7cmV0dXJuIG51bGw9PT0obnVsbD09dD92b2lkIDA6dC50YXJnZXQpJiYoZS5sdWEubHVhX2dldGdsb2JhbChlLmFkZHJlc3MsIm51bGwiKSwhMCl9Y2xvc2UoKXt0aGlzLnRocmVhZC5sdWEubW9kdWxlLnJlbW92ZUZ1bmN0aW9uKHRoaXMuZ2NQb2ludGVyKX19ZnVuY3Rpb24gTChlKXtyZXR1cm4gbmV3IEUoZSl9Y2xhc3MgVCBleHRlbmRzIG17Y29uc3RydWN0b3IoZSxyKXtpZihzdXBlcihlLCJqc19wcm9taXNlIiksdGhpcy5nY1BvaW50ZXI9ZS5sdWEubW9kdWxlLmFkZEZ1bmN0aW9uKChyPT57Y29uc3QgYT1lLmx1YS5sdWFMX2NoZWNrdWRhdGEociwxLHRoaXMubmFtZSksbj1lLmx1YS5tb2R1bGUuZ2V0VmFsdWUoYSwiKiIpO3JldHVybiBlLmx1YS51bnJlZihuKSx0Lkx1YVJldHVybi5Pa30pLCJpaSIpLGUubHVhLmx1YUxfbmV3bWV0YXRhYmxlKGUuYWRkcmVzcyx0aGlzLm5hbWUpKXtjb25zdCB0PWUubHVhLmx1YV9nZXR0b3AoZS5hZGRyZXNzKTtlLmx1YS5sdWFfcHVzaHN0cmluZyhlLmFkZHJlc3MsInByb3RlY3RlZCBtZXRhdGFibGUiKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fbWV0YXRhYmxlIiksZS5sdWEubHVhX3B1c2hjY2xvc3VyZShlLmFkZHJlc3MsdGhpcy5nY1BvaW50ZXIsMCksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2djIik7Y29uc3Qgcj1lPT57aWYoUHJvbWlzZS5yZXNvbHZlKGUpIT09ZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGUudGhlbil0aHJvdyBuZXcgRXJyb3IoInByb21pc2UgbWV0aG9kIGNhbGxlZCB3aXRob3V0IHNlbGYgaW5zdGFuY2UiKTtyZXR1cm4hMH07ZS5wdXNoVmFsdWUoe25leHQ6KGUsLi4udCk9PnIoZSkmJmUudGhlbiguLi50KSxjYXRjaDooZSwuLi50KT0+cihlKSYmZS5jYXRjaCguLi50KSxmaW5hbGx5OihlLC4uLnQpPT5yKGUpJiZlLmZpbmFsbHkoLi4udCksYXdhaXQ6dygoKHQsYSk9PntpZihyKGEpLHQuYWRkcmVzcz09PWUuYWRkcmVzcyl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBhd2FpdCBpbiB0aGUgbWFpbiB0aHJlYWQiKTtsZXQgbjtjb25zdCBpPWEudGhlbigoZT0+e249e3N0YXR1czoiZnVsZmlsbGVkIix2YWx1ZTplfX0pKS5jYXRjaCgoZT0+e249e3N0YXR1czoicmVqZWN0ZWQiLHZhbHVlOmV9fSkpLHU9dGhpcy50aHJlYWQubHVhLm1vZHVsZS5hZGRGdW5jdGlvbigocj0+e2lmKCFuKXJldHVybiBlLmx1YS5sdWFfeWllbGRrKHQuYWRkcmVzcywwLDAsdSk7dGhpcy50aHJlYWQubHVhLm1vZHVsZS5yZW1vdmVGdW5jdGlvbih1KTtjb25zdCBhPWUuc3RhdGVUb1RocmVhZChyKTtpZigicmVqZWN0ZWQiPT09bi5zdGF0dXMpcmV0dXJuIGEucHVzaFZhbHVlKG4udmFsdWV8fG5ldyBFcnJvcigicHJvbWlzZSByZWplY3RlZCB3aXRoIG5vIGVycm9yIikpLHRoaXMudGhyZWFkLmx1YS5sdWFfZXJyb3Iocik7aWYobi52YWx1ZSBpbnN0YW5jZW9mIGIpcmV0dXJuIG4udmFsdWUuY291bnQ7aWYobi52YWx1ZSBpbnN0YW5jZW9mIGMpe2Zvcihjb25zdCBlIG9mIG4udmFsdWUpYS5wdXNoVmFsdWUoZSk7cmV0dXJuIG4udmFsdWUubGVuZ3RofXJldHVybiBhLnB1c2hWYWx1ZShuLnZhbHVlKSwxfSksImlpaWkiKTtyZXR1cm4gdC5wdXNoVmFsdWUoaSksbmV3IGIoZS5sdWEubHVhX3lpZWxkayh0LmFkZHJlc3MsMSwwLHUpKX0pLHtyZWNlaXZlVGhyZWFkOiEwfSl9KSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9faW5kZXgiKSxlLnB1c2hWYWx1ZSgoKGUsdCk9PmU9PT10KSksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2VxIil9ZS5sdWEubHVhX3BvcChlLmFkZHJlc3MsMSksciYmZS5zZXQoIlByb21pc2UiLHtjcmVhdGU6ZT0+bmV3IFByb21pc2UoZSksYWxsOmU9PntpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgRXJyb3IoImFyZ3VtZW50IG11c3QgYmUgYW4gYXJyYXkgb2YgcHJvbWlzZXMiKTtyZXR1cm4gUHJvbWlzZS5hbGwoZS5tYXAoKGU9PlByb21pc2UucmVzb2x2ZShlKSkpKX0scmVzb2x2ZTplPT5Qcm9taXNlLnJlc29sdmUoZSl9KX1jbG9zZSgpe3RoaXMudGhyZWFkLmx1YS5tb2R1bGUucmVtb3ZlRnVuY3Rpb24odGhpcy5nY1BvaW50ZXIpfXB1c2hWYWx1ZShlLHQpe3JldHVybihQcm9taXNlLnJlc29sdmUodC50YXJnZXQpPT09dC50YXJnZXR8fCJmdW5jdGlvbiI9PXR5cGVvZiB0LnRhcmdldC50aGVuKSYmc3VwZXIucHVzaFZhbHVlKGUsdCl9fWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm4gbmV3IFQoZSx0KX1mdW5jdGlvbiBBKGUsdCl7cmV0dXJuIG5ldyBzKGUsdHx8e30pfWNsYXNzIFIgZXh0ZW5kcyBte2NvbnN0cnVjdG9yKGUpe2lmKHN1cGVyKGUsImpzX3Byb3h5IiksdGhpcy5nY1BvaW50ZXI9ZS5sdWEubW9kdWxlLmFkZEZ1bmN0aW9uKChyPT57Y29uc3QgYT1lLmx1YS5sdWFMX2NoZWNrdWRhdGEociwxLHRoaXMubmFtZSksbj1lLmx1YS5tb2R1bGUuZ2V0VmFsdWUoYSwiKiIpO3JldHVybiBlLmx1YS51bnJlZihuKSx0Lkx1YVJldHVybi5Pa30pLCJpaSIpLGUubHVhLmx1YUxfbmV3bWV0YXRhYmxlKGUuYWRkcmVzcyx0aGlzLm5hbWUpKXtjb25zdCB0PWUubHVhLmx1YV9nZXR0b3AoZS5hZGRyZXNzKTtlLmx1YS5sdWFfcHVzaHN0cmluZyhlLmFkZHJlc3MsInByb3RlY3RlZCBtZXRhdGFibGUiKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fbWV0YXRhYmxlIiksZS5sdWEubHVhX3B1c2hjY2xvc3VyZShlLmFkZHJlc3MsdGhpcy5nY1BvaW50ZXIsMCksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2djIiksZS5wdXNoVmFsdWUoKChlLHQpPT57c3dpdGNoKHR5cGVvZiB0KXtjYXNlIm51bWJlciI6dC09MTtjYXNlInN0cmluZyI6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIk9ubHkgc3RyaW5ncyBvciBudW1iZXJzIGNhbiBpbmRleCBqcyBvYmplY3RzIil9Y29uc3Qgcj1lW3RdO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiByP3cocix7c2VsZjplfSk6cn0pKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9faW5kZXgiKSxlLnB1c2hWYWx1ZSgoKGUsdCxyKT0+e3N3aXRjaCh0eXBlb2YgdCl7Y2FzZSJudW1iZXIiOnQtPTE7Y2FzZSJzdHJpbmciOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJPbmx5IHN0cmluZ3Mgb3IgbnVtYmVycyBjYW4gaW5kZXgganMgb2JqZWN0cyIpfWVbdF09cn0pKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fbmV3aW5kZXgiKSxlLnB1c2hWYWx1ZSgoZT0+e3ZhciB0LHI7cmV0dXJuIG51bGwhPT0ocj1udWxsPT09KHQ9ZS50b1N0cmluZyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2FsbChlKSkmJnZvaWQgMCE9PXI/cjp0eXBlb2YgZX0pKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fdG9zdHJpbmciKSxlLnB1c2hWYWx1ZSgoZT0+ZS5sZW5ndGh8fDApKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fbGVuIiksZS5wdXNoVmFsdWUoKGU9Pntjb25zdCB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpO2xldCByPTA7cmV0dXJuIGMub2YoKCgpPT57Y29uc3QgYT1jLm9mKHRbcl0sZVt0W3JdXSk7cmV0dXJuIHIrKyxhfSksZSxudWxsKX0pKSxlLmx1YS5sdWFfc2V0ZmllbGQoZS5hZGRyZXNzLHQsIl9fcGFpcnMiKSxlLnB1c2hWYWx1ZSgoKGUsdCk9PmU9PT10KSksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX2VxIiksZS5wdXNoVmFsdWUoKChlLC4uLnQpPT4odFswXT09PWUmJnQuc2hpZnQoKSxlKC4uLnQpKSkpLGUubHVhLmx1YV9zZXRmaWVsZChlLmFkZHJlc3MsdCwiX19jYWxsIil9ZS5sdWEubHVhX3BvcChlLmFkZHJlc3MsMSl9aXNUeXBlKGUscixhLG4pe3JldHVybiBhPT09dC5MdWFUeXBlLlVzZXJkYXRhJiZuPT09dGhpcy5uYW1lfWdldFZhbHVlKGUsdCl7Y29uc3Qgcj1lLmx1YS5sdWFfdG91c2VyZGF0YShlLmFkZHJlc3MsdCksYT1lLmx1YS5tb2R1bGUuZ2V0VmFsdWUociwiKiIpO3JldHVybiBlLmx1YS5nZXRSZWYoYSl9cHVzaFZhbHVlKGUsdCl7dmFyIHI7Y29uc3R7dGFyZ2V0OmEsb3B0aW9uczpufT10O2lmKHZvaWQgMD09PW4ucHJveHkpe2lmKG51bGw9PWEpcmV0dXJuITE7aWYoIm9iamVjdCIhPXR5cGVvZiBhJiYoImZ1bmN0aW9uIiE9dHlwZW9mIGF8fChudWxsPT09KHI9YS5wcm90b3R5cGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNvbnN0cnVjdG9yKSE9PWF8fCFhLnRvU3RyaW5nKCkuc3RhcnRzV2l0aCgiY2xhc3MgIikpKXJldHVybiExO2lmKFByb21pc2UucmVzb2x2ZShhKT09PWF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhLnRoZW4pcmV0dXJuITF9ZWxzZSBpZighMT09PW4ucHJveHkpcmV0dXJuITE7cmV0dXJuIW4ubWV0YXRhYmxlfHxuLm1ldGF0YWJsZSBpbnN0YW5jZW9mIHM/c3VwZXIucHVzaFZhbHVlKGUsdCk6KHQub3B0aW9ucy5tZXRhdGFibGU9QShuLm1ldGF0YWJsZSx7cHJveHk6ITF9KSwhMSl9Y2xvc2UoKXt0aGlzLnRocmVhZC5sdWEubW9kdWxlLnJlbW92ZUZ1bmN0aW9uKHRoaXMuZ2NQb2ludGVyKX19ZnVuY3Rpb24gTShlKXtyZXR1cm4gbmV3IFIoZSl9Y2xhc3MgTyBleHRlbmRzIG17Y29uc3RydWN0b3IoZSl7c3VwZXIoZSwianNfdGFibGUiKX1jbG9zZSgpe31pc1R5cGUoZSxyLGEpe3JldHVybiBhPT09dC5MdWFUeXBlLlRhYmxlfWdldFZhbHVlKGUsdCxyKXtjb25zdCBhPXJ8fG5ldyBNYXAsbj1lLmx1YS5sdWFfdG9wb2ludGVyKGUuYWRkcmVzcyx0KTtsZXQgaT1hLmdldChuKTtpZighaSl7Y29uc3Qgcj10aGlzLnJlYWRUYWJsZUtleXMoZSx0KSx1PXIubGVuZ3RoPjAmJnIuZXZlcnkoKChlLHQpPT5lPT09U3RyaW5nKHQrMSkpKTtpPXU/W106e30sYS5zZXQobixpKSx0aGlzLnJlYWRUYWJsZVZhbHVlcyhlLHQsYSxpKX1yZXR1cm4gaX1wdXNoVmFsdWUoZSx7dGFyZ2V0OnR9LHIpe2lmKCJvYmplY3QiIT10eXBlb2YgdHx8bnVsbD09PXQpcmV0dXJuITE7Y29uc3QgYT1yfHxuZXcgTWFwLG49YS5nZXQodCk7aWYodm9pZCAwIT09bilyZXR1cm4gZS5sdWEubHVhX3Jhd2dldGkoZS5hZGRyZXNzLHUsQmlnSW50KG4pKSwhMDt0cnl7Y29uc3Qgcj1lLmdldFRvcCgpKzEsbj0ocixuKT0+e2UubHVhLmx1YV9jcmVhdGV0YWJsZShlLmFkZHJlc3MscixuKTtjb25zdCBpPWUubHVhLmx1YUxfcmVmKGUuYWRkcmVzcyx1KTthLnNldCh0LGkpLGUubHVhLmx1YV9yYXdnZXRpKGUuYWRkcmVzcyx1LEJpZ0ludChpKSl9O2lmKEFycmF5LmlzQXJyYXkodCkpe24odC5sZW5ndGgsMCk7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspZS5wdXNoVmFsdWUobisxLGEpLGUucHVzaFZhbHVlKHRbbl0sYSksZS5sdWEubHVhX3NldHRhYmxlKGUuYWRkcmVzcyxyKX1lbHNle24oMCxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KS5sZW5ndGgpO2Zvcihjb25zdCBuIGluIHQpZS5wdXNoVmFsdWUobixhKSxlLnB1c2hWYWx1ZSh0W25dLGEpLGUubHVhLmx1YV9zZXR0YWJsZShlLmFkZHJlc3Mscil9fWZpbmFsbHl7aWYodm9pZCAwPT09cilmb3IoY29uc3QgdCBvZiBhLnZhbHVlcygpKWUubHVhLmx1YUxfdW5yZWYoZS5hZGRyZXNzLHUsdCl9cmV0dXJuITB9cmVhZFRhYmxlS2V5cyhlLHQpe2NvbnN0IHI9W107Zm9yKGUubHVhLmx1YV9wdXNobmlsKGUuYWRkcmVzcyk7ZS5sdWEubHVhX25leHQoZS5hZGRyZXNzLHQpOyl7Y29uc3QgdD1lLmluZGV4VG9TdHJpbmcoLTIpO3IucHVzaCh0KSxlLnBvcCgpfXJldHVybiByfXJlYWRUYWJsZVZhbHVlcyhlLHQscixhKXtjb25zdCBuPUFycmF5LmlzQXJyYXkoYSk7Zm9yKGUubHVhLmx1YV9wdXNobmlsKGUuYWRkcmVzcyk7ZS5sdWEubHVhX25leHQoZS5hZGRyZXNzLHQpOyl7Y29uc3QgdD1lLmluZGV4VG9TdHJpbmcoLTIpLGk9ZS5nZXRWYWx1ZSgtMSx2b2lkIDAscik7bj9hLnB1c2goaSk6YVt0XT1pLGUucG9wKCl9fX1mdW5jdGlvbiBGKGUpe3JldHVybiBuZXcgTyhlKX1mdW5jdGlvbiB4KGUpe3JldHVybiBuZXcgcyhlLHtyZWZlcmVuY2U6ITB9KX1jbGFzcyBQIGV4dGVuZHMgbXtjb25zdHJ1Y3RvcihlKXtpZihzdXBlcihlLCJqc191c2VyZGF0YSIpLHRoaXMuZ2NQb2ludGVyPWUubHVhLm1vZHVsZS5hZGRGdW5jdGlvbigocj0+e2NvbnN0IGE9ZS5sdWEubHVhTF9jaGVja3VkYXRhKHIsMSx0aGlzLm5hbWUpLG49ZS5sdWEubW9kdWxlLmdldFZhbHVlKGEsIioiKTtyZXR1cm4gZS5sdWEudW5yZWYobiksdC5MdWFSZXR1cm4uT2t9KSwiaWkiKSxlLmx1YS5sdWFMX25ld21ldGF0YWJsZShlLmFkZHJlc3MsdGhpcy5uYW1lKSl7Y29uc3QgdD1lLmx1YS5sdWFfZ2V0dG9wKGUuYWRkcmVzcyk7ZS5sdWEubHVhX3B1c2hzdHJpbmcoZS5hZGRyZXNzLCJwcm90ZWN0ZWQgbWV0YXRhYmxlIiksZS5sdWEubHVhX3NldGZpZWxkKGUuYWRkcmVzcyx0LCJfX21ldGF0YWJsZSIpLGUubHVhLmx1YV9wdXNoY2Nsb3N1cmUoZS5hZGRyZXNzLHRoaXMuZ2NQb2ludGVyLDApLGUubHVhLmx1YV9zZXRmaWVsZChlLmFkZHJlc3MsdCwiX19nYyIpfWUubHVhLmx1YV9wb3AoZS5hZGRyZXNzLDEpfWlzVHlwZShlLHIsYSxuKXtyZXR1cm4gYT09PXQuTHVhVHlwZS5Vc2VyZGF0YSYmbj09PXRoaXMubmFtZX1nZXRWYWx1ZShlLHQpe2NvbnN0IHI9ZS5sdWEubHVhX3RvdXNlcmRhdGEoZS5hZGRyZXNzLHQpLGE9ZS5sdWEubW9kdWxlLmdldFZhbHVlKHIsIioiKTtyZXR1cm4gZS5sdWEuZ2V0UmVmKGEpfXB1c2hWYWx1ZShlLHQpe3JldHVybiEhdC5vcHRpb25zLnJlZmVyZW5jZSYmc3VwZXIucHVzaFZhbHVlKGUsdCl9Y2xvc2UoKXt0aGlzLnRocmVhZC5sdWEubW9kdWxlLnJlbW92ZUZ1bmN0aW9uKHRoaXMuZ2NQb2ludGVyKX19ZnVuY3Rpb24gSShlKXtyZXR1cm4gbmV3IFAoZSl9Y2xhc3MgTntjb25zdHJ1Y3RvcihlLHtvcGVuU3RhbmRhcmRMaWJzOnQ9ITAsaW5qZWN0T2JqZWN0czpyPSExLGVuYWJsZVByb3h5OmE9ITAsdHJhY2VBbGxvY2F0aW9uczpuPSExLGZ1bmN0aW9uVGltZW91dDppfT17fSl7dGhpcy5jbW9kdWxlPWUsdGhpcy5nbG9iYWw9bmV3IHAodGhpcy5jbW9kdWxlLG4pLHRoaXMuZ2xvYmFsLnJlZ2lzdGVyVHlwZUV4dGVuc2lvbigwLEYodGhpcy5nbG9iYWwpKSx0aGlzLmdsb2JhbC5yZWdpc3RlclR5cGVFeHRlbnNpb24oMCx2KHRoaXMuZ2xvYmFsLHtmdW5jdGlvblRpbWVvdXQ6aX0pKSx0aGlzLmdsb2JhbC5yZWdpc3RlclR5cGVFeHRlbnNpb24oMSxTKHRoaXMuZ2xvYmFsLHIpKSxyJiZ0aGlzLmdsb2JhbC5yZWdpc3RlclR5cGVFeHRlbnNpb24oNSxMKHRoaXMuZ2xvYmFsKSksYT90aGlzLmdsb2JhbC5yZWdpc3RlclR5cGVFeHRlbnNpb24oMyxNKHRoaXMuZ2xvYmFsKSk6dGhpcy5nbG9iYWwucmVnaXN0ZXJUeXBlRXh0ZW5zaW9uKDEsZyh0aGlzLmdsb2JhbCxyKSksdGhpcy5nbG9iYWwucmVnaXN0ZXJUeXBlRXh0ZW5zaW9uKDQsSSh0aGlzLmdsb2JhbCkpLHQmJnRoaXMuY21vZHVsZS5sdWFMX29wZW5saWJzKHRoaXMuZ2xvYmFsLmFkZHJlc3MpfWRvU3RyaW5nKGUpe3JldHVybiB0aGlzLmNhbGxCeXRlQ29kZSgodD0+dC5sb2FkU3RyaW5nKGUpKSl9ZG9GaWxlKGUpe3JldHVybiB0aGlzLmNhbGxCeXRlQ29kZSgodD0+dC5sb2FkRmlsZShlKSkpfWRvU3RyaW5nU3luYyhlKXtyZXR1cm4gdGhpcy5nbG9iYWwubG9hZFN0cmluZyhlKSx0aGlzLmdsb2JhbC5ydW5TeW5jKClbMF19ZG9GaWxlU3luYyhlKXtyZXR1cm4gdGhpcy5nbG9iYWwubG9hZEZpbGUoZSksdGhpcy5nbG9iYWwucnVuU3luYygpWzBdfWFzeW5jIGNhbGxCeXRlQ29kZShlKXtjb25zdCB0PXRoaXMuZ2xvYmFsLm5ld1RocmVhZCgpLHI9dGhpcy5nbG9iYWwuZ2V0VG9wKCk7dHJ5e2UodCk7Y29uc3Qgcj1hd2FpdCB0LnJ1bigwKTtyZXR1cm4gci5sZW5ndGg+MD8odGhpcy5jbW9kdWxlLmx1YV94bW92ZSh0LmFkZHJlc3MsdGhpcy5nbG9iYWwuYWRkcmVzcyxyLmxlbmd0aCksdGhpcy5nbG9iYWwuZ2V0VmFsdWUodGhpcy5nbG9iYWwuZ2V0VG9wKCktci5sZW5ndGgrMSkpOnZvaWQgMH1maW5hbGx5e3RoaXMuZ2xvYmFsLnJlbW92ZShyKX19fXZhciBDLFU9KEM9InVuZGVmaW5lZCI9PXR5cGVvZiBkb2N1bWVudCYmInVuZGVmaW5lZCI9PXR5cGVvZiBsb2NhdGlvbj9MZSgidXJsIikucGF0aFRvRmlsZVVSTChlKS5ocmVmOiJ1bmRlZmluZWQiPT10eXBlb2YgZG9jdW1lbnQ/bG9jYXRpb24uaHJlZjpyJiZyLnNyY3x8bmV3IFVSTCgiaW5kZXguanMiLGRvY3VtZW50LmJhc2VVUkkpLmhyZWYsYXN5bmMgZnVuY3Rpb24odD17fSl7dmFyIGEsbixpPXQ7aS5yZWFkeT1uZXcgUHJvbWlzZSgoKGUsdCk9PnthPWUsbj10fSkpLCJfbWFsbG9jIF9mcmVlIF9yZWFsbG9jIF9sdWFMX2NoZWNrdmVyc2lvbl8gX2x1YUxfZ2V0bWV0YWZpZWxkIF9sdWFMX2NhbGxtZXRhIF9sdWFMX3RvbHN0cmluZyBfbHVhTF9hcmdlcnJvciBfbHVhTF90eXBlZXJyb3IgX2x1YUxfY2hlY2tsc3RyaW5nIF9sdWFMX29wdGxzdHJpbmcgX2x1YUxfY2hlY2tudW1iZXIgX2x1YUxfb3B0bnVtYmVyIF9sdWFMX2NoZWNraW50ZWdlciBfbHVhTF9vcHRpbnRlZ2VyIF9sdWFMX2NoZWNrc3RhY2sgX2x1YUxfY2hlY2t0eXBlIF9sdWFMX2NoZWNrYW55IF9sdWFMX25ld21ldGF0YWJsZSBfbHVhTF9zZXRtZXRhdGFibGUgX2x1YUxfdGVzdHVkYXRhIF9sdWFMX2NoZWNrdWRhdGEgX2x1YUxfd2hlcmUgX2x1YUxfZmlsZXJlc3VsdCBfbHVhTF9leGVjcmVzdWx0IF9sdWFMX3JlZiBfbHVhTF91bnJlZiBfbHVhTF9sb2FkZmlsZXggX2x1YUxfbG9hZGJ1ZmZlcnggX2x1YUxfbG9hZHN0cmluZyBfbHVhTF9uZXdzdGF0ZSBfbHVhTF9sZW4gX2x1YUxfYWRkZ3N1YiBfbHVhTF9nc3ViIF9sdWFMX3NldGZ1bmNzIF9sdWFMX2dldHN1YnRhYmxlIF9sdWFMX3RyYWNlYmFjayBfbHVhTF9yZXF1aXJlZiBfbHVhTF9idWZmaW5pdCBfbHVhTF9wcmVwYnVmZnNpemUgX2x1YUxfYWRkbHN0cmluZyBfbHVhTF9hZGRzdHJpbmcgX2x1YUxfYWRkdmFsdWUgX2x1YUxfcHVzaHJlc3VsdCBfbHVhTF9wdXNocmVzdWx0c2l6ZSBfbHVhTF9idWZmaW5pdHNpemUgX2x1YV9uZXdzdGF0ZSBfbHVhX2Nsb3NlIF9sdWFfbmV3dGhyZWFkIF9sdWFfcmVzZXR0aHJlYWQgX2x1YV9hdHBhbmljIF9sdWFfdmVyc2lvbiBfbHVhX2Fic2luZGV4IF9sdWFfZ2V0dG9wIF9sdWFfc2V0dG9wIF9sdWFfcHVzaHZhbHVlIF9sdWFfcm90YXRlIF9sdWFfY29weSBfbHVhX2NoZWNrc3RhY2sgX2x1YV94bW92ZSBfbHVhX2lzbnVtYmVyIF9sdWFfaXNzdHJpbmcgX2x1YV9pc2NmdW5jdGlvbiBfbHVhX2lzaW50ZWdlciBfbHVhX2lzdXNlcmRhdGEgX2x1YV90eXBlIF9sdWFfdHlwZW5hbWUgX2x1YV90b251bWJlcnggX2x1YV90b2ludGVnZXJ4IF9sdWFfdG9ib29sZWFuIF9sdWFfdG9sc3RyaW5nIF9sdWFfcmF3bGVuIF9sdWFfdG9jZnVuY3Rpb24gX2x1YV90b3VzZXJkYXRhIF9sdWFfdG90aHJlYWQgX2x1YV90b3BvaW50ZXIgX2x1YV9hcml0aCBfbHVhX3Jhd2VxdWFsIF9sdWFfY29tcGFyZSBfbHVhX3B1c2huaWwgX2x1YV9wdXNobnVtYmVyIF9sdWFfcHVzaGludGVnZXIgX2x1YV9wdXNobHN0cmluZyBfbHVhX3B1c2hzdHJpbmcgX2x1YV9wdXNoY2Nsb3N1cmUgX2x1YV9wdXNoYm9vbGVhbiBfbHVhX3B1c2hsaWdodHVzZXJkYXRhIF9sdWFfcHVzaHRocmVhZCBfbHVhX2dldGdsb2JhbCBfbHVhX2dldHRhYmxlIF9sdWFfZ2V0ZmllbGQgX2x1YV9nZXRpIF9sdWFfcmF3Z2V0IF9sdWFfcmF3Z2V0aSBfbHVhX3Jhd2dldHAgX2x1YV9jcmVhdGV0YWJsZSBfbHVhX25ld3VzZXJkYXRhdXYgX2x1YV9nZXRtZXRhdGFibGUgX2x1YV9nZXRpdXNlcnZhbHVlIF9sdWFfc2V0Z2xvYmFsIF9sdWFfc2V0dGFibGUgX2x1YV9zZXRmaWVsZCBfbHVhX3NldGkgX2x1YV9yYXdzZXQgX2x1YV9yYXdzZXRpIF9sdWFfcmF3c2V0cCBfbHVhX3NldG1ldGF0YWJsZSBfbHVhX3NldGl1c2VydmFsdWUgX2x1YV9jYWxsayBfbHVhX3BjYWxsayBfbHVhX2xvYWQgX2x1YV9kdW1wIF9sdWFfeWllbGRrIF9sdWFfcmVzdW1lIF9sdWFfc3RhdHVzIF9sdWFfaXN5aWVsZGFibGUgX2x1YV9zZXR3YXJuZiBfbHVhX3dhcm5pbmcgX2x1YV9lcnJvciBfbHVhX25leHQgX2x1YV9jb25jYXQgX2x1YV9sZW4gX2x1YV9zdHJpbmd0b251bWJlciBfbHVhX2dldGFsbG9jZiBfbHVhX3NldGFsbG9jZiBfbHVhX3RvY2xvc2UgX2x1YV9jbG9zZXNsb3QgX2x1YV9nZXRzdGFjayBfbHVhX2dldGluZm8gX2x1YV9nZXRsb2NhbCBfbHVhX3NldGxvY2FsIF9sdWFfZ2V0dXB2YWx1ZSBfbHVhX3NldHVwdmFsdWUgX2x1YV91cHZhbHVlaWQgX2x1YV91cHZhbHVlam9pbiBfbHVhX3NldGhvb2sgX2x1YV9nZXRob29rIF9sdWFfZ2V0aG9va21hc2sgX2x1YV9nZXRob29rY291bnQgX2x1YV9zZXRjc3RhY2tsaW1pdCBfbHVhb3Blbl9iYXNlIF9sdWFvcGVuX2Nvcm91dGluZSBfbHVhb3Blbl90YWJsZSBfbHVhb3Blbl9pbyBfbHVhb3Blbl9vcyBfbHVhb3Blbl9zdHJpbmcgX2x1YW9wZW5fdXRmOCBfbHVhb3Blbl9tYXRoIF9sdWFvcGVuX2RlYnVnIF9sdWFvcGVuX3BhY2thZ2UgX2x1YUxfb3BlbmxpYnMgX21lbW9yeSBfX19pbmRpcmVjdF9mdW5jdGlvbl90YWJsZSBfZmZsdXNoIG9uUnVudGltZUluaXRpYWxpemVkIi5zcGxpdCgiICIpLmZvckVhY2goKGU9PntPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGkucmVhZHksZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLnJlYWR5LGUse2dldDooKT0+USgiWW91IGFyZSBnZXR0aW5nICIrZSsiIG9uIHRoZSBQcm9taXNlIG9iamVjdCwgaW5zdGVhZCBvZiB0aGUgaW5zdGFuY2UuIFVzZSAudGhlbigpIHRvIGdldCBjYWxsZWQgYmFjayB3aXRoIHRoZSBpbnN0YW5jZSwgc2VlIHRoZSBNT0RVTEFSSVpFIGRvY3MgaW4gc3JjL3NldHRpbmdzLmpzIiksc2V0OigpPT5RKCJZb3UgYXJlIHNldHRpbmcgIitlKyIgb24gdGhlIFByb21pc2Ugb2JqZWN0LCBpbnN0ZWFkIG9mIHRoZSBpbnN0YW5jZS4gVXNlIC50aGVuKCkgdG8gZ2V0IGNhbGxlZCBiYWNrIHdpdGggdGhlIGluc3RhbmNlLCBzZWUgdGhlIE1PRFVMQVJJWkUgZG9jcyBpbiBzcmMvc2V0dGluZ3MuanMiKX0pfSkpO3ZhciB1PU9iamVjdC5hc3NpZ24oe30saSksbz0iLi90aGlzLnByb2dyYW0iLHM9KGUsdCk9Pnt0aHJvdyB0fSxsPSJvYmplY3QiPT10eXBlb2Ygd2luZG93LGg9ImZ1bmN0aW9uIj09dHlwZW9mIGltcG9ydFNjcmlwdHMsYz0ib2JqZWN0Ij09dHlwZW9mIGsmJiJvYmplY3QiPT10eXBlb2Ygay52ZXJzaW9ucyYmInN0cmluZyI9PXR5cGVvZiBrLnZlcnNpb25zLm5vZGUsZD0hbCYmIWMmJiFoO2lmKGkuRU5WSVJPTk1FTlQpdGhyb3cgRXJyb3IoIk1vZHVsZS5FTlZJUk9OTUVOVCBoYXMgYmVlbiBkZXByZWNhdGVkLiBUbyBmb3JjZSB0aGUgZW52aXJvbm1lbnQsIHVzZSB0aGUgRU5WSVJPTk1FTlQgY29tcGlsZS10aW1lIG9wdGlvbiAoZm9yIGV4YW1wbGUsIC1zRU5WSVJPTk1FTlQ9d2ViIG9yIC1zRU5WSVJPTk1FTlQ9bm9kZSkiKTt2YXIgZixwLG0sXz0iIjtpZihjKXtpZih2b2lkIDA9PT1rfHwhay5yZWxlYXNlfHwibm9kZSIhPT1rLnJlbGVhc2UubmFtZSl0aHJvdyBFcnJvcigibm90IGNvbXBpbGVkIGZvciB0aGlzIGVudmlyb25tZW50IChkaWQgeW91IGJ1aWxkIHRvIEhUTUwgYW5kIHRyeSB0byBydW4gaXQgbm90IG9uIHRoZSB3ZWIsIG9yIHNldCBFTlZJUk9OTUVOVCB0byBzb21ldGhpbmcgLSBsaWtlIG5vZGUgLSBhbmQgcnVuIGl0IHNvbWVwbGFjZSBlbHNlIC0gbGlrZSBvbiB0aGUgd2ViPykiKTt2YXIgZz1rLnZlcnNpb25zLm5vZGUsYj1nLnNwbGl0KCIuIikuc2xpY2UoMCwzKTtpZigxNmU0PihiPTFlNCpiWzBdKzEwMCpiWzFdKzEqYlsyXS5zcGxpdCgiLSIpWzBdKSl0aHJvdyBFcnJvcigiVGhpcyBlbXNjcmlwdGVuLWdlbmVyYXRlZCBjb2RlIHJlcXVpcmVzIG5vZGUgdjE2LjAuMCAoZGV0ZWN0ZWQgdiIrZysiKSIpO2NvbnN0e2NyZWF0ZVJlcXVpcmU6dH09YXdhaXQgaW1wb3J0KCIvbnBtL21vZHVsZS8rZXNtIik7dmFyIHc9dCgidW5kZWZpbmVkIj09dHlwZW9mIGRvY3VtZW50JiYidW5kZWZpbmVkIj09dHlwZW9mIGxvY2F0aW9uP0xlKCJ1cmwiKS5wYXRoVG9GaWxlVVJMKGUpLmhyZWY6InVuZGVmaW5lZCI9PXR5cGVvZiBkb2N1bWVudD9sb2NhdGlvbi5ocmVmOnImJnIuc3JjfHxuZXcgVVJMKCJpbmRleC5qcyIsZG9jdW1lbnQuYmFzZVVSSSkuaHJlZikseT13KCJmcyIpLHY9dygicGF0aCIpO189aD92LmRpcm5hbWUoXykrIi8iOncoInVybCIpLmZpbGVVUkxUb1BhdGgobmV3IFVSTCgiLi8iLCJ1bmRlZmluZWQiPT10eXBlb2YgZG9jdW1lbnQmJiJ1bmRlZmluZWQiPT10eXBlb2YgbG9jYXRpb24/TGUoInVybCIpLnBhdGhUb0ZpbGVVUkwoZSkuaHJlZjoidW5kZWZpbmVkIj09dHlwZW9mIGRvY3VtZW50P2xvY2F0aW9uLmhyZWY6ciYmci5zcmN8fG5ldyBVUkwoImluZGV4LmpzIixkb2N1bWVudC5iYXNlVVJJKS5ocmVmKSksZj0oZSx0KT0+KGU9cmUoZSk/bmV3IFVSTChlKTp2Lm5vcm1hbGl6ZShlKSx5LnJlYWRGaWxlU3luYyhlLHQ/dm9pZCAwOiJ1dGY4IikpLG09ZT0+KChlPWYoZSwhMCkpLmJ1ZmZlcnx8KGU9bmV3IFVpbnQ4QXJyYXkoZSkpLE4oZS5idWZmZXIpLGUpLHA9KGUsdCxyLGE9ITApPT57ZT1yZShlKT9uZXcgVVJMKGUpOnYubm9ybWFsaXplKGUpLHkucmVhZEZpbGUoZSxhP3ZvaWQgMDoidXRmOCIsKChlLG4pPT57ZT9yKGUpOnQoYT9uLmJ1ZmZlcjpuKX0pKX0sIWkudGhpc1Byb2dyYW0mJjE8ay5hcmd2Lmxlbmd0aCYmKG89ay5hcmd2WzFdLnJlcGxhY2UoL1xcL2csIi8iKSksay5hcmd2LnNsaWNlKDIpLHM9KGUsdCk9Pnt0aHJvdyBrLmV4aXRDb2RlPWUsdH0saS5pbnNwZWN0PSgpPT4iW0Vtc2NyaXB0ZW4gTW9kdWxlIG9iamVjdF0ifWVsc2UgaWYoZCl7aWYoIm9iamVjdCI9PXR5cGVvZiBrJiYiZnVuY3Rpb24iPT10eXBlb2Ygd3x8Im9iamVjdCI9PXR5cGVvZiB3aW5kb3d8fCJmdW5jdGlvbiI9PXR5cGVvZiBpbXBvcnRTY3JpcHRzKXRocm93IEVycm9yKCJub3QgY29tcGlsZWQgZm9yIHRoaXMgZW52aXJvbm1lbnQgKGRpZCB5b3UgYnVpbGQgdG8gSFRNTCBhbmQgdHJ5IHRvIHJ1biBpdCBub3Qgb24gdGhlIHdlYiwgb3Igc2V0IEVOVklST05NRU5UIHRvIHNvbWV0aGluZyAtIGxpa2Ugbm9kZSAtIGFuZCBydW4gaXQgc29tZXBsYWNlIGVsc2UgLSBsaWtlIG9uIHRoZSB3ZWI/KSIpOyJ1bmRlZmluZWQiIT10eXBlb2YgcmVhZCYmKGY9cmVhZCksbT1lPT4iZnVuY3Rpb24iPT10eXBlb2YgcmVhZGJ1ZmZlcj9uZXcgVWludDhBcnJheShyZWFkYnVmZmVyKGUpKTooTigib2JqZWN0Ij09dHlwZW9mKGU9cmVhZChlLCJiaW5hcnkiKSkpLGUpLHA9KGUsdCk9PntzZXRUaW1lb3V0KCgoKT0+dChtKGUpKSkpfSwidW5kZWZpbmVkIj09dHlwZW9mIGNsZWFyVGltZW91dCYmKGdsb2JhbFRoaXMuY2xlYXJUaW1lb3V0PSgpPT57fSksInVuZGVmaW5lZCI9PXR5cGVvZiBzZXRUaW1lb3V0JiYoZ2xvYmFsVGhpcy5zZXRUaW1lb3V0PWU9PiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UoKTpRKCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBxdWl0JiYocz0oZSx0KT0+e3Rocm93IHNldFRpbWVvdXQoKCgpPT57aWYoISh0IGluc3RhbmNlb2YgcGUpKXtsZXQgZT10O3QmJiJvYmplY3QiPT10eXBlb2YgdCYmdC5zdGFjayYmKGU9W3QsdC5zdGFja10pLEwoYGV4aXRpbmcgZHVlIHRvIGV4Y2VwdGlvbjogJHtlfWApfXF1aXQoZSl9KSksdH0pLCJ1bmRlZmluZWQiIT10eXBlb2YgcHJpbnQmJigidW5kZWZpbmVkIj09dHlwZW9mIGNvbnNvbGUmJihjb25zb2xlPXt9KSxjb25zb2xlLmxvZz1wcmludCxjb25zb2xlLndhcm49Y29uc29sZS5lcnJvcj0idW5kZWZpbmVkIiE9dHlwZW9mIHByaW50RXJyP3ByaW50RXJyOnByaW50KX1lbHNle2lmKCFsJiYhaCl0aHJvdyBFcnJvcigiZW52aXJvbm1lbnQgZGV0ZWN0aW9uIGVycm9yIik7aWYoaD9fPXNlbGYubG9jYXRpb24uaHJlZjoidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50JiZkb2N1bWVudC5jdXJyZW50U2NyaXB0JiYoXz1kb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYyksQyYmKF89QyksXz0wIT09Xy5pbmRleE9mKCJibG9iOiIpP18uc3Vic3RyKDAsXy5yZXBsYWNlKC9bPyNdLiovLCIiKS5sYXN0SW5kZXhPZigiLyIpKzEpOiIiLCJvYmplY3QiIT10eXBlb2Ygd2luZG93JiYiZnVuY3Rpb24iIT10eXBlb2YgaW1wb3J0U2NyaXB0cyl0aHJvdyBFcnJvcigibm90IGNvbXBpbGVkIGZvciB0aGlzIGVudmlyb25tZW50IChkaWQgeW91IGJ1aWxkIHRvIEhUTUwgYW5kIHRyeSB0byBydW4gaXQgbm90IG9uIHRoZSB3ZWIsIG9yIHNldCBFTlZJUk9OTUVOVCB0byBzb21ldGhpbmcgLSBsaWtlIG5vZGUgLSBhbmQgcnVuIGl0IHNvbWVwbGFjZSBlbHNlIC0gbGlrZSBvbiB0aGUgd2ViPykiKTtmPWU9Pnt2YXIgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIHQub3BlbigiR0VUIixlLCExKSx0LnNlbmQobnVsbCksdC5yZXNwb25zZVRleHR9LGgmJihtPWU9Pnt2YXIgdD1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuIHQub3BlbigiR0VUIixlLCExKSx0LnJlc3BvbnNlVHlwZT0iYXJyYXlidWZmZXIiLHQuc2VuZChudWxsKSxuZXcgVWludDhBcnJheSh0LnJlc3BvbnNlKX0pLHA9KGUsdCxyKT0+e3ZhciBhPW5ldyBYTUxIdHRwUmVxdWVzdDthLm9wZW4oIkdFVCIsZSwhMCksYS5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIixhLm9ubG9hZD0oKT0+ezIwMD09YS5zdGF0dXN8fDA9PWEuc3RhdHVzJiZhLnJlc3BvbnNlP3QoYS5yZXNwb25zZSk6cigpfSxhLm9uZXJyb3I9cixhLnNlbmQobnVsbCl9fXZhciBFPWNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksTD1jb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7T2JqZWN0LmFzc2lnbihpLHUpLHU9bnVsbCxoZSgiRU5WSVJPTk1FTlQiKSxoZSgiR0xfTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMiKSxoZSgiU0RMX2NhblBsYXlXaXRoV2ViQXVkaW8iKSxoZSgiU0RMX251bVNpbXVsdGFuZW91c2x5UXVldWVkQnVmZmVycyIpLGhlKCJJTklUSUFMX01FTU9SWSIpLGhlKCJ3YXNtTWVtb3J5IiksaGUoImFyZ3VtZW50cyIpLGhlKCJidWZmZXIiKSxoZSgiY2FudmFzIiksaGUoImRvTm90Q2FwdHVyZUtleWJvYXJkIiksaGUoImR5bmFtaWNMaWJyYXJpZXMiKSxoZSgiZWxlbWVudFBvaW50ZXJMb2NrIiksaGUoImV4dHJhU3RhY2tUcmFjZSIpLGhlKCJmb3JjZWRBc3BlY3RSYXRpbyIpLGhlKCJpbnN0YW50aWF0ZVdhc20iKSxoZSgia2V5Ym9hcmRMaXN0ZW5pbmdFbGVtZW50IiksaGUoImZyZWVQcmVsb2FkZWRNZWRpYU9uVXNlIiksaGUoImxvYWRTcGxpdE1vZHVsZSIpLGhlKCJsb2dSZWFkRmlsZXMiKSxoZSgibWFpblNjcmlwdFVybE9yQmxvYiIpLGhlKCJtZW0iKSxoZSgibW9uaXRvclJ1bkRlcGVuZGVuY2llcyIpLGhlKCJub0V4aXRSdW50aW1lIiksaGUoIm5vSW5pdGlhbFJ1biIpLGhlKCJvbkFib3J0IiksaGUoIm9uQ3VzdG9tTWVzc2FnZSIpLGhlKCJvbkV4aXQiKSxoZSgib25GcmVlIiksaGUoIm9uRnVsbFNjcmVlbiIpLGhlKCJvbk1hbGxvYyIpLGhlKCJvblJlYWxsb2MiKSxoZSgib25SdW50aW1lSW5pdGlhbGl6ZWQiKSxoZSgicG9zdE1haW5Mb29wIiksaGUoInBvc3RSdW4iKSxoZSgicHJlSW5pdCIpLGhlKCJwcmVNYWluTG9vcCIpLGhlKCJwcmVpbml0aWFsaXplZFdlYkdMQ29udGV4dCIpLGhlKCJtZW1vcnlJbml0aWFsaXplclJlcXVlc3QiKSxoZSgicHJlbG9hZFBsdWdpbnMiKSxoZSgicHJpbnQiKSxoZSgicHJpbnRFcnIiKSxoZSgicXVpdCIpLGhlKCJzZXRTdGF0dXMiKSxoZSgic3RhdHVzTWVzc2FnZSIpLGhlKCJzdGRlcnIiKSxoZSgic3RkaW4iKSxoZSgic3Rkb3V0IiksaGUoInRoaXNQcm9ncmFtIiksaGUoIndhc20iKSxoZSgid2FzbUJpbmFyeSIpLGhlKCJ3ZWJzb2NrZXQiKSxoZSgiZmV0Y2hTZXR0aW5ncyIpLGxlKCJhcmd1bWVudHMiLCJhcmd1bWVudHNfIiksbGUoInRoaXNQcm9ncmFtIiwidGhpc1Byb2dyYW0iKSxsZSgicXVpdCIsInF1aXRfIiksTih2b2lkIDA9PT1pLm1lbW9yeUluaXRpYWxpemVyUHJlZml4VVJMLCJNb2R1bGUubWVtb3J5SW5pdGlhbGl6ZXJQcmVmaXhVUkwgb3B0aW9uIHdhcyByZW1vdmVkLCB1c2UgTW9kdWxlLmxvY2F0ZUZpbGUgaW5zdGVhZCIpLE4odm9pZCAwPT09aS5wdGhyZWFkTWFpblByZWZpeFVSTCwiTW9kdWxlLnB0aHJlYWRNYWluUHJlZml4VVJMIG9wdGlvbiB3YXMgcmVtb3ZlZCwgdXNlIE1vZHVsZS5sb2NhdGVGaWxlIGluc3RlYWQiKSxOKHZvaWQgMD09PWkuY2RJbml0aWFsaXplclByZWZpeFVSTCwiTW9kdWxlLmNkSW5pdGlhbGl6ZXJQcmVmaXhVUkwgb3B0aW9uIHdhcyByZW1vdmVkLCB1c2UgTW9kdWxlLmxvY2F0ZUZpbGUgaW5zdGVhZCIpLE4odm9pZCAwPT09aS5maWxlUGFja2FnZVByZWZpeFVSTCwiTW9kdWxlLmZpbGVQYWNrYWdlUHJlZml4VVJMIG9wdGlvbiB3YXMgcmVtb3ZlZCwgdXNlIE1vZHVsZS5sb2NhdGVGaWxlIGluc3RlYWQiKSxOKHZvaWQgMD09PWkucmVhZCwiTW9kdWxlLnJlYWQgb3B0aW9uIHdhcyByZW1vdmVkIChtb2RpZnkgcmVhZF8gaW4gSlMpIiksTih2b2lkIDA9PT1pLnJlYWRBc3luYywiTW9kdWxlLnJlYWRBc3luYyBvcHRpb24gd2FzIHJlbW92ZWQgKG1vZGlmeSByZWFkQXN5bmMgaW4gSlMpIiksTih2b2lkIDA9PT1pLnJlYWRCaW5hcnksIk1vZHVsZS5yZWFkQmluYXJ5IG9wdGlvbiB3YXMgcmVtb3ZlZCAobW9kaWZ5IHJlYWRCaW5hcnkgaW4gSlMpIiksTih2b2lkIDA9PT1pLnNldFdpbmRvd1RpdGxlLCJNb2R1bGUuc2V0V2luZG93VGl0bGUgb3B0aW9uIHdhcyByZW1vdmVkIChtb2RpZnkgZW1zY3JpcHRlbl9zZXRfd2luZG93X3RpdGxlIGluIEpTKSIpLE4odm9pZCAwPT09aS5UT1RBTF9NRU1PUlksIk1vZHVsZS5UT1RBTF9NRU1PUlkgaGFzIGJlZW4gcmVuYW1lZCBNb2R1bGUuSU5JVElBTF9NRU1PUlkiKSxsZSgiYXNtIiwid2FzbUV4cG9ydHMiKSxsZSgicmVhZCIsInJlYWRfIiksbGUoInJlYWRBc3luYyIsInJlYWRBc3luYyIpLGxlKCJyZWFkQmluYXJ5IiwicmVhZEJpbmFyeSIpLGxlKCJzZXRXaW5kb3dUaXRsZSIsInNldFdpbmRvd1RpdGxlIiksTighZCwic2hlbGwgZW52aXJvbm1lbnQgZGV0ZWN0ZWQgYnV0IG5vdCBlbmFibGVkIGF0IGJ1aWxkIHRpbWUuICBBZGQgJ3NoZWxsJyB0byBgLXNFTlZJUk9OTUVOVGAgdG8gZW5hYmxlLiIpLGxlKCJ3YXNtQmluYXJ5Iiwid2FzbUJpbmFyeSIpLCJvYmplY3QiIT10eXBlb2YgV2ViQXNzZW1ibHkmJlEoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgVCxTLEEsUixNLE8sRix4LFAsST0hMTtmdW5jdGlvbiBOKGUsdCl7ZXx8USgiQXNzZXJ0aW9uIGZhaWxlZCIrKHQ/IjogIit0OiIiKSl9ZnVuY3Rpb24gVSgpe3ZhciBlPVQuYnVmZmVyO2kuSEVBUDg9Uz1uZXcgSW50OEFycmF5KGUpLGkuSEVBUDE2PVI9bmV3IEludDE2QXJyYXkoZSksaS5IRUFQVTg9QT1uZXcgVWludDhBcnJheShlKSxpLkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KGUpLGkuSEVBUDMyPU09bmV3IEludDMyQXJyYXkoZSksaS5IRUFQVTMyPU89bmV3IFVpbnQzMkFycmF5KGUpLGkuSEVBUEYzMj1GPW5ldyBGbG9hdDMyQXJyYXkoZSksaS5IRUFQRjY0PVA9bmV3IEZsb2F0NjRBcnJheShlKSxpLkhFQVA2ND14PW5ldyBCaWdJbnQ2NEFycmF5KGUpLGkuSEVBUFU2ND1uZXcgQmlnVWludDY0QXJyYXkoZSl9ZnVuY3Rpb24gRCgpe2lmKCFJKXt2YXIgZT1XdCgpOzA9PWUmJihlKz00KTt2YXIgdD1PW2U+PjJdLHI9T1tlKzQ+PjJdOzM0ODIxMjIzPT10JiYyMzEwNzIxMDIyPT1yfHxRKGBTdGFjayBvdmVyZmxvdyEgU3RhY2sgY29va2llIGhhcyBiZWVuIG92ZXJ3cml0dGVuIGF0ICR7X2UoZSl9LCBleHBlY3RlZCBoZXggZHdvcmRzIDB4ODlCQUNERkUgYW5kIDB4MjEzNTQ2NywgYnV0IHJlY2VpdmVkICR7X2Uocil9ICR7X2UodCl9YCksMTY2ODUwOTAyOSE9T1swXSYmUSgiUnVudGltZSBlcnJvcjogVGhlIGFwcGxpY2F0aW9uIGhhcyBjb3JydXB0ZWQgaXRzIGhlYXAgbWVtb3J5IGFyZWEgKGFkZHJlc3MgemVybykhIil9fU4oIWkuU1RBQ0tfU0laRSwiU1RBQ0tfU0laRSBjYW4gbm8gbG9uZ2VyIGJlIHNldCBhdCBydW50aW1lLiAgVXNlIC1zU1RBQ0tfU0laRSBhdCBsaW5rIHRpbWUiKSxOKCJ1bmRlZmluZWQiIT10eXBlb2YgSW50MzJBcnJheSYmInVuZGVmaW5lZCIhPXR5cGVvZiBGbG9hdDY0QXJyYXkmJm51bGwhPUludDMyQXJyYXkucHJvdG90eXBlLnN1YmFycmF5JiZudWxsIT1JbnQzMkFycmF5LnByb3RvdHlwZS5zZXQsIkpTIGVuZ2luZSBkb2VzIG5vdCBwcm92aWRlIGZ1bGwgdHlwZWQgYXJyYXkgc3VwcG9ydCIpLE4oIWkud2FzbU1lbW9yeSwiVXNlIG9mIGB3YXNtTWVtb3J5YCBkZXRlY3RlZC4gIFVzZSAtc0lNUE9SVEVEX01FTU9SWSB0byBkZWZpbmUgd2FzbU1lbW9yeSBleHRlcm5hbGx5IiksTighaS5JTklUSUFMX01FTU9SWSwiRGV0ZWN0ZWQgcnVudGltZSBJTklUSUFMX01FTU9SWSBzZXR0aW5nLiAgVXNlIC1zSU1QT1JURURfTUVNT1JZIHRvIGRlZmluZSB3YXNtTWVtb3J5IGR5bmFtaWNhbGx5Iik7dmFyIFY9bmV3IEludDE2QXJyYXkoMSksWT1uZXcgSW50OEFycmF5KFYuYnVmZmVyKTtpZihWWzBdPTI1NDU5LDExNSE9PVlbMF18fDk5IT09WVsxXSl0aHJvdyJSdW50aW1lIGVycm9yOiBleHBlY3RlZCB0aGUgc3lzdGVtIHRvIGJlIGxpdHRsZS1lbmRpYW4hIChSdW4gd2l0aCAtc1NVUFBPUlRfQklHX0VORElBTiB0byBieXBhc3MpIjt2YXIgaj1bXSx6PVtdLEg9W10sJD0hMTtOKE1hdGguaW11bCwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgTWF0aC5pbXVsKCksIGJ1aWxkIHdpdGggTEVHQUNZX1ZNX1NVUFBPUlQgb3IgUE9MWUZJTExfT0xEX01BVEhfRlVOQ1RJT05TIHRvIGFkZCBpbiBhIHBvbHlmaWxsIiksTihNYXRoLmZyb3VuZCwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgTWF0aC5mcm91bmQoKSwgYnVpbGQgd2l0aCBMRUdBQ1lfVk1fU1VQUE9SVCBvciBQT0xZRklMTF9PTERfTUFUSF9GVU5DVElPTlMgdG8gYWRkIGluIGEgcG9seWZpbGwiKSxOKE1hdGguY2x6MzIsIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IE1hdGguY2x6MzIoKSwgYnVpbGQgd2l0aCBMRUdBQ1lfVk1fU1VQUE9SVCBvciBQT0xZRklMTF9PTERfTUFUSF9GVU5DVElPTlMgdG8gYWRkIGluIGEgcG9seWZpbGwiKSxOKE1hdGgudHJ1bmMsIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IE1hdGgudHJ1bmMoKSwgYnVpbGQgd2l0aCBMRUdBQ1lfVk1fU1VQUE9SVCBvciBQT0xZRklMTF9PTERfTUFUSF9GVU5DVElPTlMgdG8gYWRkIGluIGEgcG9seWZpbGwiKTt2YXIgRz0wLFc9bnVsbCxxPW51bGwsSz17fTtmdW5jdGlvbiBYKGUpe2Zvcih2YXIgdD1lOzspe2lmKCFLW2VdKXJldHVybiBlO2U9dCtNYXRoLnJhbmRvbSgpfX1mdW5jdGlvbiBKKGUpe0crKyxlPyhOKCFLW2VdKSxLW2VdPTEsbnVsbD09PVcmJiJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW50ZXJ2YWwmJihXPXNldEludGVydmFsKCgoKT0+e2lmKEkpY2xlYXJJbnRlcnZhbChXKSxXPW51bGw7ZWxzZXt2YXIgZSx0PSExO2ZvcihlIGluIEspdHx8KHQ9ITAsTCgic3RpbGwgd2FpdGluZyBvbiBydW4gZGVwZW5kZW5jaWVzOiIpKSxMKGBkZXBlbmRlbmN5OiAke2V9YCk7dCYmTCgiKGVuZCBvZiBsaXN0KSIpfX0pLDFlNCkpKTpMKCJ3YXJuaW5nOiBydW4gZGVwZW5kZW5jeSBhZGRlZCB3aXRob3V0IElEIil9ZnVuY3Rpb24gWihlKXtHLS0sZT8oTihLW2VdKSxkZWxldGUgS1tlXSk6TCgid2FybmluZzogcnVuIGRlcGVuZGVuY3kgcmVtb3ZlZCB3aXRob3V0IElEIiksMD09RyYmKG51bGwhPT1XJiYoY2xlYXJJbnRlcnZhbChXKSxXPW51bGwpLHEmJihlPXEscT1udWxsLGUoKSkpfWZ1bmN0aW9uIFEoZSl7dGhyb3cgTChlPSJBYm9ydGVkKCIrZSsiKSIpLEk9ITAsZT1uZXcgV2ViQXNzZW1ibHkuUnVudGltZUVycm9yKGUpLG4oZSksZX12YXIgZWUsdGU9ZT0+ZS5zdGFydHNXaXRoKCJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIikscmU9ZT0+ZS5zdGFydHNXaXRoKCJmaWxlOi8vIik7ZnVuY3Rpb24gYWUoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7TigkLGBuYXRpdmUgZnVuY3Rpb24gXGAke2V9XGAgY2FsbGVkIGJlZm9yZSBydW50aW1lIGluaXRpYWxpemF0aW9uYCk7dmFyIHQ9VnRbZV07cmV0dXJuIE4odCxgZXhwb3J0ZWQgbmF0aXZlIGZ1bmN0aW9uIFxgJHtlfVxgIG5vdCBmb3VuZGApLHQuYXBwbHkobnVsbCxhcmd1bWVudHMpfX1pZihpLmxvY2F0ZUZpbGUpe2lmKCF0ZShlZT0iZ2x1ZS53YXNtIikpe3ZhciBuZT1lZTtlZT1pLmxvY2F0ZUZpbGU/aS5sb2NhdGVGaWxlKG5lLF8pOl8rbmV9fWVsc2UgZWU9bmV3IFVSTCgiZ2x1ZS53YXNtIiwidW5kZWZpbmVkIj09dHlwZW9mIGRvY3VtZW50JiYidW5kZWZpbmVkIj09dHlwZW9mIGxvY2F0aW9uP0xlKCJ1cmwiKS5wYXRoVG9GaWxlVVJMKGUpLmhyZWY6InVuZGVmaW5lZCI9PXR5cGVvZiBkb2N1bWVudD9sb2NhdGlvbi5ocmVmOnImJnIuc3JjfHxuZXcgVVJMKCJpbmRleC5qcyIsZG9jdW1lbnQuYmFzZVVSSSkuaHJlZikuaHJlZjtmdW5jdGlvbiBpZShlKXtpZihtKXJldHVybiBtKGUpO3Rocm93ImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkIn1mdW5jdGlvbiB1ZShlKXtpZihsfHxoKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgZmV0Y2gmJiFyZShlKSlyZXR1cm4gZmV0Y2goZSx7Y3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIn0pLnRoZW4oKHQ9PntpZighdC5vayl0aHJvdyJmYWlsZWQgdG8gbG9hZCB3YXNtIGJpbmFyeSBmaWxlIGF0ICciK2UrIiciO3JldHVybiB0LmFycmF5QnVmZmVyKCl9KSkuY2F0Y2goKCgpPT5pZShlKSkpO2lmKHApcmV0dXJuIG5ldyBQcm9taXNlKCgodCxyKT0+e3AoZSwoZT0+dChuZXcgVWludDhBcnJheShlKSkpLHIpfSkpfXJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgoKT0+aWUoZSkpKX1mdW5jdGlvbiBvZShlLHQscil7cmV0dXJuIHVlKGUpLnRoZW4oKGU9PldlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGUsdCkpKS50aGVuKChlPT5lKSkudGhlbihyLChlPT57TChgZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogJHtlfWApLHJlKGVlKSYmTChgd2FybmluZzogTG9hZGluZyBmcm9tIGEgZmlsZSBVUkkgKCR7ZWV9KSBpcyBub3Qgc3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMuIFNlZSBodHRwczovL2Vtc2NyaXB0ZW4ub3JnL2RvY3MvZ2V0dGluZ19zdGFydGVkL0ZBUS5odG1sI2hvdy1kby1pLXJ1bi1hLWxvY2FsLXdlYnNlcnZlci1mb3ItdGVzdGluZy13aHktZG9lcy1teS1wcm9ncmFtLXN0YWxsLWluLWRvd25sb2FkaW5nLW9yLXByZXBhcmluZ2ApLFEoZSl9KSl9ZnVuY3Rpb24gc2UoZSx0KXt2YXIgcj1lZTtyZXR1cm4iZnVuY3Rpb24iIT10eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmd8fHRlKHIpfHxyZShyKXx8Y3x8ImZ1bmN0aW9uIiE9dHlwZW9mIGZldGNoP29lKHIsZSx0KTpmZXRjaChyLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbigoYT0+V2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcoYSxlKS50aGVuKHQsKGZ1bmN0aW9uKGEpe3JldHVybiBMKGB3YXNtIHN0cmVhbWluZyBjb21waWxlIGZhaWxlZDogJHthfWApLEwoImZhbGxpbmcgYmFjayB0byBBcnJheUJ1ZmZlciBpbnN0YW50aWF0aW9uIiksb2UocixlLHQpfSkpKSl9ZnVuY3Rpb24gbGUoZSx0KXtPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLGUse2NvbmZpZ3VyYWJsZTohMCxnZXQoKXtRKGBcYE1vZHVsZS4ke2V9XGAgaGFzIGJlZW4gcmVwbGFjZWQgYnkgXGAke3R9XGAgKHRoZSBpbml0aWFsIHZhbHVlIGNhbiBiZSBwcm92aWRlZCBvbiBNb2R1bGUsIGJ1dCBhZnRlciBzdGFydHVwIHRoZSB2YWx1ZSBpcyBvbmx5IGxvb2tlZCBmb3Igb24gYSBsb2NhbCB2YXJpYWJsZSBvZiB0aGF0IG5hbWUpYCl9fSl9ZnVuY3Rpb24gaGUoZSl7T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLGUpJiZRKGBcYE1vZHVsZS4ke2V9XGAgd2FzIHN1cHBsaWVkIGJ1dCBcYCR7ZX1cYCBub3QgaW5jbHVkZWQgaW4gSU5DT01JTkdfTU9EVUxFX0pTX0FQSWApfWZ1bmN0aW9uIGNlKGUpe3JldHVybiJGU19jcmVhdGVQYXRoIj09PWV8fCJGU19jcmVhdGVEYXRhRmlsZSI9PT1lfHwiRlNfY3JlYXRlUHJlbG9hZGVkRmlsZSI9PT1lfHwiRlNfdW5saW5rIj09PWV8fCJhZGRSdW5EZXBlbmRlbmN5Ij09PWV8fCJGU19jcmVhdGVMYXp5RmlsZSI9PT1lfHwiRlNfY3JlYXRlRGV2aWNlIj09PWV8fCJyZW1vdmVSdW5EZXBlbmRlbmN5Ij09PWV9ZnVuY3Rpb24gZGUoZSx0KXsidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxUaGlzLGUse2NvbmZpZ3VyYWJsZTohMCxnZXQoKXtnZShgXGAke2V9XGAgaXMgbm90IGxvbmdlciBkZWZpbmVkIGJ5IGVtc2NyaXB0ZW4uICR7dH1gKX19KX1mdW5jdGlvbiBmZShlKXtPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGksZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLGUse2NvbmZpZ3VyYWJsZTohMCxnZXQoKXt2YXIgdD1gJyR7ZX0nIHdhcyBub3QgZXhwb3J0ZWQuIGFkZCBpdCB0byBFWFBPUlRFRF9SVU5USU1FX01FVEhPRFMgKHNlZSB0aGUgRW1zY3JpcHRlbiBGQVEpYDtjZShlKSYmKHQrPSIuIEFsdGVybmF0aXZlbHksIGZvcmNpbmcgZmlsZXN5c3RlbSBzdXBwb3J0ICgtc0ZPUkNFX0ZJTEVTWVNURU0pIGNhbiBleHBvcnQgdGhpcyBmb3IgeW91IiksUSh0KX19KX1mdW5jdGlvbiBwZShlKXt0aGlzLm5hbWU9IkV4aXRTdGF0dXMiLHRoaXMubWVzc2FnZT1gUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCgke2V9KWAsdGhpcy5zdGF0dXM9ZX1kZSgiYnVmZmVyIiwiUGxlYXNlIHVzZSBIRUFQOC5idWZmZXIgb3Igd2FzbU1lbW9yeS5idWZmZXIiKSxkZSgiYXNtIiwiUGxlYXNlIHVzZSB3YXNtRXhwb3J0cyBpbnN0ZWFkIik7dmFyIG1lLF9lPWU9PihOKCJudW1iZXIiPT10eXBlb2YgZSksIjB4IisoZT4+PjApLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg4LCIwIikpLGdlPWU9PnttZXx8PXt9LG1lW2VdfHwobWVbZV09MSxjJiYoZT0id2FybmluZzogIitlKSxMKGUpKX0sYmU9KGUsdCk9Pntmb3IodmFyIHI9MCxhPWUubGVuZ3RoLTE7MDw9YTthLS0pe3ZhciBuPWVbYV07Ii4iPT09bj9lLnNwbGljZShhLDEpOiIuLiI9PT1uPyhlLnNwbGljZShhLDEpLHIrKyk6ciYmKGUuc3BsaWNlKGEsMSksci0tKX1pZih0KWZvcig7cjtyLS0pZS51bnNoaWZ0KCIuLiIpO3JldHVybiBlfSx3ZT1lPT57dmFyIHQ9Ii8iPT09ZS5jaGFyQXQoMCkscj0iLyI9PT1lLnN1YnN0cigtMSk7cmV0dXJuKGU9YmUoZS5zcGxpdCgiLyIpLmZpbHRlcigoZT0+ISFlKSksIXQpLmpvaW4oIi8iKSl8fHR8fChlPSIuIiksZSYmciYmKGUrPSIvIiksKHQ/Ii8iOiIiKStlfSx5ZT1lPT57dmFyIHQ9L14oXC8/fCkoW1xzXFNdKj8pKCg/OlwuezEsMn18W15cL10rP3wpKFwuW14uXC9dKnwpKSg/OltcL10qKSQvLmV4ZWMoZSkuc2xpY2UoMSk7cmV0dXJuIGU9dFswXSx0PXRbMV0sZXx8dD8odCYmPXQuc3Vic3RyKDAsdC5sZW5ndGgtMSksZSt0KToiLiJ9LHZlPWU9PntpZigiLyI9PT1lKXJldHVybiIvIjt2YXIgdD0oZT0oZT13ZShlKSkucmVwbGFjZSgvXC8kLywiIikpLmxhc3RJbmRleE9mKCIvIik7cmV0dXJuLTE9PT10P2U6ZS5zdWJzdHIodCsxKX0sRWU9KGUsdCk9PndlKGUrIi8iK3QpLFRlPSgpPT57aWYoIm9iamVjdCI9PXR5cGVvZiBjcnlwdG8mJiJmdW5jdGlvbiI9PXR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKXJldHVybiBlPT5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGUpO2lmKGMpdHJ5e3ZhciBlPXcoImNyeXB0byIpO2lmKGUucmFuZG9tRmlsbFN5bmMpcmV0dXJuIHQ9PmUucmFuZG9tRmlsbFN5bmModCk7dmFyIHQ9ZS5yYW5kb21CeXRlcztyZXR1cm4gZT0+KGUuc2V0KHQoZS5ieXRlTGVuZ3RoKSksZSl9Y2F0Y2goZSl7fVEoIm5vIGNyeXB0b2dyYXBoaWMgc3VwcG9ydCBmb3VuZCBmb3IgcmFuZG9tRGV2aWNlLiBjb25zaWRlciBwb2x5ZmlsbGluZyBpdCBpZiB5b3Ugd2FudCB0byB1c2Ugc29tZXRoaW5nIGluc2VjdXJlIGxpa2UgTWF0aC5yYW5kb20oKSwgZS5nLiBwdXQgdGhpcyBpbiBhIC0tcHJlLWpzOiB2YXIgY3J5cHRvID0geyBnZXRSYW5kb21WYWx1ZXM6IChhcnJheSkgPT4geyBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSBhcnJheVtpXSA9IChNYXRoLnJhbmRvbSgpKjI1Nil8MCB9IH07Iil9LGtlPWU9PihrZT1UZSgpKShlKTtmdW5jdGlvbiBTZSgpe2Zvcih2YXIgZT0iIix0PSExLHI9YXJndW1lbnRzLmxlbmd0aC0xOy0xPD1yJiYhdDtyLS0pe2lmKCJzdHJpbmciIT10eXBlb2YodD0wPD1yP2FyZ3VtZW50c1tyXTpfdC5jd2QoKSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIHRvIHBhdGgucmVzb2x2ZSBtdXN0IGJlIHN0cmluZ3MiKTtpZighdClyZXR1cm4iIjtlPXQrIi8iK2UsdD0iLyI9PT10LmNoYXJBdCgwKX1yZXR1cm4odD8iLyI6IiIpKyhlPWJlKGUuc3BsaXQoIi8iKS5maWx0ZXIoKGU9PiEhZSkpLCF0KS5qb2luKCIvIikpfHwiLiJ9dmFyIEFlPShlLHQpPT57ZnVuY3Rpb24gcihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoJiYiIj09PWVbdF07dCsrKTtmb3IodmFyIHI9ZS5sZW5ndGgtMTswPD1yJiYiIj09PWVbcl07ci0tKTtyZXR1cm4gdD5yP1tdOmUuc2xpY2UodCxyLXQrMSl9ZT1TZShlKS5zdWJzdHIoMSksdD1TZSh0KS5zdWJzdHIoMSksZT1yKGUuc3BsaXQoIi8iKSksdD1yKHQuc3BsaXQoIi8iKSk7Zm9yKHZhciBhPU1hdGgubWluKGUubGVuZ3RoLHQubGVuZ3RoKSxuPWEsaT0wO2k8YTtpKyspaWYoZVtpXSE9PXRbaV0pe249aTticmVha31mb3IoYT1bXSxpPW47aTxlLmxlbmd0aDtpKyspYS5wdXNoKCIuLiIpO3JldHVybihhPWEuY29uY2F0KHQuc2xpY2UobikpKS5qb2luKCIvIil9LFJlPSJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dERlY29kZXI/bmV3IFRleHREZWNvZGVyKCJ1dGY4Iik6dm9pZCAwLE1lPShlLHQpPT57Zm9yKHZhciByPXQrTmFOLGE9dDtlW2FdJiYhKGE+PXIpOykrK2E7aWYoMTY8YS10JiZlLmJ1ZmZlciYmUmUpcmV0dXJuIFJlLmRlY29kZShlLnN1YmFycmF5KHQsYSkpO2ZvcihyPSIiO3Q8YTspe3ZhciBuPWVbdCsrXTtpZigxMjgmbil7dmFyIGk9NjMmZVt0KytdO2lmKDE5Mj09KDIyNCZuKSlyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZuKTw8NnxpKTtlbHNle3ZhciB1PTYzJmVbdCsrXTsyMjQ9PSgyNDAmbik/bj0oMTUmbik8PDEyfGk8PDZ8dTooMjQwIT0oMjQ4Jm4pJiZnZSgiSW52YWxpZCBVVEYtOCBsZWFkaW5nIGJ5dGUgIitfZShuKSsiIGVuY291bnRlcmVkIHdoZW4gZGVzZXJpYWxpemluZyBhIFVURi04IHN0cmluZyBpbiB3YXNtIG1lbW9yeSB0byBhIEpTIHN0cmluZyEiKSxuPSg3Jm4pPDwxOHxpPDwxMnx1PDw2fDYzJmVbdCsrXSksNjU1MzY+bj9yKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4pOihuLT02NTUzNixyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2fG4+PjEwLDU2MzIwfDEwMjMmbikpfX1lbHNlIHIrPVN0cmluZy5mcm9tQ2hhckNvZGUobil9cmV0dXJuIHJ9LE9lPVtdLEZlPWU9Pntmb3IodmFyIHQ9MCxyPTA7cjxlLmxlbmd0aDsrK3Ipe3ZhciBhPWUuY2hhckNvZGVBdChyKTsxMjc+PWE/dCsrOjIwNDc+PWE/dCs9Mjo1NTI5Njw9YSYmNTczNDM+PWE/KHQrPTQsKytyKTp0Kz0zfXJldHVybiB0fSx4ZT0oZSx0LHIsYSk9PntpZihOKCJzdHJpbmciPT10eXBlb2YgZSxgc3RyaW5nVG9VVEY4QXJyYXkgZXhwZWN0cyBhIHN0cmluZyAoZ290ICR7dHlwZW9mIGV9KWApLCEoMDxhKSlyZXR1cm4gMDt2YXIgbj1yO2E9cithLTE7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDsrK2kpe3ZhciB1PWUuY2hhckNvZGVBdChpKTtpZig1NTI5Njw9dSYmNTczNDM+PXUmJih1PTY1NTM2KygoMTAyMyZ1KTw8MTApfDEwMjMmZS5jaGFyQ29kZUF0KCsraSkpLDEyNz49dSl7aWYocj49YSlicmVhazt0W3IrK109dX1lbHNle2lmKDIwNDc+PXUpe2lmKHIrMT49YSlicmVhazt0W3IrK109MTkyfHU+PjZ9ZWxzZXtpZig2NTUzNT49dSl7aWYocisyPj1hKWJyZWFrO3RbcisrXT0yMjR8dT4+MTJ9ZWxzZXtpZihyKzM+PWEpYnJlYWs7MTExNDExMTx1JiZnZSgiSW52YWxpZCBVbmljb2RlIGNvZGUgcG9pbnQgIitfZSh1KSsiIGVuY291bnRlcmVkIHdoZW4gc2VyaWFsaXppbmcgYSBKUyBzdHJpbmcgdG8gYSBVVEYtOCBzdHJpbmcgaW4gd2FzbSBtZW1vcnkhIChWYWxpZCB1bmljb2RlIGNvZGUgcG9pbnRzIHNob3VsZCBiZSBpbiByYW5nZSAwLTB4MTBGRkZGKS4iKSx0W3IrK109MjQwfHU+PjE4LHRbcisrXT0xMjh8dT4+MTImNjN9dFtyKytdPTEyOHx1Pj42JjYzfXRbcisrXT0xMjh8NjMmdX19cmV0dXJuIHRbcl09MCxyLW59O2Z1bmN0aW9uIFBlKGUsdCl7dmFyIHI9QXJyYXkoRmUoZSkrMSk7cmV0dXJuIGU9eGUoZSxyLDAsci5sZW5ndGgpLHQmJihyLmxlbmd0aD1lKSxyfXZhciBJZT1bXTtmdW5jdGlvbiBOZShlLHQpe0llW2VdPXtpbnB1dDpbXSxvdXRwdXQ6W10sSzp0fSxLZShlLENlKX12YXIgQ2U9e29wZW4oZSl7dmFyIHQ9SWVbZS5ub2RlLnJkZXZdO2lmKCF0KXRocm93IG5ldyBfdC5nKDQzKTtlLnR0eT10LGUuc2Vla2FibGU9ITF9LGNsb3NlKGUpe2UudHR5LksuZnN5bmMoZS50dHkpfSxmc3luYyhlKXtlLnR0eS5LLmZzeW5jKGUudHR5KX0scmVhZChlLHQscixhKXtpZighZS50dHl8fCFlLnR0eS5LLnJhKXRocm93IG5ldyBfdC5nKDYwKTtmb3IodmFyIG49MCxpPTA7aTxhO2krKyl7dHJ5e3ZhciB1PWUudHR5LksucmEoZS50dHkpfWNhdGNoKGUpe3Rocm93IG5ldyBfdC5nKDI5KX1pZih2b2lkIDA9PT11JiYwPT09bil0aHJvdyBuZXcgX3QuZyg2KTtpZihudWxsPT11KWJyZWFrO24rKyx0W3IraV09dX1yZXR1cm4gbiYmKGUubm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKSksbn0sd3JpdGUoZSx0LHIsYSl7aWYoIWUudHR5fHwhZS50dHkuSy5pYSl0aHJvdyBuZXcgX3QuZyg2MCk7dHJ5e2Zvcih2YXIgbj0wO248YTtuKyspZS50dHkuSy5pYShlLnR0eSx0W3Irbl0pfWNhdGNoKGUpe3Rocm93IG5ldyBfdC5nKDI5KX1yZXR1cm4gYSYmKGUubm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKSksbn19LFVlPXtyYSgpe2U6e2lmKCFPZS5sZW5ndGgpe3ZhciBlPW51bGw7aWYoYyl7dmFyIHQ9Qi5hbGxvYygyNTYpLHI9MCxhPWsuc3RkaW4uZmQ7dHJ5e3I9eS5yZWFkU3luYyhhLHQpfWNhdGNoKGUpe2lmKCFlLnRvU3RyaW5nKCkuaW5jbHVkZXMoIkVPRiIpKXRocm93IGU7cj0wfWU9MDxyP3Quc2xpY2UoMCxyKS50b1N0cmluZygidXRmLTgiKTpudWxsfWVsc2UidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5wcm9tcHQ/bnVsbCE9PShlPXdpbmRvdy5wcm9tcHQoIklucHV0OiAiKSkmJihlKz0iXG4iKToiZnVuY3Rpb24iPT10eXBlb2YgcmVhZGxpbmUmJm51bGwhPT0oZT1yZWFkbGluZSgpKSYmKGUrPSJcbiIpO2lmKCFlKXtlPW51bGw7YnJlYWsgZX1PZT1QZShlLCEwKX1lPU9lLnNoaWZ0KCl9cmV0dXJuIGV9LGlhKGUsdCl7bnVsbD09PXR8fDEwPT09dD8oRShNZShlLm91dHB1dCwwKSksZS5vdXRwdXQ9W10pOjAhPXQmJmUub3V0cHV0LnB1c2godCl9LGZzeW5jKGUpe2Uub3V0cHV0JiYwPGUub3V0cHV0Lmxlbmd0aCYmKEUoTWUoZS5vdXRwdXQsMCkpLGUub3V0cHV0PVtdKX0sSWE6KCk9Pih7YWI6MjU4NTYsY2I6NSwkYToxOTEsYmI6MzUzODcsWmE6WzMsMjgsMTI3LDIxLDQsMCwxLDAsMTcsMTksMjYsMCwxOCwxNSwyMywyMiwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwXX0pLEphOigpPT4wLEthOigpPT5bMjQsODBdfSxEZT17aWEoZSx0KXtudWxsPT09dHx8MTA9PT10PyhMKE1lKGUub3V0cHV0LDApKSxlLm91dHB1dD1bXSk6MCE9dCYmZS5vdXRwdXQucHVzaCh0KX0sZnN5bmMoZSl7ZS5vdXRwdXQmJjA8ZS5vdXRwdXQubGVuZ3RoJiYoTChNZShlLm91dHB1dCwwKSksZS5vdXRwdXQ9W10pfX0sQmU9KCk9PntRKCJpbnRlcm5hbCBlcnJvcjogbW1hcEFsbG9jIGNhbGxlZCBidXQgYGVtc2NyaXB0ZW5fYnVpbHRpbl9tZW1hbGlnbmAgbmF0aXZlIHN5bWJvbCBub3QgZXhwb3J0ZWQiKX07ZnVuY3Rpb24gVmUoZSx0KXt2YXIgcj1lLm0/ZS5tLmxlbmd0aDowO3I+PXR8fCh0PU1hdGgubWF4KHQsciooMTA0ODU3Nj5yPzI6MS4xMjUpPj4+MCksMCE9ciYmKHQ9TWF0aC5tYXgodCwyNTYpKSxyPWUubSxlLm09bmV3IFVpbnQ4QXJyYXkodCksMDxlLm8mJmUubS5zZXQoci5zdWJhcnJheSgwLGUubyksMCkpfXZhciBZZT17RzpudWxsLHM6KCk9PlllLmNyZWF0ZU5vZGUobnVsbCwiLyIsMTY4OTUsMCksY3JlYXRlTm9kZShlLHQscixhKXtpZigyNDU3Nj09KDYxNDQwJnIpfHxfdC5pc0ZJRk8ocikpdGhyb3cgbmV3IF90LmcoNjMpO3JldHVybiBZZS5HfHwoWWUuRz17ZGlyOntub2RlOntDOlllLmguQyx2OlllLmgudixsb29rdXA6WWUuaC5sb29rdXAsSjpZZS5oLkoscmVuYW1lOlllLmgucmVuYW1lLHVubGluazpZZS5oLnVubGluayxybWRpcjpZZS5oLnJtZGlyLHJlYWRkaXI6WWUuaC5yZWFkZGlyLHN5bWxpbms6WWUuaC5zeW1saW5rfSxzdHJlYW06e0Q6WWUubC5EfX0sZmlsZTp7bm9kZTp7QzpZZS5oLkMsdjpZZS5oLnZ9LHN0cmVhbTp7RDpZZS5sLkQscmVhZDpZZS5sLnJlYWQsd3JpdGU6WWUubC53cml0ZSxUOlllLmwuVCxTOlllLmwuUyxWOlllLmwuVn19LGxpbms6e25vZGU6e0M6WWUuaC5DLHY6WWUuaC52LHJlYWRsaW5rOlllLmgucmVhZGxpbmt9LHN0cmVhbTp7fX0sbmE6e25vZGU6e0M6WWUuaC5DLHY6WWUuaC52fSxzdHJlYW06X3QuRGF9fSksWGUoKHI9X3QuY3JlYXRlTm9kZShlLHQscixhKSkubW9kZSk/KHIuaD1ZZS5HLmRpci5ub2RlLHIubD1ZZS5HLmRpci5zdHJlYW0sci5tPXt9KTpfdC5pc0ZpbGUoci5tb2RlKT8oci5oPVllLkcuZmlsZS5ub2RlLHIubD1ZZS5HLmZpbGUuc3RyZWFtLHIubz0wLHIubT1udWxsKTo0MDk2MD09KDYxNDQwJnIubW9kZSk/KHIuaD1ZZS5HLmxpbmsubm9kZSxyLmw9WWUuRy5saW5rLnN0cmVhbSk6ODE5Mj09KDYxNDQwJnIubW9kZSkmJihyLmg9WWUuRy5uYS5ub2RlLHIubD1ZZS5HLm5hLnN0cmVhbSksci50aW1lc3RhbXA9RGF0ZS5ub3coKSxlJiYoZS5tW3RdPXIsZS50aW1lc3RhbXA9ci50aW1lc3RhbXApLHJ9LGxiOmU9PmUubT9lLm0uc3ViYXJyYXk/ZS5tLnN1YmFycmF5KDAsZS5vKTpuZXcgVWludDhBcnJheShlLm0pOm5ldyBVaW50OEFycmF5KDApLGg6e0MoZSl7dmFyIHQ9e307cmV0dXJuIHQuZGV2PTgxOTI9PSg2MTQ0MCZlLm1vZGUpP2UuaWQ6MSx0Lmlubz1lLmlkLHQubW9kZT1lLm1vZGUsdC5ubGluaz0xLHQudWlkPTAsdC5naWQ9MCx0LnJkZXY9ZS5yZGV2LFhlKGUubW9kZSk/dC5zaXplPTQwOTY6X3QuaXNGaWxlKGUubW9kZSk/dC5zaXplPWUubzo0MDk2MD09KDYxNDQwJmUubW9kZSk/dC5zaXplPWUubGluay5sZW5ndGg6dC5zaXplPTAsdC5hdGltZT1uZXcgRGF0ZShlLnRpbWVzdGFtcCksdC5tdGltZT1uZXcgRGF0ZShlLnRpbWVzdGFtcCksdC5jdGltZT1uZXcgRGF0ZShlLnRpbWVzdGFtcCksdC5CYT00MDk2LHQuYmxvY2tzPU1hdGguY2VpbCh0LnNpemUvdC5CYSksdH0sdihlLHQpe2lmKHZvaWQgMCE9PXQubW9kZSYmKGUubW9kZT10Lm1vZGUpLHZvaWQgMCE9PXQudGltZXN0YW1wJiYoZS50aW1lc3RhbXA9dC50aW1lc3RhbXApLHZvaWQgMCE9PXQuc2l6ZSYmKHQ9dC5zaXplLGUubyE9dCkpaWYoMD09dCllLm09bnVsbCxlLm89MDtlbHNle3ZhciByPWUubTtlLm09bmV3IFVpbnQ4QXJyYXkodCksciYmZS5tLnNldChyLnN1YmFycmF5KDAsTWF0aC5taW4odCxlLm8pKSksZS5vPXR9fSxsb29rdXAoKXt0aHJvdyBfdC5kYVs0NF19LEo6KGUsdCxyLGEpPT5ZZS5jcmVhdGVOb2RlKGUsdCxyLGEpLHJlbmFtZShlLHQscil7aWYoWGUoZS5tb2RlKSl7dHJ5e3ZhciBhPUplKHQscil9Y2F0Y2goZSl7fWlmKGEpZm9yKHZhciBuIGluIGEubSl0aHJvdyBuZXcgX3QuZyg1NSl9ZGVsZXRlIGUucGFyZW50Lm1bZS5uYW1lXSxlLnBhcmVudC50aW1lc3RhbXA9RGF0ZS5ub3coKSxlLm5hbWU9cix0Lm1bcl09ZSx0LnRpbWVzdGFtcD1lLnBhcmVudC50aW1lc3RhbXAsZS5wYXJlbnQ9dH0sdW5saW5rKGUsdCl7ZGVsZXRlIGUubVt0XSxlLnRpbWVzdGFtcD1EYXRlLm5vdygpfSxybWRpcihlLHQpe3ZhciByLGE9SmUoZSx0KTtmb3IociBpbiBhLm0pdGhyb3cgbmV3IF90LmcoNTUpO2RlbGV0ZSBlLm1bdF0sZS50aW1lc3RhbXA9RGF0ZS5ub3coKX0scmVhZGRpcihlKXt2YXIgdCxyPVsiLiIsIi4uIl07Zm9yKHQgaW4gZS5tKWUubS5oYXNPd25Qcm9wZXJ0eSh0KSYmci5wdXNoKHQpO3JldHVybiByfSxzeW1saW5rOihlLHQscik9PigoZT1ZZS5jcmVhdGVOb2RlKGUsdCw0MTQ3MSwwKSkubGluaz1yLGUpLHJlYWRsaW5rKGUpe2lmKDQwOTYwIT0oNjE0NDAmZS5tb2RlKSl0aHJvdyBuZXcgX3QuZygyOCk7cmV0dXJuIGUubGlua319LGw6e3JlYWQoZSx0LHIsYSxuKXt2YXIgaT1lLm5vZGUubTtpZihuPj1lLm5vZGUubylyZXR1cm4gMDtpZihOKDA8PShlPU1hdGgubWluKGUubm9kZS5vLW4sYSkpKSw4PGUmJmkuc3ViYXJyYXkpdC5zZXQoaS5zdWJhcnJheShuLG4rZSkscik7ZWxzZSBmb3IoYT0wO2E8ZTthKyspdFtyK2FdPWlbbithXTtyZXR1cm4gZX0sd3JpdGUoZSx0LHIsYSxuLGkpe2lmKE4oISh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSx0LmJ1ZmZlcj09PVMuYnVmZmVyJiYoaT0hMSksIWEpcmV0dXJuIDA7aWYoKGU9ZS5ub2RlKS50aW1lc3RhbXA9RGF0ZS5ub3coKSx0LnN1YmFycmF5JiYoIWUubXx8ZS5tLnN1YmFycmF5KSl7aWYoaSlyZXR1cm4gTigwPT09biwiY2FuT3duIG11c3QgaW1wbHkgbm8gd2VpcmQgcG9zaXRpb24gaW5zaWRlIHRoZSBmaWxlIiksZS5tPXQuc3ViYXJyYXkocixyK2EpLGUubz1hO2lmKDA9PT1lLm8mJjA9PT1uKXJldHVybiBlLm09dC5zbGljZShyLHIrYSksZS5vPWE7aWYobithPD1lLm8pcmV0dXJuIGUubS5zZXQodC5zdWJhcnJheShyLHIrYSksbiksYX1pZihWZShlLG4rYSksZS5tLnN1YmFycmF5JiZ0LnN1YmFycmF5KWUubS5zZXQodC5zdWJhcnJheShyLHIrYSksbik7ZWxzZSBmb3IoaT0wO2k8YTtpKyspZS5tW24raV09dFtyK2ldO3JldHVybiBlLm89TWF0aC5tYXgoZS5vLG4rYSksYX0sRChlLHQscil7aWYoMT09PXI/dCs9ZS5wb3NpdGlvbjoyPT09ciYmX3QuaXNGaWxlKGUubm9kZS5tb2RlKSYmKHQrPWUubm9kZS5vKSwwPnQpdGhyb3cgbmV3IF90LmcoMjgpO3JldHVybiB0fSxUKGUsdCxyKXtWZShlLm5vZGUsdCtyKSxlLm5vZGUubz1NYXRoLm1heChlLm5vZGUubyx0K3IpfSxTKGUsdCxyLGEsbil7aWYoIV90LmlzRmlsZShlLm5vZGUubW9kZSkpdGhyb3cgbmV3IF90LmcoNDMpO2lmKGU9ZS5ub2RlLm0sMiZufHxlLmJ1ZmZlciE9PVMuYnVmZmVyKXtpZigoMDxyfHxyK3Q8ZS5sZW5ndGgpJiYoZT1lLnN1YmFycmF5P2Uuc3ViYXJyYXkocixyK3QpOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUscixyK3QpKSxyPSEwLCEodD1CZSgpKSl0aHJvdyBuZXcgX3QuZyg0OCk7Uy5zZXQoZSx0KX1lbHNlIHI9ITEsdD1lLmJ5dGVPZmZzZXQ7cmV0dXJue1JhOnQsQWE6cn19LFY6KGUsdCxyLGEpPT4oWWUubC53cml0ZShlLHQsMCxhLHIsITEpLDApfX0samU9KGUsdCxyKT0+e3ZhciBhPVgoYGFsICR7ZX1gKTtwKGUsKHI9PntOKHIsYExvYWRpbmcgZGF0YSBmaWxlICIke2V9IiBmYWlsZWQgKG5vIGFycmF5QnVmZmVyKS5gKSx0KG5ldyBVaW50OEFycmF5KHIpKSxhJiZaKGEpfSksKCgpPT57aWYoIXIpdGhyb3dgTG9hZGluZyBkYXRhIGZpbGUgIiR7ZX0iIGZhaWxlZC5gO3IoKX0pKSxhJiZKKGEpfSx6ZT1bXSxIZT0oZSx0LHIsYSk9PnsidW5kZWZpbmVkIiE9dHlwZW9mIEJyb3dzZXImJkJyb3dzZXIuUigpO3ZhciBuPSExO3JldHVybiB6ZS5mb3JFYWNoKChpPT57IW4mJmkuY2FuSGFuZGxlKHQpJiYoaS5oYW5kbGUoZSx0LHIsYSksbj0hMCl9KSksbn0sJGU9KGUsdCk9Pnt2YXIgcj0wO3JldHVybiBlJiYocnw9MzY1KSx0JiYocnw9MTQ2KSxyfSxHZT17MDoiU3VjY2VzcyIsMToiQXJnIGxpc3QgdG9vIGxvbmciLDI6IlBlcm1pc3Npb24gZGVuaWVkIiwzOiJBZGRyZXNzIGFscmVhZHkgaW4gdXNlIiw0OiJBZGRyZXNzIG5vdCBhdmFpbGFibGUiLDU6IkFkZHJlc3MgZmFtaWx5IG5vdCBzdXBwb3J0ZWQgYnkgcHJvdG9jb2wgZmFtaWx5Iiw2OiJObyBtb3JlIHByb2Nlc3NlcyIsNzoiU29ja2V0IGFscmVhZHkgY29ubmVjdGVkIiw4OiJCYWQgZmlsZSBudW1iZXIiLDk6IlRyeWluZyB0byByZWFkIHVucmVhZGFibGUgbWVzc2FnZSIsMTA6Ik1vdW50IGRldmljZSBidXN5IiwxMToiT3BlcmF0aW9uIGNhbmNlbGVkIiwxMjoiTm8gY2hpbGRyZW4iLDEzOiJDb25uZWN0aW9uIGFib3J0ZWQiLDE0OiJDb25uZWN0aW9uIHJlZnVzZWQiLDE1OiJDb25uZWN0aW9uIHJlc2V0IGJ5IHBlZXIiLDE2OiJGaWxlIGxvY2tpbmcgZGVhZGxvY2sgZXJyb3IiLDE3OiJEZXN0aW5hdGlvbiBhZGRyZXNzIHJlcXVpcmVkIiwxODoiTWF0aCBhcmcgb3V0IG9mIGRvbWFpbiBvZiBmdW5jIiwxOToiUXVvdGEgZXhjZWVkZWQiLDIwOiJGaWxlIGV4aXN0cyIsMjE6IkJhZCBhZGRyZXNzIiwyMjoiRmlsZSB0b28gbGFyZ2UiLDIzOiJIb3N0IGlzIHVucmVhY2hhYmxlIiwyNDoiSWRlbnRpZmllciByZW1vdmVkIiwyNToiSWxsZWdhbCBieXRlIHNlcXVlbmNlIiwyNjoiQ29ubmVjdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzIiwyNzoiSW50ZXJydXB0ZWQgc3lzdGVtIGNhbGwiLDI4OiJJbnZhbGlkIGFyZ3VtZW50IiwyOToiSS9PIGVycm9yIiwzMDoiU29ja2V0IGlzIGFscmVhZHkgY29ubmVjdGVkIiwzMToiSXMgYSBkaXJlY3RvcnkiLDMyOiJUb28gbWFueSBzeW1ib2xpYyBsaW5rcyIsMzM6IlRvbyBtYW55IG9wZW4gZmlsZXMiLDM0OiJUb28gbWFueSBsaW5rcyIsMzU6Ik1lc3NhZ2UgdG9vIGxvbmciLDM2OiJNdWx0aWhvcCBhdHRlbXB0ZWQiLDM3OiJGaWxlIG9yIHBhdGggbmFtZSB0b28gbG9uZyIsMzg6Ik5ldHdvcmsgaW50ZXJmYWNlIGlzIG5vdCBjb25maWd1cmVkIiwzOToiQ29ubmVjdGlvbiByZXNldCBieSBuZXR3b3JrIiw0MDoiTmV0d29yayBpcyB1bnJlYWNoYWJsZSIsNDE6IlRvbyBtYW55IG9wZW4gZmlsZXMgaW4gc3lzdGVtIiw0MjoiTm8gYnVmZmVyIHNwYWNlIGF2YWlsYWJsZSIsNDM6Ik5vIHN1Y2ggZGV2aWNlIiw0NDoiTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeSIsNDU6IkV4ZWMgZm9ybWF0IGVycm9yIiw0NjoiTm8gcmVjb3JkIGxvY2tzIGF2YWlsYWJsZSIsNDc6IlRoZSBsaW5rIGhhcyBiZWVuIHNldmVyZWQiLDQ4OiJOb3QgZW5vdWdoIGNvcmUiLDQ5OiJObyBtZXNzYWdlIG9mIGRlc2lyZWQgdHlwZSIsNTA6IlByb3RvY29sIG5vdCBhdmFpbGFibGUiLDUxOiJObyBzcGFjZSBsZWZ0IG9uIGRldmljZSIsNTI6IkZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCIsNTM6IlNvY2tldCBpcyBub3QgY29ubmVjdGVkIiw1NDoiTm90IGEgZGlyZWN0b3J5Iiw1NToiRGlyZWN0b3J5IG5vdCBlbXB0eSIsNTY6IlN0YXRlIG5vdCByZWNvdmVyYWJsZSIsNTc6IlNvY2tldCBvcGVyYXRpb24gb24gbm9uLXNvY2tldCIsNTk6Ik5vdCBhIHR5cGV3cml0ZXIiLDYwOiJObyBzdWNoIGRldmljZSBvciBhZGRyZXNzIiw2MToiVmFsdWUgdG9vIGxhcmdlIGZvciBkZWZpbmVkIGRhdGEgdHlwZSIsNjI6IlByZXZpb3VzIG93bmVyIGRpZWQiLDYzOiJOb3Qgc3VwZXItdXNlciIsNjQ6IkJyb2tlbiBwaXBlIiw2NToiUHJvdG9jb2wgZXJyb3IiLDY2OiJVbmtub3duIHByb3RvY29sIiw2NzoiUHJvdG9jb2wgd3JvbmcgdHlwZSBmb3Igc29ja2V0Iiw2ODoiTWF0aCByZXN1bHQgbm90IHJlcHJlc2VudGFibGUiLDY5OiJSZWFkIG9ubHkgZmlsZSBzeXN0ZW0iLDcwOiJJbGxlZ2FsIHNlZWsiLDcxOiJObyBzdWNoIHByb2Nlc3MiLDcyOiJTdGFsZSBmaWxlIGhhbmRsZSIsNzM6IkNvbm5lY3Rpb24gdGltZWQgb3V0Iiw3NDoiVGV4dCBmaWxlIGJ1c3kiLDc1OiJDcm9zcy1kZXZpY2UgbGluayIsMTAwOiJEZXZpY2Ugbm90IGEgc3RyZWFtIiwxMDE6IkJhZCBmb250IGZpbGUgZm10IiwxMDI6IkludmFsaWQgc2xvdCIsMTAzOiJJbnZhbGlkIHJlcXVlc3QgY29kZSIsMTA0OiJObyBhbm9kZSIsMTA1OiJCbG9jayBkZXZpY2UgcmVxdWlyZWQiLDEwNjoiQ2hhbm5lbCBudW1iZXIgb3V0IG9mIHJhbmdlIiwxMDc6IkxldmVsIDMgaGFsdGVkIiwxMDg6IkxldmVsIDMgcmVzZXQiLDEwOToiTGluayBudW1iZXIgb3V0IG9mIHJhbmdlIiwxMTA6IlByb3RvY29sIGRyaXZlciBub3QgYXR0YWNoZWQiLDExMToiTm8gQ1NJIHN0cnVjdHVyZSBhdmFpbGFibGUiLDExMjoiTGV2ZWwgMiBoYWx0ZWQiLDExMzoiSW52YWxpZCBleGNoYW5nZSIsMTE0OiJJbnZhbGlkIHJlcXVlc3QgZGVzY3JpcHRvciIsMTE1OiJFeGNoYW5nZSBmdWxsIiwxMTY6Ik5vIGRhdGEgKGZvciBubyBkZWxheSBpbykiLDExNzoiVGltZXIgZXhwaXJlZCIsMTE4OiJPdXQgb2Ygc3RyZWFtcyByZXNvdXJjZXMiLDExOToiTWFjaGluZSBpcyBub3Qgb24gdGhlIG5ldHdvcmsiLDEyMDoiUGFja2FnZSBub3QgaW5zdGFsbGVkIiwxMjE6IlRoZSBvYmplY3QgaXMgcmVtb3RlIiwxMjI6IkFkdmVydGlzZSBlcnJvciIsMTIzOiJTcm1vdW50IGVycm9yIiwxMjQ6IkNvbW11bmljYXRpb24gZXJyb3Igb24gc2VuZCIsMTI1OiJDcm9zcyBtb3VudCBwb2ludCAobm90IHJlYWxseSBlcnJvcikiLDEyNjoiR2l2ZW4gbG9nLiBuYW1lIG5vdCB1bmlxdWUiLDEyNzoiZi5kLiBpbnZhbGlkIGZvciB0aGlzIG9wZXJhdGlvbiIsMTI4OiJSZW1vdGUgYWRkcmVzcyBjaGFuZ2VkIiwxMjk6IkNhbiAgIGFjY2VzcyBhIG5lZWRlZCBzaGFyZWQgbGliIiwxMzA6IkFjY2Vzc2luZyBhIGNvcnJ1cHRlZCBzaGFyZWQgbGliIiwxMzE6Ii5saWIgc2VjdGlvbiBpbiBhLm91dCBjb3JydXB0ZWQiLDEzMjoiQXR0ZW1wdGluZyB0byBsaW5rIGluIHRvbyBtYW55IGxpYnMiLDEzMzoiQXR0ZW1wdGluZyB0byBleGVjIGEgc2hhcmVkIGxpYnJhcnkiLDEzNToiU3RyZWFtcyBwaXBlIGVycm9yIiwxMzY6IlRvbyBtYW55IHVzZXJzIiwxMzc6IlNvY2tldCB0eXBlIG5vdCBzdXBwb3J0ZWQiLDEzODoiTm90IHN1cHBvcnRlZCIsMTM5OiJQcm90b2NvbCBmYW1pbHkgbm90IHN1cHBvcnRlZCIsMTQwOiJDYW4ndCBzZW5kIGFmdGVyIHNvY2tldCBzaHV0ZG93biIsMTQxOiJUb28gbWFueSByZWZlcmVuY2VzIiwxNDI6Ikhvc3QgaXMgZG93biIsMTQ4OiJObyBtZWRpdW0gKGluIHRhcGUgZHJpdmUpIiwxNTY6IkxldmVsIDIgbm90IHN5bmNocm9uaXplZCJ9LFdlPXtFUEVSTTo2MyxFTk9FTlQ6NDQsRVNSQ0g6NzEsRUlOVFI6MjcsRUlPOjI5LEVOWElPOjYwLEUyQklHOjEsRU5PRVhFQzo0NSxFQkFERjo4LEVDSElMRDoxMixFQUdBSU46NixFV09VTERCTE9DSzo2LEVOT01FTTo0OCxFQUNDRVM6MixFRkFVTFQ6MjEsRU5PVEJMSzoxMDUsRUJVU1k6MTAsRUVYSVNUOjIwLEVYREVWOjc1LEVOT0RFVjo0MyxFTk9URElSOjU0LEVJU0RJUjozMSxFSU5WQUw6MjgsRU5GSUxFOjQxLEVNRklMRTozMyxFTk9UVFk6NTksRVRYVEJTWTo3NCxFRkJJRzoyMixFTk9TUEM6NTEsRVNQSVBFOjcwLEVST0ZTOjY5LEVNTElOSzozNCxFUElQRTo2NCxFRE9NOjE4LEVSQU5HRTo2OCxFTk9NU0c6NDksRUlEUk06MjQsRUNIUk5HOjEwNixFTDJOU1lOQzoxNTYsRUwzSExUOjEwNyxFTDNSU1Q6MTA4LEVMTlJORzoxMDksRVVOQVRDSDoxMTAsRU5PQ1NJOjExMSxFTDJITFQ6MTEyLEVERUFETEs6MTYsRU5PTENLOjQ2LEVCQURFOjExMyxFQkFEUjoxMTQsRVhGVUxMOjExNSxFTk9BTk86MTA0LEVCQURSUUM6MTAzLEVCQURTTFQ6MTAyLEVERUFETE9DSzoxNixFQkZPTlQ6MTAxLEVOT1NUUjoxMDAsRU5PREFUQToxMTYsRVRJTUU6MTE3LEVOT1NSOjExOCxFTk9ORVQ6MTE5LEVOT1BLRzoxMjAsRVJFTU9URToxMjEsRU5PTElOSzo0NyxFQURWOjEyMixFU1JNTlQ6MTIzLEVDT01NOjEyNCxFUFJPVE86NjUsRU1VTFRJSE9QOjM2LEVET1RET1Q6MTI1LEVCQURNU0c6OSxFTk9UVU5JUToxMjYsRUJBREZEOjEyNyxFUkVNQ0hHOjEyOCxFTElCQUNDOjEyOSxFTElCQkFEOjEzMCxFTElCU0NOOjEzMSxFTElCTUFYOjEzMixFTElCRVhFQzoxMzMsRU5PU1lTOjUyLEVOT1RFTVBUWTo1NSxFTkFNRVRPT0xPTkc6MzcsRUxPT1A6MzIsRU9QTk9UU1VQUDoxMzgsRVBGTk9TVVBQT1JUOjEzOSxFQ09OTlJFU0VUOjE1LEVOT0JVRlM6NDIsRUFGTk9TVVBQT1JUOjUsRVBST1RPVFlQRTo2NyxFTk9UU09DSzo1NyxFTk9QUk9UT09QVDo1MCxFU0hVVERPV046MTQwLEVDT05OUkVGVVNFRDoxNCxFQUREUklOVVNFOjMsRUNPTk5BQk9SVEVEOjEzLEVORVRVTlJFQUNIOjQwLEVORVRET1dOOjM4LEVUSU1FRE9VVDo3MyxFSE9TVERPV046MTQyLEVIT1NUVU5SRUFDSDoyMyxFSU5QUk9HUkVTUzoyNixFQUxSRUFEWTo3LEVERVNUQUREUlJFUToxNyxFTVNHU0laRTozNSxFUFJPVE9OT1NVUFBPUlQ6NjYsRVNPQ0tUTk9TVVBQT1JUOjEzNyxFQUREUk5PVEFWQUlMOjQsRU5FVFJFU0VUOjM5LEVJU0NPTk46MzAsRU5PVENPTk46NTMsRVRPT01BTllSRUZTOjE0MSxFVVNFUlM6MTM2LEVEUVVPVDoxOSxFU1RBTEU6NzIsRU5PVFNVUDoxMzgsRU5PTUVESVVNOjE0OCxFSUxTRVE6MjUsRU9WRVJGTE9XOjYxLEVDQU5DRUxFRDoxMSxFTk9UUkVDT1ZFUkFCTEU6NTYsRU9XTkVSREVBRDo2MixFU1RSUElQRToxMzV9LHFlPWU9PmUucmVwbGFjZSgvXGJfWltcd1xkX10rL2csKGZ1bmN0aW9uKGUpe3JldHVybiBnZSgid2FybmluZzogYnVpbGQgd2l0aCAtc0RFTUFOR0xFX1NVUFBPUlQgdG8gbGluayBpbiBsaWJjeHhhYmkgZGVtYW5nbGluZyIpLGU9PWU/ZTplKyIgWyIrZSsiXSJ9KSk7ZnVuY3Rpb24gS2UoZSx0KXtfdC5wYVtlXT17bDp0fX1mdW5jdGlvbiBYZShlKXtyZXR1cm4gMTYzODQ9PSg2MTQ0MCZlKX1mdW5jdGlvbiBKZShlLHQpe3ZhciByO2lmKHI9KHI9bnQoZSwieCIpKT9yOmUuaC5sb29rdXA/MDoyKXRocm93IG5ldyBfdC5nKHIsZSk7Zm9yKHI9X3QuRltldChlLmlkLHQpXTtyO3I9ci5OKXt2YXIgYT1yLm5hbWU7aWYoci5wYXJlbnQuaWQ9PT1lLmlkJiZhPT09dClyZXR1cm4gcn1yZXR1cm4gX3QubG9va3VwKGUsdCl9ZnVuY3Rpb24gWmUoZSx0PXt9KXtpZighKGU9U2UoZSkpKXJldHVybntwYXRoOiIiLG5vZGU6bnVsbH07aWYoODwodD1PYmplY3QuYXNzaWduKHtiYTohMCxrYTowfSx0KSkua2EpdGhyb3cgbmV3IF90LmcoMzIpO2U9ZS5zcGxpdCgiLyIpLmZpbHRlcigoZT0+ISFlKSk7Zm9yKHZhciByPV90LnJvb3QsYT0iLyIsbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1uPT09ZS5sZW5ndGgtMTtpZihpJiZ0LnBhcmVudClicmVhaztpZihyPUplKHIsZVtuXSksYT13ZShhKyIvIitlW25dKSxyLkEmJighaXx8aSYmdC5iYSkmJihyPXIuQS5yb290KSwhaXx8dC5CKWZvcihpPTA7NDA5NjA9PSg2MTQ0MCZyLm1vZGUpOylpZihyPV90LnJlYWRsaW5rKGEpLHI9WmUoYT1TZSh5ZShhKSxyKSx7a2E6dC5rYSsxfSkubm9kZSw0MDxpKyspdGhyb3cgbmV3IF90LmcoMzIpfXJldHVybntwYXRoOmEsbm9kZTpyfX1mdW5jdGlvbiBRZShlKXtmb3IodmFyIHQ7Oyl7aWYoX3QuWihlKSlyZXR1cm4gZT1lLnMudWEsdD8iLyIhPT1lW2UubGVuZ3RoLTFdP2Ake2V9LyR7dH1gOmUrdDplO3Q9dD9gJHtlLm5hbWV9LyR7dH1gOmUubmFtZSxlPWUucGFyZW50fX1mdW5jdGlvbiBldChlLHQpe2Zvcih2YXIgcj0wLGE9MDthPHQubGVuZ3RoO2ErKylyPShyPDw1KS1yK3QuY2hhckNvZGVBdChhKXwwO3JldHVybihlK3I+Pj4wKSVfdC5GLmxlbmd0aH1mdW5jdGlvbiB0dChlKXt2YXIgdD1ldChlLnBhcmVudC5pZCxlLm5hbWUpO2UuTj1fdC5GW3RdLF90LkZbdF09ZX1mdW5jdGlvbiBydChlKXt2YXIgdD1ldChlLnBhcmVudC5pZCxlLm5hbWUpO2lmKF90LkZbdF09PT1lKV90LkZbdF09ZS5OO2Vsc2UgZm9yKHQ9X3QuRlt0XTt0Oyl7aWYodC5OPT09ZSl7dC5OPWUuTjticmVha310PXQuTn19ZnVuY3Rpb24gYXQoZSl7dmFyIHQ9WyJyIiwidyIsInJ3Il1bMyZlXTtyZXR1cm4gNTEyJmUmJih0Kz0idyIpLHR9ZnVuY3Rpb24gbnQoZSx0KXtyZXR1cm4gX3QudGE/MDohdC5pbmNsdWRlcygiciIpfHwyOTImZS5tb2RlP3QuaW5jbHVkZXMoInciKSYmISgxNDYmZS5tb2RlKXx8dC5pbmNsdWRlcygieCIpJiYhKDczJmUubW9kZSk/MjowOjJ9ZnVuY3Rpb24gaXQoZSx0KXt0cnl7cmV0dXJuIEplKGUsdCksMjB9Y2F0Y2goZSl7fXJldHVybiBudChlLCJ3eCIpfWZ1bmN0aW9uIHV0KGUsdCxyKXt0cnl7dmFyIGE9SmUoZSx0KX1jYXRjaChlKXtyZXR1cm4gZS51fWlmKGU9bnQoZSwid3giKSlyZXR1cm4gZTtpZihyKXtpZighWGUoYS5tb2RlKSlyZXR1cm4gNTQ7aWYoX3QuWihhKXx8UWUoYSk9PT1fdC5jd2QoKSlyZXR1cm4gMTB9ZWxzZSBpZihYZShhLm1vZGUpKXJldHVybiAzMTtyZXR1cm4gMH1mdW5jdGlvbiBvdCgpe2Zvcih2YXIgZT0wO2U8PV90LnhhO2UrKylpZighX3Quc3RyZWFtc1tlXSlyZXR1cm4gZTt0aHJvdyBuZXcgX3QuZygzMyl9ZnVuY3Rpb24gc3QoZSl7aWYoIShlPV90LnFhKGUpKSl0aHJvdyBuZXcgX3QuZyg4KTtyZXR1cm4gZX1mdW5jdGlvbiBsdChlLHQ9LTEpe3JldHVybiBfdC5YfHwoX3QuWD1mdW5jdGlvbigpe3RoaXMuST17fX0sX3QuWC5wcm90b3R5cGU9e30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoX3QuWC5wcm90b3R5cGUse29iamVjdDp7Z2V0KCl7cmV0dXJuIHRoaXMubm9kZX0sc2V0KGUpe3RoaXMubm9kZT1lfX0sZmxhZ3M6e2dldCgpe3JldHVybiB0aGlzLkkuZmxhZ3N9LHNldChlKXt0aGlzLkkuZmxhZ3M9ZX19LHBvc2l0aW9uOntnZXQoKXtyZXR1cm4gdGhpcy5JLnBvc2l0aW9ufSxzZXQoZSl7dGhpcy5JLnBvc2l0aW9uPWV9fX0pKSxlPU9iamVjdC5hc3NpZ24obmV3IF90LlgsZSksLTE9PXQmJih0PW90KCkpLGUuZmQ9dCxfdC5zdHJlYW1zW3RdPWV9ZnVuY3Rpb24gaHQoZSl7dmFyIHQ9W107Zm9yKGU9W2VdO2UubGVuZ3RoOyl7dmFyIHI9ZS5wb3AoKTt0LnB1c2gociksZS5wdXNoLmFwcGx5KGUsci5VKX1yZXR1cm4gdH1mdW5jdGlvbiBjdChlLHQscil7cmV0dXJuIHZvaWQgMD09PXImJihyPXQsdD00MzgpLF90LkooZSw4MTkyfHQscil9ZnVuY3Rpb24gZHQoKXtfdC5nfHwoX3QuZz1mdW5jdGlvbihlLHQpe3RoaXMubmFtZT0iRXJybm9FcnJvciIsdGhpcy5ub2RlPXQsdGhpcy5TYT1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy51PWUsV2UpaWYoV2VbdF09PT1lKXt0aGlzLmNvZGU9dDticmVha319LHRoaXMuU2EoZSksdGhpcy5tZXNzYWdlPUdlW2VdLHRoaXMuc3RhY2smJihPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTpFcnJvcigpLnN0YWNrLHdyaXRhYmxlOiEwfSksdGhpcy5zdGFjaz1xZSh0aGlzLnN0YWNrKSl9LF90LmcucHJvdG90eXBlPUVycm9yKCksX3QuZy5wcm90b3R5cGUuY29uc3RydWN0b3I9X3QuZyxbNDRdLmZvckVhY2goKGU9PntfdC5kYVtlXT1uZXcgX3QuZyhlKSxfdC5kYVtlXS5zdGFjaz0iPGdlbmVyaWMgZXJyb3IsIG5vIHN0YWNrPiJ9KSkpfWZ1bmN0aW9uIGZ0KGUsdCl7dHJ5e3ZhciByPVplKGUse0I6IXR9KTtlPXIucGF0aH1jYXRjaChlKXt9dmFyIGE9e1o6ITEsZXhpc3RzOiExLGVycm9yOjAsbmFtZTpudWxsLHBhdGg6bnVsbCxvYmplY3Q6bnVsbCxPYTohMSxRYTpudWxsLFBhOm51bGx9O3RyeXtyPVplKGUse3BhcmVudDohMH0pLGEuT2E9ITAsYS5RYT1yLnBhdGgsYS5QYT1yLm5vZGUsYS5uYW1lPXZlKGUpLHI9WmUoZSx7QjohdH0pLGEuZXhpc3RzPSEwLGEucGF0aD1yLnBhdGgsYS5vYmplY3Q9ci5ub2RlLGEubmFtZT1yLm5vZGUubmFtZSxhLlo9Ii8iPT09ci5wYXRofWNhdGNoKGUpe2EuZXJyb3I9ZS51fXJldHVybiBhfWZ1bmN0aW9uIHB0KGUsdCxyLGEpe3JldHVybiBlPSJzdHJpbmciPT10eXBlb2YgZT9lOlFlKGUpLHQ9d2UoZSsiLyIrdCksX3QuY3JlYXRlKHQsJGUocixhKSl9ZnVuY3Rpb24gbXQoZSl7aWYoIShlLkxhfHxlLk1hfHxlLmxpbmt8fGUubSkpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3QpdGhyb3cgRXJyb3IoIkxhenkgbG9hZGluZyBzaG91bGQgaGF2ZSBiZWVuIHBlcmZvcm1lZCAoY29udGVudHMgc2V0KSBpbiBjcmVhdGVMYXp5RmlsZSwgYnV0IGl0IHdhcyBub3QuIExhenkgbG9hZGluZyBvbmx5IHdvcmtzIGluIHdlYiB3b3JrZXJzLiBVc2UgLS1lbWJlZC1maWxlIG9yIC0tcHJlbG9hZC1maWxlIGluIGVtY2Mgb24gdGhlIG1haW4gdGhyZWFkLiIpO2lmKCFmKXRocm93IEVycm9yKCJDYW5ub3QgbG9hZCB3aXRob3V0IHJlYWQoKSBvciBYTUxIdHRwUmVxdWVzdC4iKTt0cnl7ZS5tPVBlKGYoZS51cmwpLCEwKSxlLm89ZS5tLmxlbmd0aH1jYXRjaChlKXt0aHJvdyBuZXcgX3QuZygyOSl9fX12YXIgX3Q9e3Jvb3Q6bnVsbCxVOltdLHBhOnt9LHN0cmVhbXM6W10sTmE6MSxGOm51bGwsb2E6Ii8iLFk6ITEsdGE6ITAsZzpudWxsLGRhOnt9LEZhOm51bGwsVzowLGNyZWF0ZU5vZGU6KGUsdCxyLGEpPT4oTigib2JqZWN0Ij09dHlwZW9mIGUpLHR0KGU9bmV3IF90LndhKGUsdCxyLGEpKSxlKSxaOmU9PmU9PT1lLnBhcmVudCxpc0ZpbGU6ZT0+MzI3Njg9PSg2MTQ0MCZlKSxpc0ZJRk86ZT0+NDA5Nj09KDYxNDQwJmUpLGlzU29ja2V0OmU9PiEoNDkxNTImfmUpLHhhOjQwOTYscWE6ZT0+X3Quc3RyZWFtc1tlXSxEYTp7b3BlbihlKXtlLmw9X3QuR2EoZS5ub2RlLnJkZXYpLmwsZS5sLm9wZW4mJmUubC5vcGVuKGUpfSxEKCl7dGhyb3cgbmV3IF90LmcoNzApfX0saGE6ZT0+ZT4+OCxuYjplPT4yNTUmZSxNOihlLHQpPT5lPDw4fHQsR2E6ZT0+X3QucGFbZV0sdmEoZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiBOKDA8X3QuVyksX3QuVy0tLHQoZSl9ZnVuY3Rpb24gYShlKXtpZihlKXtpZighYS5FYSlyZXR1cm4gYS5FYT0hMCxyKGUpfWVsc2UrK2k+PW4ubGVuZ3RoJiZyKG51bGwpfSJmdW5jdGlvbiI9PXR5cGVvZiBlJiYodD1lLGU9ITEpLF90LlcrKywxPF90LlcmJkwoYHdhcm5pbmc6ICR7X3QuV30gRlMuc3luY2ZzIG9wZXJhdGlvbnMgaW4gZmxpZ2h0IGF0IG9uY2UsIHByb2JhYmx5IGp1c3QgZG9pbmcgZXh0cmEgd29ya2ApO3ZhciBuPWh0KF90LnJvb3QucyksaT0wO24uZm9yRWFjaCgodD0+e2lmKCF0LnR5cGUudmEpcmV0dXJuIGEobnVsbCk7dC50eXBlLnZhKHQsZSxhKX0pKX0scyhlLHQscil7aWYoInN0cmluZyI9PXR5cGVvZiBlKXRocm93IGU7dmFyIGE9Ii8iPT09cixuPSFyO2lmKGEmJl90LnJvb3QpdGhyb3cgbmV3IF90LmcoMTApO2lmKCFhJiYhbil7dmFyIGk9WmUocix7YmE6ITF9KTtpZihyPWkucGF0aCwoaT1pLm5vZGUpLkEpdGhyb3cgbmV3IF90LmcoMTApO2lmKCFYZShpLm1vZGUpKXRocm93IG5ldyBfdC5nKDU0KX1yZXR1cm4gdD17dHlwZTplLHJiOnQsdWE6cixVOltdfSwoZT1lLnModCkpLnM9dCx0LnJvb3Q9ZSxhP190LnJvb3Q9ZTppJiYoaS5BPXQsaS5zJiZpLnMuVS5wdXNoKHQpKSxlfSx4YihlKXtpZighKGU9WmUoZSx7YmE6ITF9KSkubm9kZS5BKXRocm93IG5ldyBfdC5nKDI4KTt2YXIgdD0oZT1lLm5vZGUpLkEscj1odCh0KTtPYmplY3Qua2V5cyhfdC5GKS5mb3JFYWNoKChlPT57Zm9yKGU9X3QuRltlXTtlOyl7dmFyIHQ9ZS5OO3IuaW5jbHVkZXMoZS5zKSYmcnQoZSksZT10fX0pKSxlLkE9bnVsbCxOKC0xIT09KHQ9ZS5zLlUuaW5kZXhPZih0KSkpLGUucy5VLnNwbGljZSh0LDEpfSxsb29rdXA6KGUsdCk9PmUuaC5sb29rdXAoZSx0KSxKKGUsdCxyKXt2YXIgYT1aZShlLHtwYXJlbnQ6ITB9KS5ub2RlO2lmKCEoZT12ZShlKSl8fCIuIj09PWV8fCIuLiI9PT1lKXRocm93IG5ldyBfdC5nKDI4KTt2YXIgbj1pdChhLGUpO2lmKG4pdGhyb3cgbmV3IF90Lmcobik7aWYoIWEuaC5KKXRocm93IG5ldyBfdC5nKDYzKTtyZXR1cm4gYS5oLkooYSxlLHQscil9LGNyZWF0ZTooZSx0KT0+X3QuSihlLDQwOTUmKHZvaWQgMCE9PXQ/dDo0MzgpfDMyNzY4LDApLG1rZGlyOihlLHQpPT5fdC5KKGUsMTAyMyYodm9pZCAwIT09dD90OjUxMSl8MTYzODQsMCksb2IoZSx0KXtlPWUuc3BsaXQoIi8iKTtmb3IodmFyIHI9IiIsYT0wO2E8ZS5sZW5ndGg7KythKWlmKGVbYV0pe3IrPSIvIitlW2FdO3RyeXtfdC5ta2RpcihyLHQpfWNhdGNoKGUpe2lmKDIwIT1lLnUpdGhyb3cgZX19fSxzeW1saW5rKGUsdCl7aWYoIVNlKGUpKXRocm93IG5ldyBfdC5nKDQ0KTt2YXIgcj1aZSh0LHtwYXJlbnQ6ITB9KS5ub2RlO2lmKCFyKXRocm93IG5ldyBfdC5nKDQ0KTt2YXIgYT1pdChyLHQ9dmUodCkpO2lmKGEpdGhyb3cgbmV3IF90LmcoYSk7aWYoIXIuaC5zeW1saW5rKXRocm93IG5ldyBfdC5nKDYzKTtyZXR1cm4gci5oLnN5bWxpbmsocix0LGUpfSxyZW5hbWUoZSx0KXt2YXIgcj15ZShlKSxhPXllKHQpLG49dmUoZSksaT12ZSh0KSx1PVplKGUse3BhcmVudDohMH0pLG89dS5ub2RlO2lmKHU9KHU9WmUodCx7cGFyZW50OiEwfSkpLm5vZGUsIW98fCF1KXRocm93IG5ldyBfdC5nKDQ0KTtpZihvLnMhPT11LnMpdGhyb3cgbmV3IF90LmcoNzUpO3ZhciBzPUplKG8sbik7aWYoIi4iIT09KGU9QWUoZSxhKSkuY2hhckF0KDApKXRocm93IG5ldyBfdC5nKDI4KTtpZigiLiIhPT0oZT1BZSh0LHIpKS5jaGFyQXQoMCkpdGhyb3cgbmV3IF90LmcoNTUpO3RyeXt2YXIgbD1KZSh1LGkpfWNhdGNoKGUpe31pZihzIT09bCl7aWYobj11dChvLG4sdD1YZShzLm1vZGUpKSl0aHJvdyBuZXcgX3QuZyhuKTtpZihuPWw/dXQodSxpLHQpOml0KHUsaSkpdGhyb3cgbmV3IF90Lmcobik7aWYoIW8uaC5yZW5hbWUpdGhyb3cgbmV3IF90LmcoNjMpO2lmKHMuQXx8bCYmbC5BKXRocm93IG5ldyBfdC5nKDEwKTtpZih1IT09byYmKG49bnQobywidyIpKSl0aHJvdyBuZXcgX3QuZyhuKTtydChzKTt0cnl7by5oLnJlbmFtZShzLHUsaSl9Y2F0Y2goZSl7dGhyb3cgZX1maW5hbGx5e3R0KHMpfX19LHJtZGlyKGUpe3ZhciB0PVplKGUse3BhcmVudDohMH0pLm5vZGUscj1KZSh0LGU9dmUoZSkpLGE9dXQodCxlLCEwKTtpZihhKXRocm93IG5ldyBfdC5nKGEpO2lmKCF0Lmgucm1kaXIpdGhyb3cgbmV3IF90LmcoNjMpO2lmKHIuQSl0aHJvdyBuZXcgX3QuZygxMCk7dC5oLnJtZGlyKHQsZSkscnQocil9LHJlYWRkaXIoZSl7aWYoIShlPVplKGUse0I6ITB9KS5ub2RlKS5oLnJlYWRkaXIpdGhyb3cgbmV3IF90LmcoNTQpO3JldHVybiBlLmgucmVhZGRpcihlKX0sdW5saW5rKGUpe3ZhciB0PVplKGUse3BhcmVudDohMH0pLm5vZGU7aWYoIXQpdGhyb3cgbmV3IF90LmcoNDQpO3ZhciByPUplKHQsZT12ZShlKSksYT11dCh0LGUsITEpO2lmKGEpdGhyb3cgbmV3IF90LmcoYSk7aWYoIXQuaC51bmxpbmspdGhyb3cgbmV3IF90LmcoNjMpO2lmKHIuQSl0aHJvdyBuZXcgX3QuZygxMCk7dC5oLnVubGluayh0LGUpLHJ0KHIpfSxyZWFkbGluayhlKXtpZighKGU9WmUoZSkubm9kZSkpdGhyb3cgbmV3IF90LmcoNDQpO2lmKCFlLmgucmVhZGxpbmspdGhyb3cgbmV3IF90LmcoMjgpO3JldHVybiBTZShRZShlLnBhcmVudCksZS5oLnJlYWRsaW5rKGUpKX0sc3RhdChlLHQpe2lmKCEoZT1aZShlLHtCOiF0fSkubm9kZSkpdGhyb3cgbmV3IF90LmcoNDQpO2lmKCFlLmguQyl0aHJvdyBuZXcgX3QuZyg2Myk7cmV0dXJuIGUuaC5DKGUpfSxsc3RhdDplPT5fdC5zdGF0KGUsITApLGNobW9kKGUsdCxyKXtpZighKGU9InN0cmluZyI9PXR5cGVvZiBlP1plKGUse0I6IXJ9KS5ub2RlOmUpLmgudil0aHJvdyBuZXcgX3QuZyg2Myk7ZS5oLnYoZSx7bW9kZTo0MDk1JnR8LTQwOTYmZS5tb2RlLHRpbWVzdGFtcDpEYXRlLm5vdygpfSl9LGxjaG1vZChlLHQpe190LmNobW9kKGUsdCwhMCl9LGZjaG1vZChlLHQpe2U9c3QoZSksX3QuY2htb2QoZS5ub2RlLHQpfSxjaG93bihlLHQscixhKXtpZighKGU9InN0cmluZyI9PXR5cGVvZiBlP1plKGUse0I6IWF9KS5ub2RlOmUpLmgudil0aHJvdyBuZXcgX3QuZyg2Myk7ZS5oLnYoZSx7dGltZXN0YW1wOkRhdGUubm93KCl9KX0sbGNob3duKGUsdCxyKXtfdC5jaG93bihlLHQsciwhMCl9LGZjaG93bihlLHQscil7ZT1zdChlKSxfdC5jaG93bihlLm5vZGUsdCxyKX0sdHJ1bmNhdGUoZSx0KXtpZigwPnQpdGhyb3cgbmV3IF90LmcoMjgpO2lmKCEoZT0ic3RyaW5nIj09dHlwZW9mIGU/WmUoZSx7QjohMH0pLm5vZGU6ZSkuaC52KXRocm93IG5ldyBfdC5nKDYzKTtpZihYZShlLm1vZGUpKXRocm93IG5ldyBfdC5nKDMxKTtpZighX3QuaXNGaWxlKGUubW9kZSkpdGhyb3cgbmV3IF90LmcoMjgpO3ZhciByPW50KGUsInciKTtpZihyKXRocm93IG5ldyBfdC5nKHIpO2UuaC52KGUse3NpemU6dCx0aW1lc3RhbXA6RGF0ZS5ub3coKX0pfSxrYihlLHQpe2lmKCEoMjA5NzE1NSYoZT1zdChlKSkuZmxhZ3MpKXRocm93IG5ldyBfdC5nKDI4KTtfdC50cnVuY2F0ZShlLm5vZGUsdCl9LHliKGUsdCxyKXsoZT1aZShlLHtCOiEwfSkubm9kZSkuaC52KGUse3RpbWVzdGFtcDpNYXRoLm1heCh0LHIpfSl9LG9wZW4oZSx0LHIpe2lmKCIiPT09ZSl0aHJvdyBuZXcgX3QuZyg0NCk7aWYoInN0cmluZyI9PXR5cGVvZiB0KXt2YXIgYT17cjowLCJyKyI6Mix3OjU3NywidysiOjU3OCxhOjEwODksImErIjoxMDkwfVt0XTtpZih2b2lkIDA9PT1hKXRocm93IEVycm9yKGBVbmtub3duIGZpbGUgb3BlbiBtb2RlOiAke3R9YCk7dD1hfWlmKHI9NjQmdD80MDk1Jih2b2lkIDA9PT1yPzQzODpyKXwzMjc2ODowLCJvYmplY3QiPT10eXBlb2YgZSl2YXIgbj1lO2Vsc2V7ZT13ZShlKTt0cnl7bj1aZShlLHtCOiEoMTMxMDcyJnQpfSkubm9kZX1jYXRjaChlKXt9fWlmKGE9ITEsNjQmdClpZihuKXtpZigxMjgmdCl0aHJvdyBuZXcgX3QuZygyMCl9ZWxzZSBuPV90LkooZSxyLDApLGE9ITA7aWYoIW4pdGhyb3cgbmV3IF90LmcoNDQpO2lmKDgxOTI9PSg2MTQ0MCZuLm1vZGUpJiYodCY9LTUxMyksNjU1MzYmdCYmIVhlKG4ubW9kZSkpdGhyb3cgbmV3IF90LmcoNTQpO2lmKCFhJiYocj1uPzQwOTYwPT0oNjE0NDAmbi5tb2RlKT8zMjpYZShuLm1vZGUpJiYoInIiIT09YXQodCl8fDUxMiZ0KT8zMTpudChuLGF0KHQpKTo0NCkpdGhyb3cgbmV3IF90Lmcocik7cmV0dXJuIDUxMiZ0JiYhYSYmX3QudHJ1bmNhdGUobiwwKSx0Jj0tMTMxNzEzLChuPWx0KHtub2RlOm4scGF0aDpRZShuKSxmbGFnczp0LHNlZWthYmxlOiEwLHBvc2l0aW9uOjAsbDpuLmwsWGE6W10sZXJyb3I6ITF9KSkubC5vcGVuJiZuLmwub3BlbihuKSwhaS5sb2dSZWFkRmlsZXN8fDEmdHx8KF90LmphfHwoX3QuamE9e30pLGUgaW4gX3QuamF8fChfdC5qYVtlXT0xKSksbn0sY2xvc2UoZSl7aWYobnVsbD09PWUuZmQpdGhyb3cgbmV3IF90LmcoOCk7ZS5lYSYmKGUuZWE9bnVsbCk7dHJ5e2UubC5jbG9zZSYmZS5sLmNsb3NlKGUpfWNhdGNoKGUpe3Rocm93IGV9ZmluYWxseXtfdC5zdHJlYW1zW2UuZmRdPW51bGx9ZS5mZD1udWxsfSxEKGUsdCxyKXtpZihudWxsPT09ZS5mZCl0aHJvdyBuZXcgX3QuZyg4KTtpZighZS5zZWVrYWJsZXx8IWUubC5EKXRocm93IG5ldyBfdC5nKDcwKTtpZigwIT1yJiYxIT1yJiYyIT1yKXRocm93IG5ldyBfdC5nKDI4KTtyZXR1cm4gZS5wb3NpdGlvbj1lLmwuRChlLHQsciksZS5YYT1bXSxlLnBvc2l0aW9ufSxyZWFkKGUsdCxyLGEsbil7aWYoTigwPD1yKSwwPmF8fDA+bil0aHJvdyBuZXcgX3QuZygyOCk7aWYobnVsbD09PWUuZmQpdGhyb3cgbmV3IF90LmcoOCk7aWYoMT09KDIwOTcxNTUmZS5mbGFncykpdGhyb3cgbmV3IF90LmcoOCk7aWYoWGUoZS5ub2RlLm1vZGUpKXRocm93IG5ldyBfdC5nKDMxKTtpZighZS5sLnJlYWQpdGhyb3cgbmV3IF90LmcoMjgpO3ZhciBpPXZvaWQgMCE9PW47aWYoaSl7aWYoIWUuc2Vla2FibGUpdGhyb3cgbmV3IF90LmcoNzApfWVsc2Ugbj1lLnBvc2l0aW9uO3JldHVybiB0PWUubC5yZWFkKGUsdCxyLGEsbiksaXx8KGUucG9zaXRpb24rPXQpLHR9LHdyaXRlKGUsdCxyLGEsbixpKXtpZihOKDA8PXIpLDA+YXx8MD5uKXRocm93IG5ldyBfdC5nKDI4KTtpZihudWxsPT09ZS5mZCl0aHJvdyBuZXcgX3QuZyg4KTtpZighKDIwOTcxNTUmZS5mbGFncykpdGhyb3cgbmV3IF90LmcoOCk7aWYoWGUoZS5ub2RlLm1vZGUpKXRocm93IG5ldyBfdC5nKDMxKTtpZighZS5sLndyaXRlKXRocm93IG5ldyBfdC5nKDI4KTtlLnNlZWthYmxlJiYxMDI0JmUuZmxhZ3MmJl90LkQoZSwwLDIpO3ZhciB1PXZvaWQgMCE9PW47aWYodSl7aWYoIWUuc2Vla2FibGUpdGhyb3cgbmV3IF90LmcoNzApfWVsc2Ugbj1lLnBvc2l0aW9uO3JldHVybiB0PWUubC53cml0ZShlLHQscixhLG4saSksdXx8KGUucG9zaXRpb24rPXQpLHR9LFQoZSx0LHIpe2lmKG51bGw9PT1lLmZkKXRocm93IG5ldyBfdC5nKDgpO2lmKDA+dHx8MD49cil0aHJvdyBuZXcgX3QuZygyOCk7aWYoISgyMDk3MTU1JmUuZmxhZ3MpKXRocm93IG5ldyBfdC5nKDgpO2lmKCFfdC5pc0ZpbGUoZS5ub2RlLm1vZGUpJiYhWGUoZS5ub2RlLm1vZGUpKXRocm93IG5ldyBfdC5nKDQzKTtpZighZS5sLlQpdGhyb3cgbmV3IF90LmcoMTM4KTtlLmwuVChlLHQscil9LFMoZSx0LHIsYSxuKXtpZigyJmEmJiEoMiZuKSYmMiE9KDIwOTcxNTUmZS5mbGFncykpdGhyb3cgbmV3IF90LmcoMik7aWYoMT09KDIwOTcxNTUmZS5mbGFncykpdGhyb3cgbmV3IF90LmcoMik7aWYoIWUubC5TKXRocm93IG5ldyBfdC5nKDQzKTtyZXR1cm4gZS5sLlMoZSx0LHIsYSxuKX0sVjooZSx0LHIsYSxuKT0+KE4oMDw9ciksZS5sLlY/ZS5sLlYoZSx0LHIsYSxuKTowKSxxYjooKT0+MCxmYShlLHQscil7aWYoIWUubC5mYSl0aHJvdyBuZXcgX3QuZyg1OSk7cmV0dXJuIGUubC5mYShlLHQscil9LHJlYWRGaWxlKGUsdD17fSl7aWYodC5mbGFncz10LmZsYWdzfHwwLHQuZW5jb2Rpbmc9dC5lbmNvZGluZ3x8ImJpbmFyeSIsInV0ZjgiIT09dC5lbmNvZGluZyYmImJpbmFyeSIhPT10LmVuY29kaW5nKXRocm93IEVycm9yKGBJbnZhbGlkIGVuY29kaW5nIHR5cGUgIiR7dC5lbmNvZGluZ30iYCk7dmFyIHIsYT1fdC5vcGVuKGUsdC5mbGFncyk7ZT1fdC5zdGF0KGUpLnNpemU7dmFyIG49bmV3IFVpbnQ4QXJyYXkoZSk7cmV0dXJuIF90LnJlYWQoYSxuLDAsZSwwKSwidXRmOCI9PT10LmVuY29kaW5nP3I9TWUobiwwKToiYmluYXJ5Ij09PXQuZW5jb2RpbmcmJihyPW4pLF90LmNsb3NlKGEpLHJ9LHdyaXRlRmlsZShlLHQscj17fSl7aWYoci5mbGFncz1yLmZsYWdzfHw1NzcsZT1fdC5vcGVuKGUsci5mbGFncyxyLm1vZGUpLCJzdHJpbmciPT10eXBlb2YgdCl7dmFyIGE9bmV3IFVpbnQ4QXJyYXkoRmUodCkrMSk7dD14ZSh0LGEsMCxhLmxlbmd0aCksX3Qud3JpdGUoZSxhLDAsdCx2b2lkIDAsci5DYSl9ZWxzZXtpZighQXJyYXlCdWZmZXIuaXNWaWV3KHQpKXRocm93IEVycm9yKCJVbnN1cHBvcnRlZCBkYXRhIHR5cGUiKTtfdC53cml0ZShlLHQsMCx0LmJ5dGVMZW5ndGgsdm9pZCAwLHIuQ2EpfV90LmNsb3NlKGUpfSxjd2Q6KCk9Pl90Lm9hLGNoZGlyKGUpe2lmKG51bGw9PT0oZT1aZShlLHtCOiEwfSkpLm5vZGUpdGhyb3cgbmV3IF90LmcoNDQpO2lmKCFYZShlLm5vZGUubW9kZSkpdGhyb3cgbmV3IF90LmcoNTQpO3ZhciB0PW50KGUubm9kZSwieCIpO2lmKHQpdGhyb3cgbmV3IF90LmcodCk7X3Qub2E9ZS5wYXRofSxSKGUsdCxyKXtOKCFfdC5SLlksIkZTLmluaXQgd2FzIHByZXZpb3VzbHkgY2FsbGVkLiBJZiB5b3Ugd2FudCB0byBpbml0aWFsaXplIGxhdGVyIHdpdGggY3VzdG9tIHBhcmFtZXRlcnMsIHJlbW92ZSBhbnkgZWFybGllciBjYWxscyAobm90ZSB0aGF0IG9uZSBpcyBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIHRoZSBnZW5lcmF0ZWQgY29kZSkiKSxfdC5SLlk9ITAsZHQoKSxpLnN0ZGluPWV8fGkuc3RkaW4saS5zdGRvdXQ9dHx8aS5zdGRvdXQsaS5zdGRlcnI9cnx8aS5zdGRlcnIsaS5zdGRpbj9fdC5MKCIvZGV2Iiwic3RkaW4iLGkuc3RkaW4pOl90LnN5bWxpbmsoIi9kZXYvdHR5IiwiL2Rldi9zdGRpbiIpLGkuc3Rkb3V0P190LkwoIi9kZXYiLCJzdGRvdXQiLG51bGwsaS5zdGRvdXQpOl90LnN5bWxpbmsoIi9kZXYvdHR5IiwiL2Rldi9zdGRvdXQiKSxpLnN0ZGVycj9fdC5MKCIvZGV2Iiwic3RkZXJyIixudWxsLGkuc3RkZXJyKTpfdC5zeW1saW5rKCIvZGV2L3R0eTEiLCIvZGV2L3N0ZGVyciIpLGU9X3Qub3BlbigiL2Rldi9zdGRpbiIsMCksdD1fdC5vcGVuKCIvZGV2L3N0ZG91dCIsMSkscj1fdC5vcGVuKCIvZGV2L3N0ZGVyciIsMSksTigwPT09ZS5mZCxgaW52YWxpZCBoYW5kbGUgZm9yIHN0ZGluICgke2UuZmR9KWApLE4oMT09PXQuZmQsYGludmFsaWQgaGFuZGxlIGZvciBzdGRvdXQgKCR7dC5mZH0pYCksTigyPT09ci5mZCxgaW52YWxpZCBoYW5kbGUgZm9yIHN0ZGVyciAoJHtyLmZkfSlgKX0sc2IoKXtfdC5SLlk9ITEsanQoMCk7Zm9yKHZhciBlPTA7ZTxfdC5zdHJlYW1zLmxlbmd0aDtlKyspe3ZhciB0PV90LnN0cmVhbXNbZV07dCYmX3QuY2xvc2UodCl9fSxqYjooZSx0KT0+KGU9ZnQoZSx0KSkuZXhpc3RzP2Uub2JqZWN0Om51bGwsaGIoZSx0KXtmb3IoZT0ic3RyaW5nIj09dHlwZW9mIGU/ZTpRZShlKSx0PXQuc3BsaXQoIi8iKS5yZXZlcnNlKCk7dC5sZW5ndGg7KXt2YXIgcj10LnBvcCgpO2lmKHIpe3ZhciBhPXdlKGUrIi8iK3IpO3RyeXtfdC5ta2RpcihhKX1jYXRjaChlKXt9ZT1hfX1yZXR1cm4gYX0sTChlLHQscixhKXtlPUVlKCJzdHJpbmciPT10eXBlb2YgZT9lOlFlKGUpLHQpLHQ9JGUoISFyLCEhYSksX3QuTC5oYXx8KF90LkwuaGE9NjQpO3ZhciBuPV90Lk0oX3QuTC5oYSsrLDApO3JldHVybiBLZShuLHtvcGVuKGUpe2Uuc2Vla2FibGU9ITF9LGNsb3NlKCl7YSYmYS5idWZmZXImJmEuYnVmZmVyLmxlbmd0aCYmYSgxMCl9LHJlYWQoZSx0LGEsbil7Zm9yKHZhciBpPTAsdT0wO3U8bjt1Kyspe3RyeXt2YXIgbz1yKCl9Y2F0Y2goZSl7dGhyb3cgbmV3IF90LmcoMjkpfWlmKHZvaWQgMD09PW8mJjA9PT1pKXRocm93IG5ldyBfdC5nKDYpO2lmKG51bGw9PW8pYnJlYWs7aSsrLHRbYSt1XT1vfXJldHVybiBpJiYoZS5ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpKSxpfSx3cml0ZShlLHQscixuKXtmb3IodmFyIGk9MDtpPG47aSsrKXRyeXthKHRbcitpXSl9Y2F0Y2goZSl7dGhyb3cgbmV3IF90LmcoMjkpfXJldHVybiBuJiYoZS5ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpKSxpfX0pLGN0KGUsdCxuKX0sZmIoZSx0LHIsYSxuKXtmdW5jdGlvbiBpKCl7dGhpcy5nYT0hMSx0aGlzLkk9W119ZnVuY3Rpb24gdShlLHQscixhLG4pe2lmKG4+PShlPWUubm9kZS5tKS5sZW5ndGgpcmV0dXJuIDA7aWYoTigwPD0oYT1NYXRoLm1pbihlLmxlbmd0aC1uLGEpKSksZS5zbGljZSlmb3IodmFyIGk9MDtpPGE7aSsrKXRbcitpXT1lW24raV07ZWxzZSBmb3IoaT0wO2k8YTtpKyspdFtyK2ldPWUuZ2V0KG4raSk7cmV0dXJuIGF9aWYoaS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe2lmKCEoZT50aGlzLmxlbmd0aC0xfHwwPmUpKXt2YXIgdD1lJXRoaXMuY2h1bmtTaXplO3JldHVybiB0aGlzLnNhKGUvdGhpcy5jaHVua1NpemV8MClbdF19fSxpLnByb3RvdHlwZS5IYT1mdW5jdGlvbihlKXt0aGlzLnNhPWV9LGkucHJvdG90eXBlLm1hPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKGUub3BlbigiSEVBRCIsciwhMSksZS5zZW5kKG51bGwpLCEoMjAwPD1lLnN0YXR1cyYmMzAwPmUuc3RhdHVzfHwzMDQ9PT1lLnN0YXR1cykpdGhyb3cgRXJyb3IoIkNvdWxkbid0IGxvYWQgIityKyIuIFN0YXR1czogIitlLnN0YXR1cyk7dmFyIHQsYT1OdW1iZXIoZS5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1sZW5ndGgiKSksbj0odD1lLmdldFJlc3BvbnNlSGVhZGVyKCJBY2NlcHQtUmFuZ2VzIikpJiYiYnl0ZXMiPT09dDtlPSh0PWUuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtRW5jb2RpbmciKSkmJiJnemlwIj09PXQ7dmFyIGk9MTA0ODU3NjtufHwoaT1hKTt2YXIgdT10aGlzO3UuSGEoKGU9Pnt2YXIgdD1lKmksbj0oZSsxKSppLTE7aWYobj1NYXRoLm1pbihuLGEtMSksdm9pZCAwPT09dS5JW2VdKXt2YXIgbz11Lkk7aWYodD5uKXRocm93IEVycm9yKCJpbnZhbGlkIHJhbmdlICgiK3QrIiwgIituKyIpIG9yIG5vIGJ5dGVzIHJlcXVlc3RlZCEiKTtpZihuPmEtMSl0aHJvdyBFcnJvcigib25seSAiK2ErIiBieXRlcyBhdmFpbGFibGUhIHByb2dyYW1tZXIgZXJyb3IhIik7dmFyIHM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKHMub3BlbigiR0VUIixyLCExKSxhIT09aSYmcy5zZXRSZXF1ZXN0SGVhZGVyKCJSYW5nZSIsImJ5dGVzPSIrdCsiLSIrbikscy5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIixzLm92ZXJyaWRlTWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSgidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZCIpLHMuc2VuZChudWxsKSwhKDIwMDw9cy5zdGF0dXMmJjMwMD5zLnN0YXR1c3x8MzA0PT09cy5zdGF0dXMpKXRocm93IEVycm9yKCJDb3VsZG4ndCBsb2FkICIrcisiLiBTdGF0dXM6ICIrcy5zdGF0dXMpO3Q9dm9pZCAwIT09cy5yZXNwb25zZT9uZXcgVWludDhBcnJheShzLnJlc3BvbnNlfHxbXSk6UGUocy5yZXNwb25zZVRleHR8fCIiLCEwKSxvW2VdPXR9aWYodm9pZCAwPT09dS5JW2VdKXRocm93IEVycm9yKCJkb1hIUiBmYWlsZWQhIik7cmV0dXJuIHUuSVtlXX0pKSwhZSYmYXx8KGk9YT0xLGk9YT10aGlzLnNhKDApLmxlbmd0aCxFKCJMYXp5RmlsZXMgb24gZ3ppcCBmb3JjZXMgZG93bmxvYWQgb2YgdGhlIHdob2xlIGZpbGUgd2hlbiBsZW5ndGggaXMgYWNjZXNzZWQiKSksdGhpcy56YT1hLHRoaXMueWE9aSx0aGlzLmdhPSEwfSwidW5kZWZpbmVkIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0KXtpZighaCl0aHJvdyJDYW5ub3QgZG8gc3luY2hyb25vdXMgYmluYXJ5IFhIUnMgb3V0c2lkZSB3ZWJ3b3JrZXJzIGluIG1vZGVybiBicm93c2Vycy4gVXNlIC0tZW1iZWQtZmlsZSBvciAtLXByZWxvYWQtZmlsZSBpbiBlbWNjIjt2YXIgbz1uZXcgaTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvLHtsZW5ndGg6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdhfHx0aGlzLm1hKCksdGhpcy56YX19LGNodW5rU2l6ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2F8fHRoaXMubWEoKSx0aGlzLnlhfX19KTt2YXIgcz12b2lkIDB9ZWxzZSBzPXIsbz12b2lkIDA7dmFyIGw9cHQoZSx0LGEsbik7bz9sLm09bzpzJiYobC5tPW51bGwsbC51cmw9cyksT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobCx7bzp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubS5sZW5ndGh9fX0pO3ZhciBjPXt9O3JldHVybiBPYmplY3Qua2V5cyhsLmwpLmZvckVhY2goKGU9Pnt2YXIgdD1sLmxbZV07Y1tlXT1mdW5jdGlvbigpe3JldHVybiBtdChsKSx0LmFwcGx5KG51bGwsYXJndW1lbnRzKX19KSksYy5yZWFkPShlLHQscixhLG4pPT4obXQobCksdShlLHQscixhLG4pKSxjLlM9KGUsdCxyKT0+e210KGwpO3ZhciBhPUJlKCk7aWYoIWEpdGhyb3cgbmV3IF90LmcoNDgpO3JldHVybiB1KGUsUyxhLHQscikse1JhOmEsQWE6ITB9fSxsLmw9YyxsfSxZYSgpe1EoIkZTLmFic29sdXRlUGF0aCBoYXMgYmVlbiByZW1vdmVkOyB1c2UgUEFUSF9GUy5yZXNvbHZlIGluc3RlYWQiKX0sZWIoKXtRKCJGUy5jcmVhdGVGb2xkZXIgaGFzIGJlZW4gcmVtb3ZlZDsgdXNlIEZTLm1rZGlyIGluc3RlYWQiKX0sZ2IoKXtRKCJGUy5jcmVhdGVMaW5rIGhhcyBiZWVuIHJlbW92ZWQ7IHVzZSBGUy5zeW1saW5rIGluc3RlYWQiKX0sbWIoKXtRKCJGUy5qb2luUGF0aCBoYXMgYmVlbiByZW1vdmVkOyB1c2UgUEFUSC5qb2luIGluc3RlYWQiKX0scGIoKXtRKCJGUy5tbWFwQWxsb2MgaGFzIGJlZW4gcmVwbGFjZWQgYnkgdGhlIHRvcCBsZXZlbCBmdW5jdGlvbiBtbWFwQWxsb2MiKX0sdmIoKXtRKCJGUy5zdGFuZGFyZGl6ZVBhdGggaGFzIGJlZW4gcmVtb3ZlZDsgdXNlIFBBVEgubm9ybWFsaXplIGluc3RlYWQiKX19LGd0PWU9PihOKCJudW1iZXIiPT10eXBlb2YgZSxgVVRGOFRvU3RyaW5nIGV4cGVjdHMgYSBudW1iZXIgKGdvdCAke3R5cGVvZiBlfSlgKSxlP01lKEEsZSk6IiIpO2Z1bmN0aW9uIGJ0KGUsdCl7aWYoIi8iPT09dC5jaGFyQXQoMCkpcmV0dXJuIHQ7aWYoZT0tMTAwPT09ZT9fdC5jd2QoKTpzdChlKS5wYXRoLDA9PXQubGVuZ3RoKXRocm93IG5ldyBfdC5nKDQ0KTtyZXR1cm4gd2UoZSsiLyIrdCl9dmFyIHd0PXZvaWQgMDtmdW5jdGlvbiB5dCgpe04obnVsbCE9d3QpO3ZhciBlPU1bK3d0Pj4yXTtyZXR1cm4gd3QrPTQsZX12YXIgdnQsRXQsTHQsVHQ9KGUsdCxyKT0+KE4oIm51bWJlciI9PXR5cGVvZiByLCJzdHJpbmdUb1VURjgoc3RyLCBvdXRQdHIsIG1heEJ5dGVzVG9Xcml0ZSkgaXMgbWlzc2luZyB0aGUgdGhpcmQgcGFyYW1ldGVyIHRoYXQgc3BlY2lmaWVzIHRoZSBsZW5ndGggb2YgdGhlIG91dHB1dCBidWZmZXIhIikseGUoZSxBLHQscikpLGt0PWU9PjA9PWUlNCYmKDAhPWUlMTAwfHwwPT1lJTQwMCksU3Q9WzAsMzEsNjAsOTEsMTIxLDE1MiwxODIsMjEzLDI0NCwyNzQsMzA1LDMzNV0sQXQ9WzAsMzEsNTksOTAsMTIwLDE1MSwxODEsMjEyLDI0MywyNzMsMzA0LDMzNF0sUnQ9ZT0+e3ZhciB0PUZlKGUpKzEscj16dCh0KTtyZXR1cm4gciYmVHQoZSxyLHQpLHJ9LE10PXt9LE90PSgpPT57aWYoIXZ0KXt2YXIgZSx0PXtVU0VSOiJ3ZWJfdXNlciIsTE9HTkFNRToid2ViX3VzZXIiLFBBVEg6Ii8iLFBXRDoiLyIsSE9NRToiL2hvbWUvd2ViX3VzZXIiLExBTkc6KCJvYmplY3QiPT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzWzBdfHwiQyIpLnJlcGxhY2UoIi0iLCJfIikrIi5VVEYtOCIsXzpvfHwiLi90aGlzLnByb2dyYW0ifTtmb3IoZSBpbiBNdCl2b2lkIDA9PT1NdFtlXT9kZWxldGUgdFtlXTp0W2VdPU10W2VdO3ZhciByPVtdO2ZvcihlIGluIHQpci5wdXNoKGAke2V9PSR7dFtlXX1gKTt2dD1yfXJldHVybiB2dH0sRnQ9WzMxLDI5LDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXSx4dD1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdLFB0PShlLHQpPT57TigwPD1lLmxlbmd0aCwid3JpdGVBcnJheVRvTWVtb3J5IGFycmF5IG11c3QgaGF2ZSBhIGxlbmd0aCAoc2hvdWxkIGJlIGFuIGFycmF5IG9yIHR5cGVkIGFycmF5KSIpLFMuc2V0KGUsdCl9LEl0PVtdLE50PWU9Pnt2YXIgdD1JdFtlXTtyZXR1cm4gdHx8KGU+PUl0Lmxlbmd0aCYmKEl0Lmxlbmd0aD1lKzEpLEl0W2VdPXQ9RXQuZ2V0KGUpKSxOKEV0LmdldChlKT09dCwiSmF2YVNjcmlwdC1zaWRlIFdhc20gZnVuY3Rpb24gdGFibGUgbWlycm9yIGlzIG91dCBvZiBkYXRlISIpLHR9LEN0PWU9Pnt2YXIgdD1pWyJfIitlXTtyZXR1cm4gTih0LCJDYW5ub3QgY2FsbCB1bmtub3duIGZ1bmN0aW9uICIrZSsiLCBtYWtlIHN1cmUgaXQgaXMgZXhwb3J0ZWQiKSx0fSxVdD1bXTtmdW5jdGlvbiBEdChlLHQscixhKXtlfHw9dGhpcyx0aGlzLnBhcmVudD1lLHRoaXMucz1lLnMsdGhpcy5BPW51bGwsdGhpcy5pZD1fdC5OYSsrLHRoaXMubmFtZT10LHRoaXMubW9kZT1yLHRoaXMuaD17fSx0aGlzLmw9e30sdGhpcy5yZGV2PWF9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoRHQucHJvdG90eXBlLHtyZWFkOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hKDM2NSZ+dGhpcy5tb2RlKX0sc2V0OmZ1bmN0aW9uKGUpe2U/dGhpcy5tb2RlfD0zNjU6dGhpcy5tb2RlJj0tMzY2fX0sd3JpdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiEoMTQ2Jn50aGlzLm1vZGUpfSxzZXQ6ZnVuY3Rpb24oZSl7ZT90aGlzLm1vZGV8PTE0Njp0aGlzLm1vZGUmPS0xNDd9fSxNYTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFhlKHRoaXMubW9kZSl9fSxMYTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDgxOTI9PSg2MTQ0MCZ0aGlzLm1vZGUpfX19KSxfdC53YT1EdCxfdC5pYj0oZSx0LHIsYSxuLGksdSxvLHMsbCk9PntmdW5jdGlvbiBoKHIpe2Z1bmN0aW9uIGgocil7aWYobCYmbCgpLCFvKXt2YXIgdT1lLGg9dDtpZih1JiYodT0ic3RyaW5nIj09dHlwZW9mIHU/dTpRZSh1KSxoPXQ/d2UodSsiLyIrdCk6dSksdT0kZShhLG4pLGg9X3QuY3JlYXRlKGgsdSkscil7aWYoInN0cmluZyI9PXR5cGVvZiByKXtmb3IodmFyIGM9QXJyYXkoci5sZW5ndGgpLGY9MCxwPXIubGVuZ3RoO2Y8cDsrK2YpY1tmXT1yLmNoYXJDb2RlQXQoZik7cj1jfV90LmNobW9kKGgsMTQ2fHUpLGM9X3Qub3BlbihoLDU3NyksX3Qud3JpdGUoYyxyLDAsci5sZW5ndGgsMCxzKSxfdC5jbG9zZShjKSxfdC5jaG1vZChoLHUpfX1pJiZpKCksWihkKX1IZShyLGMsaCwoKCk9Pnt1JiZ1KCksWihkKX0pKXx8aChyKX12YXIgYz10P1NlKHdlKGUrIi8iK3QpKTplLGQ9WChgY3AgJHtjfWApO0ooZCksInN0cmluZyI9PXR5cGVvZiByP2plKHIsKGU9PmgoZSkpLHUpOmgocil9LGR0KCksX3QuRj1BcnJheSg0MDk2KSxfdC5zKFllLHt9LCIvIiksX3QubWtkaXIoIi90bXAiKSxfdC5ta2RpcigiL2hvbWUiKSxfdC5ta2RpcigiL2hvbWUvd2ViX3VzZXIiKSxmdW5jdGlvbigpe190Lm1rZGlyKCIvZGV2IiksS2UoX3QuTSgxLDMpLHtyZWFkOigpPT4wLHdyaXRlOihlLHQscixhKT0+YX0pLGN0KCIvZGV2L251bGwiLF90Lk0oMSwzKSksTmUoX3QuTSg1LDApLFVlKSxOZShfdC5NKDYsMCksRGUpLGN0KCIvZGV2L3R0eSIsX3QuTSg1LDApKSxjdCgiL2Rldi90dHkxIixfdC5NKDYsMCkpO3ZhciBlPW5ldyBVaW50OEFycmF5KDEwMjQpLHQ9MCxyPSgpPT4oMD09PXQmJih0PWtlKGUpLmJ5dGVMZW5ndGgpLGVbLS10XSk7X3QuTCgiL2RldiIsInJhbmRvbSIsciksX3QuTCgiL2RldiIsInVyYW5kb20iLHIpLF90Lm1rZGlyKCIvZGV2L3NobSIpLF90Lm1rZGlyKCIvZGV2L3NobS90bXAiKX0oKSxmdW5jdGlvbigpe190Lm1rZGlyKCIvcHJvYyIpO3ZhciBlPV90Lm1rZGlyKCIvcHJvYy9zZWxmIik7X3QubWtkaXIoIi9wcm9jL3NlbGYvZmQiKSxfdC5zKHtzKCl7dmFyIHQ9X3QuY3JlYXRlTm9kZShlLCJmZCIsMTY4OTUsNzMpO3JldHVybiB0Lmg9e2xvb2t1cChlLHQpe3ZhciByPXN0KCt0KTtyZXR1cm4oZT17cGFyZW50Om51bGwsczp7dWE6ImZha2UifSxoOntyZWFkbGluazooKT0+ci5wYXRofX0pLnBhcmVudD1lfX0sdH19LHt9LCIvcHJvYy9zZWxmL2ZkIil9KCksX3QuRmE9e01FTUZTOlllfTt2YXIgQnQ9e19fc3lzY2FsbF9kdXAzOmZ1bmN0aW9uKGUsdCxyKXt0cnl7dmFyIGE9c3QoZSk7aWYoTighciksYS5mZD09PXQpcmV0dXJuLTI4O3ZhciBuPV90LnFhKHQpO3JldHVybiBuJiZfdC5jbG9zZShuKSxsdChhLHQpLmZkfWNhdGNoKGUpe2lmKHZvaWQgMD09PV90fHwiRXJybm9FcnJvciIhPT1lLm5hbWUpdGhyb3cgZTtyZXR1cm4tZS51fX0sX19zeXNjYWxsX2ZjbnRsNjQ6ZnVuY3Rpb24oZSx0LHIpe3d0PXI7dHJ5e3ZhciBhPXN0KGUpO3N3aXRjaCh0KXtjYXNlIDA6dmFyIG49eXQoKTtpZigwPm4pcmV0dXJuLTI4O2Zvcig7X3Quc3RyZWFtc1tuXTspbisrO3JldHVybiBsdChhLG4pLmZkO2Nhc2UgMTpjYXNlIDI6Y2FzZSA2OmNhc2UgNzpyZXR1cm4gMDtjYXNlIDM6cmV0dXJuIGEuZmxhZ3M7Y2FzZSA0OnJldHVybiBuPXl0KCksYS5mbGFnc3w9biwwO2Nhc2UgNTpyZXR1cm4gbj15dCgpLFJbbiswPj4xXT0yLDA7Y2FzZSAxNjpjYXNlIDg6ZGVmYXVsdDpyZXR1cm4tMjg7Y2FzZSA5OnJldHVybiBNW1l0KCk+PjJdPTI4LC0xfX1jYXRjaChlKXtpZih2b2lkIDA9PT1fdHx8IkVycm5vRXJyb3IiIT09ZS5uYW1lKXRocm93IGU7cmV0dXJuLWUudX19LF9fc3lzY2FsbF9pb2N0bDpmdW5jdGlvbihlLHQscil7d3Q9cjt0cnl7dmFyIGE9c3QoZSk7c3dpdGNoKHQpe2Nhc2UgMjE1MDk6Y2FzZSAyMTUxMDpjYXNlIDIxNTExOmNhc2UgMjE1MTI6Y2FzZSAyMTUyNDpjYXNlIDIxNTE1OnJldHVybiBhLnR0eT8wOi01OTtjYXNlIDIxNTA1OmlmKCFhLnR0eSlyZXR1cm4tNTk7aWYoYS50dHkuSy5JYSl7ZT1bMywyOCwxMjcsMjEsNCwwLDEsMCwxNywxOSwyNiwwLDE4LDE1LDIzLDIyLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDBdO3ZhciBuPXl0KCk7TVtuPj4yXT0yNTg1NixNW24rND4+Ml09NSxNW24rOD4+Ml09MTkxLE1bbisxMj4+Ml09MzUzODc7Zm9yKHZhciBpPTA7MzI+aTtpKyspU1tuK2krMTd8MF09ZVtpXXx8MH1yZXR1cm4gMDtjYXNlIDIxNTA2OmNhc2UgMjE1MDc6Y2FzZSAyMTUwODppZighYS50dHkpcmV0dXJuLTU5O2lmKGEudHR5LksuSmEpZm9yKG49eXQoKSxlPVtdLGk9MDszMj5pO2krKyllLnB1c2goU1tuK2krMTd8MF0pO3JldHVybiAwO2Nhc2UgMjE1MTk6cmV0dXJuIGEudHR5PyhuPXl0KCksTVtuPj4yXT0wKTotNTk7Y2FzZSAyMTUyMDpyZXR1cm4gYS50dHk/LTI4Oi01OTtjYXNlIDIxNTMxOnJldHVybiBuPXl0KCksX3QuZmEoYSx0LG4pO2Nhc2UgMjE1MjM6cmV0dXJuIGEudHR5PyhhLnR0eS5LLkthJiYoaT1bMjQsODBdLG49eXQoKSxSW24+PjFdPWlbMF0sUltuKzI+PjFdPWlbMV0pLDApOi01OTtkZWZhdWx0OnJldHVybi0yOH19Y2F0Y2goZSl7aWYodm9pZCAwPT09X3R8fCJFcnJub0Vycm9yIiE9PWUubmFtZSl0aHJvdyBlO3JldHVybi1lLnV9fSxfX3N5c2NhbGxfb3BlbmF0OmZ1bmN0aW9uKGUsdCxyLGEpe3d0PWE7dHJ5e3Q9YnQoZSx0PWd0KHQpKTt2YXIgbj1hP3l0KCk6MDtyZXR1cm4gX3Qub3Blbih0LHIsbikuZmR9Y2F0Y2goZSl7aWYodm9pZCAwPT09X3R8fCJFcnJub0Vycm9yIiE9PWUubmFtZSl0aHJvdyBlO3JldHVybi1lLnV9fSxfX3N5c2NhbGxfcmVhZGxpbmthdDpmdW5jdGlvbihlLHQscixhKXt0cnl7aWYodD1idChlLHQ9Z3QodCkpLDA+PWEpcmV0dXJuLTI4O3ZhciBuPV90LnJlYWRsaW5rKHQpLGk9TWF0aC5taW4oYSxGZShuKSksdT1TW3IraV07cmV0dXJuIFR0KG4scixhKzEpLFNbcitpXT11LGl9Y2F0Y2goZSl7aWYodm9pZCAwPT09X3R8fCJFcnJub0Vycm9yIiE9PWUubmFtZSl0aHJvdyBlO3JldHVybi1lLnV9fSxfX3N5c2NhbGxfcmVuYW1lYXQ6ZnVuY3Rpb24oZSx0LHIsYSl7dHJ5e3JldHVybiB0PWd0KHQpLGE9Z3QoYSksdD1idChlLHQpLGE9YnQocixhKSxfdC5yZW5hbWUodCxhKSwwfWNhdGNoKGUpe2lmKHZvaWQgMD09PV90fHwiRXJybm9FcnJvciIhPT1lLm5hbWUpdGhyb3cgZTtyZXR1cm4tZS51fX0sX19zeXNjYWxsX3JtZGlyOmZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gZT1ndChlKSxfdC5ybWRpcihlKSwwfWNhdGNoKGUpe2lmKHZvaWQgMD09PV90fHwiRXJybm9FcnJvciIhPT1lLm5hbWUpdGhyb3cgZTtyZXR1cm4tZS51fX0sX19zeXNjYWxsX3VubGlua2F0OmZ1bmN0aW9uKGUsdCxyKXt0cnl7cmV0dXJuIHQ9YnQoZSx0PWd0KHQpKSwwPT09cj9fdC51bmxpbmsodCk6NTEyPT09cj9fdC5ybWRpcih0KTpRKCJJbnZhbGlkIGZsYWdzIHBhc3NlZCB0byB1bmxpbmthdCIpLDB9Y2F0Y2goZSl7aWYodm9pZCAwPT09X3R8fCJFcnJub0Vycm9yIiE9PWUubmFtZSl0aHJvdyBlO3JldHVybi1lLnV9fSxfZW1zY3JpcHRlbl9nZXRfbm93X2lzX21vbm90b25pYzooKT0+MSxfZW1zY3JpcHRlbl90aHJvd19sb25nam1wOigpPT57dGhyb3cgMS8wfSxfZ210aW1lX2pzOmZ1bmN0aW9uKGUsdCl7ZT0tOTAwNzE5OTI1NDc0MDk5Mj5lfHw5MDA3MTk5MjU0NzQwOTkyPGU/TmFOOk51bWJlcihlKSxlPW5ldyBEYXRlKDFlMyplKSxNW3Q+PjJdPWUuZ2V0VVRDU2Vjb25kcygpLE1bdCs0Pj4yXT1lLmdldFVUQ01pbnV0ZXMoKSxNW3QrOD4+Ml09ZS5nZXRVVENIb3VycygpLE1bdCsxMj4+Ml09ZS5nZXRVVENEYXRlKCksTVt0KzE2Pj4yXT1lLmdldFVUQ01vbnRoKCksTVt0KzIwPj4yXT1lLmdldFVUQ0Z1bGxZZWFyKCktMTkwMCxNW3QrMjQ+PjJdPWUuZ2V0VVRDRGF5KCksTVt0KzI4Pj4yXT0oZS5nZXRUaW1lKCktRGF0ZS5VVEMoZS5nZXRVVENGdWxsWWVhcigpLDAsMSwwLDAsMCwwKSkvODY0ZTV8MH0sX2xvY2FsdGltZV9qczpmdW5jdGlvbihlLHQpe2U9LTkwMDcxOTkyNTQ3NDA5OTI+ZXx8OTAwNzE5OTI1NDc0MDk5MjxlP05hTjpOdW1iZXIoZSksZT1uZXcgRGF0ZSgxZTMqZSksTVt0Pj4yXT1lLmdldFNlY29uZHMoKSxNW3QrND4+Ml09ZS5nZXRNaW51dGVzKCksTVt0Kzg+PjJdPWUuZ2V0SG91cnMoKSxNW3QrMTI+PjJdPWUuZ2V0RGF0ZSgpLE1bdCsxNj4+Ml09ZS5nZXRNb250aCgpLE1bdCsyMD4+Ml09ZS5nZXRGdWxsWWVhcigpLTE5MDAsTVt0KzI0Pj4yXT1lLmdldERheSgpLE1bdCsyOD4+Ml09KGt0KGUuZ2V0RnVsbFllYXIoKSk/U3Q6QXQpW2UuZ2V0TW9udGgoKV0rZS5nZXREYXRlKCktMXwwLE1bdCszNj4+Ml09LTYwKmUuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgcj1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksNiwxKS5nZXRUaW1lem9uZU9mZnNldCgpLGE9bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLDAsMSkuZ2V0VGltZXpvbmVPZmZzZXQoKTtNW3QrMzI+PjJdPTB8KHIhPWEmJmUuZ2V0VGltZXpvbmVPZmZzZXQoKT09TWF0aC5taW4oYSxyKSl9LF9ta3RpbWVfanM6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IERhdGUoTVtlKzIwPj4yXSsxOTAwLE1bZSsxNj4+Ml0sTVtlKzEyPj4yXSxNW2UrOD4+Ml0sTVtlKzQ+PjJdLE1bZT4+Ml0sMCkscj1NW2UrMzI+PjJdLGE9dC5nZXRUaW1lem9uZU9mZnNldCgpLG49bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLDYsMSkuZ2V0VGltZXpvbmVPZmZzZXQoKSxpPW5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSwwLDEpLmdldFRpbWV6b25lT2Zmc2V0KCksdT1NYXRoLm1pbihpLG4pO3JldHVybiAwPnI/TVtlKzMyPj4yXT1OdW1iZXIobiE9aSYmdT09YSk6MDxyIT0odT09YSkmJihuPU1hdGgubWF4KGksbiksdC5zZXRUaW1lKHQuZ2V0VGltZSgpKzZlNCooKDA8cj91Om4pLWEpKSksTVtlKzI0Pj4yXT10LmdldERheSgpLE1bZSsyOD4+Ml09KGt0KHQuZ2V0RnVsbFllYXIoKSk/U3Q6QXQpW3QuZ2V0TW9udGgoKV0rdC5nZXREYXRlKCktMXwwLE1bZT4+Ml09dC5nZXRTZWNvbmRzKCksTVtlKzQ+PjJdPXQuZ2V0TWludXRlcygpLE1bZSs4Pj4yXT10LmdldEhvdXJzKCksTVtlKzEyPj4yXT10LmdldERhdGUoKSxNW2UrMTY+PjJdPXQuZ2V0TW9udGgoKSxNW2UrMjA+PjJdPXQuZ2V0WWVhcigpLGU9dC5nZXRUaW1lKCksaXNOYU4oZSk/KE1bWXQoKT4+Ml09NjEsZT0tMSk6ZS89MWUzLEJpZ0ludChlKX0sX3R6c2V0X2pzOihlLHQscik9PntmdW5jdGlvbiBhKGUpe3JldHVybihlPWUudG9UaW1lU3RyaW5nKCkubWF0Y2goL1woKFtBLVphLXogXSspXCkkLykpP2VbMV06IkdNVCJ9dmFyIG49KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpLGk9bmV3IERhdGUobiwwLDEpLHU9bmV3IERhdGUobiw2LDEpO249aS5nZXRUaW1lem9uZU9mZnNldCgpO3ZhciBvPXUuZ2V0VGltZXpvbmVPZmZzZXQoKTtPW2U+PjJdPTYwKk1hdGgubWF4KG4sbyksTVt0Pj4yXT1OdW1iZXIobiE9byksZT1hKGkpLHQ9YSh1KSxlPVJ0KGUpLHQ9UnQodCksbzxuPyhPW3I+PjJdPWUsT1tyKzQ+PjJdPXQpOihPW3I+PjJdPXQsT1tyKzQ+PjJdPWUpfSxhYm9ydDooKT0+e1EoIm5hdGl2ZSBjb2RlIGNhbGxlZCBhYm9ydCgpIil9LGVtc2NyaXB0ZW5fZGF0ZV9ub3c6KCk9PkRhdGUubm93KCksZW1zY3JpcHRlbl9nZXRfbm93OigpPT5wZXJmb3JtYW5jZS5ub3coKSxlbXNjcmlwdGVuX3Jlc2l6ZV9oZWFwOmU9Pnt2YXIgdD1BLmxlbmd0aDtpZihOKChlPj4+PTApPnQpLDIxNDc0ODM2NDg8ZSlyZXR1cm4gTChgQ2Fubm90IGVubGFyZ2UgbWVtb3J5LCByZXF1ZXN0ZWQgJHtlfSBieXRlcywgYnV0IHRoZSBsaW1pdCBpcyAyMTQ3NDgzNjQ4IGJ5dGVzIWApLCExO2Zvcih2YXIgcj0xOzQ+PXI7cio9Mil7dmFyIGE9dCooMSsuMi9yKTthPU1hdGgubWluKGEsZSsxMDA2NjMyOTYpO3ZhciBuPU1hdGg7YT1NYXRoLm1heChlLGEpO2U6e2E9bj1uLm1pbi5jYWxsKG4sMjE0NzQ4MzY0OCxhKyg2NTUzNi1hJTY1NTM2KSU2NTUzNik7dmFyIGk9VC5idWZmZXIsdT0oYS1pLmJ5dGVMZW5ndGgrNjU1MzUpLzY1NTM2O3RyeXtULmdyb3codSksVSgpO3ZhciBvPTE7YnJlYWsgZX1jYXRjaChlKXtMKGBncm93TWVtb3J5OiBBdHRlbXB0ZWQgdG8gZ3JvdyBoZWFwIGZyb20gJHtpLmJ5dGVMZW5ndGh9IGJ5dGVzIHRvICR7YX0gYnl0ZXMsIGJ1dCBnb3QgZXJyb3I6ICR7ZX1gKX1vPXZvaWQgMH1pZihvKXJldHVybiEwfXJldHVybiBMKGBGYWlsZWQgdG8gZ3JvdyB0aGUgaGVhcCBmcm9tICR7dH0gYnl0ZXMgdG8gJHtufSBieXRlcywgbm90IGVub3VnaCBtZW1vcnkhYCksITF9LGVudmlyb25fZ2V0OihlLHQpPT57dmFyIHI9MDtyZXR1cm4gT3QoKS5mb3JFYWNoKCgoYSxuKT0+e3ZhciBpPXQrcjtmb3Iobj1PW2UrNCpuPj4yXT1pLGk9MDtpPGEubGVuZ3RoOysraSlOKGEuY2hhckNvZGVBdChpKT09PSgyNTUmYS5jaGFyQ29kZUF0KGkpKSksU1swfG4rK109YS5jaGFyQ29kZUF0KGkpO1NbMHxuXT0wLHIrPWEubGVuZ3RoKzF9KSksMH0sZW52aXJvbl9zaXplc19nZXQ6KGUsdCk9Pnt2YXIgcj1PdCgpO09bZT4+Ml09ci5sZW5ndGg7dmFyIGE9MDtyZXR1cm4gci5mb3JFYWNoKChlPT5hKz1lLmxlbmd0aCsxKSksT1t0Pj4yXT1hLDB9LGV4aXQ6ZT0+e1F0KCksST0hMCxzKGUsbmV3IHBlKGUpKX0sZmRfY2xvc2U6ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PXN0KGUpO3JldHVybiBfdC5jbG9zZSh0KSwwfWNhdGNoKGUpe2lmKHZvaWQgMD09PV90fHwiRXJybm9FcnJvciIhPT1lLm5hbWUpdGhyb3cgZTtyZXR1cm4gZS51fX0sZmRfcmVhZDpmdW5jdGlvbihlLHQscixhKXt0cnl7ZTp7dmFyIG49c3QoZSk7ZT10O2Zvcih2YXIgaSx1PXQ9MDt1PHI7dSsrKXt2YXIgbz1PW2U+PjJdLHM9T1tlKzQ+PjJdO2UrPTg7dmFyIGw9X3QucmVhZChuLFMsbyxzLGkpO2lmKDA+bCl7dmFyIGg9LTE7YnJlYWsgZX1pZih0Kz1sLGw8cylicmVhazt2b2lkIDAhPT1pJiYoaSs9bCl9aD10fXJldHVybiBPW2E+PjJdPWgsMH1jYXRjaChlKXtpZih2b2lkIDA9PT1fdHx8IkVycm5vRXJyb3IiIT09ZS5uYW1lKXRocm93IGU7cmV0dXJuIGUudX19LGZkX3NlZWs6ZnVuY3Rpb24oZSx0LHIsYSl7dD0tOTAwNzE5OTI1NDc0MDk5Mj50fHw5MDA3MTk5MjU0NzQwOTkyPHQ/TmFOOk51bWJlcih0KTt0cnl7aWYoaXNOYU4odCkpcmV0dXJuIDYxO3ZhciBuPXN0KGUpO3JldHVybiBfdC5EKG4sdCxyKSx4W2E+PjNdPUJpZ0ludChuLnBvc2l0aW9uKSxuLmVhJiYwPT09dCYmMD09PXImJihuLmVhPW51bGwpLDB9Y2F0Y2goZSl7aWYodm9pZCAwPT09X3R8fCJFcnJub0Vycm9yIiE9PWUubmFtZSl0aHJvdyBlO3JldHVybiBlLnV9fSxmZF93cml0ZTpmdW5jdGlvbihlLHQscixhKXt0cnl7ZTp7dmFyIG49c3QoZSk7ZT10O2Zvcih2YXIgaSx1PXQ9MDt1PHI7dSsrKXt2YXIgbz1PW2U+PjJdLHM9T1tlKzQ+PjJdO2UrPTg7dmFyIGw9X3Qud3JpdGUobixTLG8scyxpKTtpZigwPmwpe3ZhciBoPS0xO2JyZWFrIGV9dCs9bCx2b2lkIDAhPT1pJiYoaSs9bCl9aD10fXJldHVybiBPW2E+PjJdPWgsMH1jYXRjaChlKXtpZih2b2lkIDA9PT1fdHx8IkVycm5vRXJyb3IiIT09ZS5uYW1lKXRocm93IGU7cmV0dXJuIGUudX19LGludm9rZV92aWk6SnQsc3RyZnRpbWU6KGUsdCxyLGEpPT57ZnVuY3Rpb24gbihlLHQscil7Zm9yKGU9Im51bWJlciI9PXR5cGVvZiBlP2UudG9TdHJpbmcoKTplfHwiIjtlLmxlbmd0aDx0OyllPXJbMF0rZTtyZXR1cm4gZX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIG4oZSx0LCIwIil9ZnVuY3Rpb24gdShlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIDA+ZT8tMTowPGU/MTowfXZhciBhO3JldHVybiAwPT09KGE9cihlLmdldEZ1bGxZZWFyKCktdC5nZXRGdWxsWWVhcigpKSkmJjA9PT0oYT1yKGUuZ2V0TW9udGgoKS10LmdldE1vbnRoKCkpKSYmKGE9cihlLmdldERhdGUoKS10LmdldERhdGUoKSkpLGF9ZnVuY3Rpb24gbyhlKXtzd2l0Y2goZS5nZXREYXkoKSl7Y2FzZSAwOnJldHVybiBuZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCktMSwxMSwyOSk7Y2FzZSAxOnJldHVybiBlO2Nhc2UgMjpyZXR1cm4gbmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLDAsMyk7Y2FzZSAzOnJldHVybiBuZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCwyKTtjYXNlIDQ6cmV0dXJuIG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSwwLDEpO2Nhc2UgNTpyZXR1cm4gbmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLTEsMTEsMzEpO2Nhc2UgNjpyZXR1cm4gbmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLTEsMTEsMzApfX1mdW5jdGlvbiBzKGUpe3ZhciB0PWUuTztmb3IoZT1uZXcgRGF0ZShuZXcgRGF0ZShlLlArMTkwMCwwLDEpLmdldFRpbWUoKSk7MDx0Oyl7dmFyIHI9ZS5nZXRNb250aCgpLGE9KGt0KGUuZ2V0RnVsbFllYXIoKSk/RnQ6eHQpW3JdO2lmKCEodD5hLWUuZ2V0RGF0ZSgpKSl7ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpK3QpO2JyZWFrfXQtPWEtZS5nZXREYXRlKCkrMSxlLnNldERhdGUoMSksMTE+cj9lLnNldE1vbnRoKHIrMSk6KGUuc2V0TW9udGgoMCksZS5zZXRGdWxsWWVhcihlLmdldEZ1bGxZZWFyKCkrMSkpfXJldHVybiByPW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSsxLDAsNCksdD1vKG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSwwLDQpKSxyPW8ociksMD49dSh0LGUpPzA+PXUocixlKT9lLmdldEZ1bGxZZWFyKCkrMTplLmdldEZ1bGxZZWFyKCk6ZS5nZXRGdWxsWWVhcigpLTF9dmFyIGw9T1thKzQwPj4yXTtmb3IodmFyIGggaW4gYT17VmE6TVthPj4yXSxVYTpNW2ErND4+Ml0sJDpNW2ErOD4+Ml0sbGE6TVthKzEyPj4yXSxhYTpNW2ErMTY+PjJdLFA6TVthKzIwPj4yXSxIOk1bYSsyND4+Ml0sTzpNW2ErMjg+PjJdLHdiOk1bYSszMj4+Ml0sVGE6TVthKzM2Pj4yXSxXYTpsP2d0KGwpOiIifSxyPWd0KHIpLGw9eyIlYyI6IiVhICViICVkICVIOiVNOiVTICVZIiwiJUQiOiIlbS8lZC8leSIsIiVGIjoiJVktJW0tJWQiLCIlaCI6IiViIiwiJXIiOiIlSTolTTolUyAlcCIsIiVSIjoiJUg6JU0iLCIlVCI6IiVIOiVNOiVTIiwiJXgiOiIlbS8lZC8leSIsIiVYIjoiJUg6JU06JVMiLCIlRWMiOiIlYyIsIiVFQyI6IiVDIiwiJUV4IjoiJW0vJWQvJXkiLCIlRVgiOiIlSDolTTolUyIsIiVFeSI6IiV5IiwiJUVZIjoiJVkiLCIlT2QiOiIlZCIsIiVPZSI6IiVlIiwiJU9IIjoiJUgiLCIlT0kiOiIlSSIsIiVPbSI6IiVtIiwiJU9NIjoiJU0iLCIlT1MiOiIlUyIsIiVPdSI6IiV1IiwiJU9VIjoiJVUiLCIlT1YiOiIlViIsIiVPdyI6IiV3IiwiJU9XIjoiJVciLCIlT3kiOiIleSJ9KXI9ci5yZXBsYWNlKG5ldyBSZWdFeHAoaCwiZyIpLGxbaF0pO3ZhciBjPSJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheSIuc3BsaXQoIiAiKSxkPSJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyIi5zcGxpdCgiICIpO2ZvcihoIGluIGw9eyIlYSI6ZT0+Y1tlLkhdLnN1YnN0cmluZygwLDMpLCIlQSI6ZT0+Y1tlLkhdLCIlYiI6ZT0+ZFtlLmFhXS5zdWJzdHJpbmcoMCwzKSwiJUIiOmU9PmRbZS5hYV0sIiVDIjplPT5pKChlLlArMTkwMCkvMTAwfDAsMiksIiVkIjplPT5pKGUubGEsMiksIiVlIjplPT5uKGUubGEsMiwiICIpLCIlZyI6ZT0+cyhlKS50b1N0cmluZygpLnN1YnN0cmluZygyKSwiJUciOmU9PnMoZSksIiVIIjplPT5pKGUuJCwyKSwiJUkiOmU9PigwPT0oZT1lLiQpP2U9MTI6MTI8ZSYmKGUtPTEyKSxpKGUsMikpLCIlaiI6ZT0+e2Zvcih2YXIgdD0wLHI9MDtyPD1lLmFhLTE7dCs9KGt0KGUuUCsxOTAwKT9GdDp4dClbcisrXSk7cmV0dXJuIGkoZS5sYSt0LDMpfSwiJW0iOmU9PmkoZS5hYSsxLDIpLCIlTSI6ZT0+aShlLlVhLDIpLCIlbiI6KCk9PiJcbiIsIiVwIjplPT4wPD1lLiQmJjEyPmUuJD8iQU0iOiJQTSIsIiVTIjplPT5pKGUuVmEsMiksIiV0IjooKT0+Ilx0IiwiJXUiOmU9PmUuSHx8NywiJVUiOmU9PmkoTWF0aC5mbG9vcigoZS5PKzctZS5IKS83KSwyKSwiJVYiOmU9Pnt2YXIgdD1NYXRoLmZsb29yKChlLk8rNy0oZS5IKzYpJTcpLzcpO2lmKDI+PShlLkgrMzcxLWUuTy0yKSU3JiZ0KyssdCk1Mz09dCYmKDQ9PShyPShlLkgrMzcxLWUuTyklNyl8fDM9PXImJmt0KGUuUCl8fCh0PTEpKTtlbHNle3Q9NTI7dmFyIHI9KGUuSCs3LWUuTy0xKSU3Oyg0PT1yfHw1PT1yJiZrdChlLlAlNDAwLTEpKSYmdCsrfXJldHVybiBpKHQsMil9LCIldyI6ZT0+ZS5ILCIlVyI6ZT0+aShNYXRoLmZsb29yKChlLk8rNy0oZS5IKzYpJTcpLzcpLDIpLCIleSI6ZT0+KGUuUCsxOTAwKS50b1N0cmluZygpLnN1YnN0cmluZygyKSwiJVkiOmU9PmUuUCsxOTAwLCIleiI6ZT0+e3ZhciB0PTA8PShlPWUuVGEpO3JldHVybiBlPU1hdGguYWJzKGUpLzYwLCh0PyIrIjoiLSIpK1N0cmluZygiMDAwMCIrKGUvNjAqMTAwK2UlNjApKS5zbGljZSgtNCl9LCIlWiI6ZT0+ZS5XYSwiJSUiOigpPT4iJSJ9LHI9ci5yZXBsYWNlKC8lJS9nLCJcMFwwIiksbClyLmluY2x1ZGVzKGgpJiYocj1yLnJlcGxhY2UobmV3IFJlZ0V4cChoLCJnIiksbFtoXShhKSkpO3JldHVybihoPVBlKHI9ci5yZXBsYWNlKC9cMFwwL2csIiUiKSwhMSkpLmxlbmd0aD50PzA6KFB0KGgsZSksaC5sZW5ndGgtMSl9LHN5c3RlbTplPT57aWYoYyl7aWYoIWUpcmV0dXJuIDE7aWYoIShlPWd0KGUpKS5sZW5ndGgpcmV0dXJuIDA7dmFyIHQ9KGUsdCk9PmU8PDh8dDtyZXR1cm4gbnVsbD09PShlPXcoImNoaWxkX3Byb2Nlc3MiKS51YihlLFtdLHt0YjohMCxzdGRpbzoiaW5oZXJpdCJ9KSkuc3RhdHVzP3QoMCwoZT0+e3N3aXRjaChlKXtjYXNlIlNJR0hVUCI6cmV0dXJuIDE7Y2FzZSJTSUdRVUlUIjpyZXR1cm4gMztjYXNlIlNJR0ZQRSI6cmV0dXJuIDg7Y2FzZSJTSUdLSUxMIjpyZXR1cm4gOTtjYXNlIlNJR0FMUk0iOnJldHVybiAxNDtjYXNlIlNJR1RFUk0iOnJldHVybiAxNX1yZXR1cm4gMn0pKGUuc2lnbmFsKSk6ZS5zdGF0dXM8PDh9cmV0dXJuIGU/KE1bWXQoKT4+Ml09NTIsLTEpOjB9fSxWdD1mdW5jdGlvbigpe3ZhciBlPXtlbnY6QnQsd2FzaV9zbmFwc2hvdF9wcmV2aWV3MTpCdH07Sigid2FzbS1pbnN0YW50aWF0ZSIpO3ZhciB0PWk7cmV0dXJuIHNlKGUsKGZ1bmN0aW9uKGUpe04oaT09PXQsInRoZSBNb2R1bGUgb2JqZWN0IHNob3VsZCBub3QgYmUgcmVwbGFjZWQgZHVyaW5nIGFzeW5jIGNvbXBpbGF0aW9uIC0gcGVyaGFwcyB0aGUgb3JkZXIgb2YgSFRNTCBlbGVtZW50cyBpcyB3cm9uZz8iKSx0PW51bGwsVnQ9ZS5pbnN0YW5jZS5leHBvcnRzLE4oVD1WdC5tZW1vcnksIm1lbW9yeSBub3QgZm91bmQgaW4gd2FzbSBleHBvcnRzIiksVSgpLE4oRXQ9VnQuX19pbmRpcmVjdF9mdW5jdGlvbl90YWJsZSwidGFibGUgbm90IGZvdW5kIGluIHdhc20gZXhwb3J0cyIpLHoudW5zaGlmdChWdC5fX3dhc21fY2FsbF9jdG9ycyksWigid2FzbS1pbnN0YW50aWF0ZSIpfSkpLmNhdGNoKG4pLHt9fSgpO2kuX2x1YV9jaGVja3N0YWNrPWFlKCJsdWFfY2hlY2tzdGFjayIpLGkuX2x1YV94bW92ZT1hZSgibHVhX3htb3ZlIiksaS5fbHVhX2F0cGFuaWM9YWUoImx1YV9hdHBhbmljIiksaS5fbHVhX3ZlcnNpb249YWUoImx1YV92ZXJzaW9uIiksaS5fbHVhX2Fic2luZGV4PWFlKCJsdWFfYWJzaW5kZXgiKSxpLl9sdWFfZ2V0dG9wPWFlKCJsdWFfZ2V0dG9wIiksaS5fbHVhX3NldHRvcD1hZSgibHVhX3NldHRvcCIpLGkuX2x1YV9jbG9zZXNsb3Q9YWUoImx1YV9jbG9zZXNsb3QiKSxpLl9sdWFfcm90YXRlPWFlKCJsdWFfcm90YXRlIiksaS5fbHVhX2NvcHk9YWUoImx1YV9jb3B5IiksaS5fbHVhX3B1c2h2YWx1ZT1hZSgibHVhX3B1c2h2YWx1ZSIpLGkuX2x1YV90eXBlPWFlKCJsdWFfdHlwZSIpLGkuX2x1YV90eXBlbmFtZT1hZSgibHVhX3R5cGVuYW1lIiksaS5fbHVhX2lzY2Z1bmN0aW9uPWFlKCJsdWFfaXNjZnVuY3Rpb24iKSxpLl9sdWFfaXNpbnRlZ2VyPWFlKCJsdWFfaXNpbnRlZ2VyIiksaS5fbHVhX2lzbnVtYmVyPWFlKCJsdWFfaXNudW1iZXIiKSxpLl9sdWFfaXNzdHJpbmc9YWUoImx1YV9pc3N0cmluZyIpLGkuX2x1YV9pc3VzZXJkYXRhPWFlKCJsdWFfaXN1c2VyZGF0YSIpLGkuX2x1YV9yYXdlcXVhbD1hZSgibHVhX3Jhd2VxdWFsIiksaS5fbHVhX2FyaXRoPWFlKCJsdWFfYXJpdGgiKSxpLl9sdWFfY29tcGFyZT1hZSgibHVhX2NvbXBhcmUiKSxpLl9sdWFfc3RyaW5ndG9udW1iZXI9YWUoImx1YV9zdHJpbmd0b251bWJlciIpLGkuX2x1YV90b251bWJlcng9YWUoImx1YV90b251bWJlcngiKSxpLl9sdWFfdG9pbnRlZ2VyeD1hZSgibHVhX3RvaW50ZWdlcngiKSxpLl9sdWFfdG9ib29sZWFuPWFlKCJsdWFfdG9ib29sZWFuIiksaS5fbHVhX3RvbHN0cmluZz1hZSgibHVhX3RvbHN0cmluZyIpLGkuX2x1YV9yYXdsZW49YWUoImx1YV9yYXdsZW4iKSxpLl9sdWFfdG9jZnVuY3Rpb249YWUoImx1YV90b2NmdW5jdGlvbiIpLGkuX2x1YV90b3VzZXJkYXRhPWFlKCJsdWFfdG91c2VyZGF0YSIpLGkuX2x1YV90b3RocmVhZD1hZSgibHVhX3RvdGhyZWFkIiksaS5fbHVhX3RvcG9pbnRlcj1hZSgibHVhX3RvcG9pbnRlciIpLGkuX2x1YV9wdXNobmlsPWFlKCJsdWFfcHVzaG5pbCIpLGkuX2x1YV9wdXNobnVtYmVyPWFlKCJsdWFfcHVzaG51bWJlciIpLGkuX2x1YV9wdXNoaW50ZWdlcj1hZSgibHVhX3B1c2hpbnRlZ2VyIiksaS5fbHVhX3B1c2hsc3RyaW5nPWFlKCJsdWFfcHVzaGxzdHJpbmciKSxpLl9sdWFfcHVzaHN0cmluZz1hZSgibHVhX3B1c2hzdHJpbmciKSxpLl9sdWFfcHVzaGNjbG9zdXJlPWFlKCJsdWFfcHVzaGNjbG9zdXJlIiksaS5fbHVhX3B1c2hib29sZWFuPWFlKCJsdWFfcHVzaGJvb2xlYW4iKSxpLl9sdWFfcHVzaGxpZ2h0dXNlcmRhdGE9YWUoImx1YV9wdXNobGlnaHR1c2VyZGF0YSIpLGkuX2x1YV9wdXNodGhyZWFkPWFlKCJsdWFfcHVzaHRocmVhZCIpLGkuX2x1YV9nZXRnbG9iYWw9YWUoImx1YV9nZXRnbG9iYWwiKSxpLl9sdWFfZ2V0dGFibGU9YWUoImx1YV9nZXR0YWJsZSIpLGkuX2x1YV9nZXRmaWVsZD1hZSgibHVhX2dldGZpZWxkIiksaS5fbHVhX2dldGk9YWUoImx1YV9nZXRpIiksaS5fbHVhX3Jhd2dldD1hZSgibHVhX3Jhd2dldCIpLGkuX2x1YV9yYXdnZXRpPWFlKCJsdWFfcmF3Z2V0aSIpLGkuX2x1YV9yYXdnZXRwPWFlKCJsdWFfcmF3Z2V0cCIpLGkuX2x1YV9jcmVhdGV0YWJsZT1hZSgibHVhX2NyZWF0ZXRhYmxlIiksaS5fbHVhX2dldG1ldGF0YWJsZT1hZSgibHVhX2dldG1ldGF0YWJsZSIpLGkuX2x1YV9nZXRpdXNlcnZhbHVlPWFlKCJsdWFfZ2V0aXVzZXJ2YWx1ZSIpLGkuX2x1YV9zZXRnbG9iYWw9YWUoImx1YV9zZXRnbG9iYWwiKSxpLl9sdWFfc2V0dGFibGU9YWUoImx1YV9zZXR0YWJsZSIpLGkuX2x1YV9zZXRmaWVsZD1hZSgibHVhX3NldGZpZWxkIiksaS5fbHVhX3NldGk9YWUoImx1YV9zZXRpIiksaS5fbHVhX3Jhd3NldD1hZSgibHVhX3Jhd3NldCIpLGkuX2x1YV9yYXdzZXRwPWFlKCJsdWFfcmF3c2V0cCIpLGkuX2x1YV9yYXdzZXRpPWFlKCJsdWFfcmF3c2V0aSIpLGkuX2x1YV9zZXRtZXRhdGFibGU9YWUoImx1YV9zZXRtZXRhdGFibGUiKSxpLl9sdWFfc2V0aXVzZXJ2YWx1ZT1hZSgibHVhX3NldGl1c2VydmFsdWUiKSxpLl9sdWFfY2FsbGs9YWUoImx1YV9jYWxsayIpLGkuX2x1YV9wY2FsbGs9YWUoImx1YV9wY2FsbGsiKSxpLl9sdWFfbG9hZD1hZSgibHVhX2xvYWQiKSxpLl9sdWFfZHVtcD1hZSgibHVhX2R1bXAiKSxpLl9sdWFfc3RhdHVzPWFlKCJsdWFfc3RhdHVzIiksaS5fbHVhX2Vycm9yPWFlKCJsdWFfZXJyb3IiKSxpLl9sdWFfbmV4dD1hZSgibHVhX25leHQiKSxpLl9sdWFfdG9jbG9zZT1hZSgibHVhX3RvY2xvc2UiKSxpLl9sdWFfY29uY2F0PWFlKCJsdWFfY29uY2F0IiksaS5fbHVhX2xlbj1hZSgibHVhX2xlbiIpLGkuX2x1YV9nZXRhbGxvY2Y9YWUoImx1YV9nZXRhbGxvY2YiKSxpLl9sdWFfc2V0YWxsb2NmPWFlKCJsdWFfc2V0YWxsb2NmIiksaS5fbHVhX3NldHdhcm5mPWFlKCJsdWFfc2V0d2FybmYiKSxpLl9sdWFfd2FybmluZz1hZSgibHVhX3dhcm5pbmciKSxpLl9sdWFfbmV3dXNlcmRhdGF1dj1hZSgibHVhX25ld3VzZXJkYXRhdXYiKSxpLl9sdWFfZ2V0dXB2YWx1ZT1hZSgibHVhX2dldHVwdmFsdWUiKSxpLl9sdWFfc2V0dXB2YWx1ZT1hZSgibHVhX3NldHVwdmFsdWUiKSxpLl9sdWFfdXB2YWx1ZWlkPWFlKCJsdWFfdXB2YWx1ZWlkIiksaS5fbHVhX3VwdmFsdWVqb2luPWFlKCJsdWFfdXB2YWx1ZWpvaW4iKSxpLl9sdWFMX3RyYWNlYmFjaz1hZSgibHVhTF90cmFjZWJhY2siKSxpLl9sdWFfZ2V0c3RhY2s9YWUoImx1YV9nZXRzdGFjayIpLGkuX2x1YV9nZXRpbmZvPWFlKCJsdWFfZ2V0aW5mbyIpLGkuX2x1YUxfYnVmZmluaXQ9YWUoImx1YUxfYnVmZmluaXQiKSxpLl9sdWFMX2FkZHN0cmluZz1hZSgibHVhTF9hZGRzdHJpbmciKSxpLl9sdWFMX3ByZXBidWZmc2l6ZT1hZSgibHVhTF9wcmVwYnVmZnNpemUiKSxpLl9sdWFMX2FkZHZhbHVlPWFlKCJsdWFMX2FkZHZhbHVlIiksaS5fbHVhTF9wdXNocmVzdWx0PWFlKCJsdWFMX3B1c2hyZXN1bHQiKSxpLl9sdWFMX2FyZ2Vycm9yPWFlKCJsdWFMX2FyZ2Vycm9yIiksaS5fbHVhTF90eXBlZXJyb3I9YWUoImx1YUxfdHlwZWVycm9yIiksaS5fbHVhTF9nZXRtZXRhZmllbGQ9YWUoImx1YUxfZ2V0bWV0YWZpZWxkIiksaS5fbHVhTF93aGVyZT1hZSgibHVhTF93aGVyZSIpLGkuX2x1YUxfZmlsZXJlc3VsdD1hZSgibHVhTF9maWxlcmVzdWx0Iik7dmFyIFl0PWFlKCJfX2Vycm5vX2xvY2F0aW9uIik7aS5fbHVhTF9leGVjcmVzdWx0PWFlKCJsdWFMX2V4ZWNyZXN1bHQiKSxpLl9sdWFMX25ld21ldGF0YWJsZT1hZSgibHVhTF9uZXdtZXRhdGFibGUiKSxpLl9sdWFMX3NldG1ldGF0YWJsZT1hZSgibHVhTF9zZXRtZXRhdGFibGUiKSxpLl9sdWFMX3Rlc3R1ZGF0YT1hZSgibHVhTF90ZXN0dWRhdGEiKSxpLl9sdWFMX2NoZWNrdWRhdGE9YWUoImx1YUxfY2hlY2t1ZGF0YSIpLGkuX2x1YUxfb3B0bHN0cmluZz1hZSgibHVhTF9vcHRsc3RyaW5nIiksaS5fbHVhTF9jaGVja2xzdHJpbmc9YWUoImx1YUxfY2hlY2tsc3RyaW5nIiksaS5fbHVhTF9jaGVja3N0YWNrPWFlKCJsdWFMX2NoZWNrc3RhY2siKSxpLl9sdWFMX2NoZWNrdHlwZT1hZSgibHVhTF9jaGVja3R5cGUiKSxpLl9sdWFMX2NoZWNrYW55PWFlKCJsdWFMX2NoZWNrYW55IiksaS5fbHVhTF9jaGVja251bWJlcj1hZSgibHVhTF9jaGVja251bWJlciIpLGkuX2x1YUxfb3B0bnVtYmVyPWFlKCJsdWFMX29wdG51bWJlciIpLGkuX2x1YUxfY2hlY2tpbnRlZ2VyPWFlKCJsdWFMX2NoZWNraW50ZWdlciIpLGkuX2x1YUxfb3B0aW50ZWdlcj1hZSgibHVhTF9vcHRpbnRlZ2VyIiksaS5fbHVhTF9zZXRmdW5jcz1hZSgibHVhTF9zZXRmdW5jcyIpLGkuX2x1YUxfYWRkbHN0cmluZz1hZSgibHVhTF9hZGRsc3RyaW5nIiksaS5fbHVhTF9wdXNocmVzdWx0c2l6ZT1hZSgibHVhTF9wdXNocmVzdWx0c2l6ZSIpLGkuX2x1YUxfYnVmZmluaXRzaXplPWFlKCJsdWFMX2J1ZmZpbml0c2l6ZSIpLGkuX2x1YUxfcmVmPWFlKCJsdWFMX3JlZiIpLGkuX2x1YUxfdW5yZWY9YWUoImx1YUxfdW5yZWYiKSxpLl9sdWFMX2xvYWRmaWxleD1hZSgibHVhTF9sb2FkZmlsZXgiKSxpLl9sdWFMX2xvYWRidWZmZXJ4PWFlKCJsdWFMX2xvYWRidWZmZXJ4IiksaS5fbHVhTF9sb2Fkc3RyaW5nPWFlKCJsdWFMX2xvYWRzdHJpbmciKSxpLl9sdWFMX2NhbGxtZXRhPWFlKCJsdWFMX2NhbGxtZXRhIiksaS5fbHVhTF9sZW49YWUoImx1YUxfbGVuIiksaS5fbHVhTF90b2xzdHJpbmc9YWUoImx1YUxfdG9sc3RyaW5nIiksaS5fbHVhTF9nZXRzdWJ0YWJsZT1hZSgibHVhTF9nZXRzdWJ0YWJsZSIpLGkuX2x1YUxfcmVxdWlyZWY9YWUoImx1YUxfcmVxdWlyZWYiKSxpLl9sdWFMX2FkZGdzdWI9YWUoImx1YUxfYWRkZ3N1YiIpLGkuX2x1YUxfZ3N1Yj1hZSgibHVhTF9nc3ViIiksaS5fbHVhTF9uZXdzdGF0ZT1hZSgibHVhTF9uZXdzdGF0ZSIpLGkuX2x1YV9uZXdzdGF0ZT1hZSgibHVhX25ld3N0YXRlIiksaS5fZnJlZT1hZSgiZnJlZSIpLGkuX3JlYWxsb2M9YWUoInJlYWxsb2MiKTt2YXIganQ9aS5fZmZsdXNoPWFlKCJmZmx1c2giKTtpLl9sdWFMX2NoZWNrdmVyc2lvbl89YWUoImx1YUxfY2hlY2t2ZXJzaW9uXyIpLGkuX2x1YW9wZW5fYmFzZT1hZSgibHVhb3Blbl9iYXNlIiksaS5fbHVhb3Blbl9jb3JvdXRpbmU9YWUoImx1YW9wZW5fY29yb3V0aW5lIiksaS5fbHVhX25ld3RocmVhZD1hZSgibHVhX25ld3RocmVhZCIpLGkuX2x1YV95aWVsZGs9YWUoImx1YV95aWVsZGsiKSxpLl9sdWFfaXN5aWVsZGFibGU9YWUoImx1YV9pc3lpZWxkYWJsZSIpLGkuX2x1YV9yZXNldHRocmVhZD1hZSgibHVhX3Jlc2V0dGhyZWFkIiksaS5fbHVhX3Jlc3VtZT1hZSgibHVhX3Jlc3VtZSIpLGkuX2x1YW9wZW5fZGVidWc9YWUoImx1YW9wZW5fZGVidWciKSxpLl9sdWFfZ2V0aG9va21hc2s9YWUoImx1YV9nZXRob29rbWFzayIpLGkuX2x1YV9nZXRob29rPWFlKCJsdWFfZ2V0aG9vayIpLGkuX2x1YV9nZXRob29rY291bnQ9YWUoImx1YV9nZXRob29rY291bnQiKSxpLl9sdWFfZ2V0bG9jYWw9YWUoImx1YV9nZXRsb2NhbCIpLGkuX2x1YV9zZXRob29rPWFlKCJsdWFfc2V0aG9vayIpLGkuX2x1YV9zZXRsb2NhbD1hZSgibHVhX3NldGxvY2FsIiksaS5fbHVhX3NldGNzdGFja2xpbWl0PWFlKCJsdWFfc2V0Y3N0YWNrbGltaXQiKTt2YXIgenQ9aS5fbWFsbG9jPWFlKCJtYWxsb2MiKTtpLl9sdWFMX29wZW5saWJzPWFlKCJsdWFMX29wZW5saWJzIiksaS5fbHVhb3Blbl9wYWNrYWdlPWFlKCJsdWFvcGVuX3BhY2thZ2UiKSxpLl9sdWFvcGVuX3RhYmxlPWFlKCJsdWFvcGVuX3RhYmxlIiksaS5fbHVhb3Blbl9pbz1hZSgibHVhb3Blbl9pbyIpLGkuX2x1YW9wZW5fb3M9YWUoImx1YW9wZW5fb3MiKSxpLl9sdWFvcGVuX3N0cmluZz1hZSgibHVhb3Blbl9zdHJpbmciKSxpLl9sdWFvcGVuX21hdGg9YWUoImx1YW9wZW5fbWF0aCIpLGkuX2x1YW9wZW5fdXRmOD1hZSgibHVhb3Blbl91dGY4IiksaS5fbHVhX2Nsb3NlPWFlKCJsdWFfY2xvc2UiKTt2YXIgSHQsJHQ9YWUoInNldFRocmV3IiksR3Q9KCk9PihHdD1WdC5lbXNjcmlwdGVuX3N0YWNrX2luaXQpKCksV3Q9KCk9PihXdD1WdC5lbXNjcmlwdGVuX3N0YWNrX2dldF9lbmQpKCkscXQ9YWUoInN0YWNrU2F2ZSIpLEt0PWFlKCJzdGFja1Jlc3RvcmUiKSxYdD1hZSgic3RhY2tBbGxvYyIpO2Z1bmN0aW9uIEp0KGUsdCxyKXt2YXIgYT1xdCgpO3RyeXtOdChlKSh0LHIpfWNhdGNoKGUpe2lmKEt0KGEpLGUhPT1lKzApdGhyb3cgZTskdCgxLDApfX1mdW5jdGlvbiBadCgpe2lmKCEoMDxHKSl7R3QoKTt2YXIgZT1XdCgpO2lmKE4oISgzJmUpKSwwPT1lJiYoZSs9NCksT1tlPj4yXT0zNDgyMTIyMyxPW2UrND4+Ml09MjMxMDcyMTAyMixPWzBdPTE2Njg1MDkwMjksaS5wcmVSdW4pZm9yKCJmdW5jdGlvbiI9PXR5cGVvZiBpLnByZVJ1biYmKGkucHJlUnVuPVtpLnByZVJ1bl0pO2kucHJlUnVuLmxlbmd0aDspZT1pLnByZVJ1bi5zaGlmdCgpLGoudW5zaGlmdChlKTtmb3IoOzA8ai5sZW5ndGg7KWouc2hpZnQoKShpKTtpZighKDA8Rykpe2lmKCFIdCYmKEh0PSEwLGkuY2FsbGVkUnVuPSEwLCFJKSl7Zm9yKE4oISQpLCQ9ITAsRCgpLGkubm9GU0luaXR8fF90LlIuWXx8X3QuUigpLF90LnRhPSExOzA8ei5sZW5ndGg7KXouc2hpZnQoKShpKTtmb3IoYShpKSxOKCFpLl9tYWluLCdjb21waWxlZCB3aXRob3V0IGEgbWFpbiwgYnV0IG9uZSBpcyBwcmVzZW50LiBpZiB5b3UgYWRkZWQgaXQgZnJvbSBKUywgdXNlIE1vZHVsZVsib25SdW50aW1lSW5pdGlhbGl6ZWQiXScpLEQoKTswPEgubGVuZ3RoOylILnNoaWZ0KCkoaSl9RCgpfX19ZnVuY3Rpb24gUXQoKXt2YXIgZT1FLHQ9TCxyPSExO0U9TD0oKT0+e3I9ITB9O3RyeXtqdCgwKSxbInN0ZG91dCIsInN0ZGVyciJdLmZvckVhY2goKGZ1bmN0aW9uKGUpeyhlPWZ0KCIvZGV2LyIrZSkpJiYoZT1JZVtlLm9iamVjdC5yZGV2XSkmJmUub3V0cHV0JiZlLm91dHB1dC5sZW5ndGgmJihyPSEwKX0pKX1jYXRjaChlKXt9RT1lLEw9dCxyJiZnZSgic3RkaW8gc3RyZWFtcyBoYWQgY29udGVudCBpbiB0aGVtIHRoYXQgd2FzIG5vdCBmbHVzaGVkLiB5b3Ugc2hvdWxkIHNldCBFWElUX1JVTlRJTUUgdG8gMSAoc2VlIHRoZSBFbXNjcmlwdGVuIEZBUSksIG9yIG1ha2Ugc3VyZSB0byBlbWl0IGEgbmV3bGluZSB3aGVuIHlvdSBwcmludGYgZXRjLiIpfXJldHVybiBpLkVOVj1NdCxpLmNjYWxsPShlLHQscixhKT0+e3ZhciBuPXtzdHJpbmc6ZT0+e3ZhciB0PTA7aWYobnVsbCE9ZSYmMCE9PWUpe3Q9RmUoZSkrMTt2YXIgcj1YdCh0KTtUdChlLHIsdCksdD1yfXJldHVybiB0fSxhcnJheTplPT57dmFyIHQ9WHQoZS5sZW5ndGgpO3JldHVybiBQdChlLHQpLHR9fTtlPUN0KGUpO3ZhciBpLHU9W10sbz0wO2lmKE4oImFycmF5IiE9PXQsJ1JldHVybiB0eXBlIHNob3VsZCBub3QgYmUgImFycmF5Ii4nKSxhKWZvcih2YXIgcz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgbD1uW3Jbc11dO2w/KDA9PT1vJiYobz1xdCgpKSx1W3NdPWwoYVtzXSkpOnVbc109YVtzXX1yZXR1cm4gcj1lLmFwcGx5KG51bGwsdSksaT1yLDAhPT1vJiZLdChvKSwic3RyaW5nIj09PXQ/Z3QoaSk6ImJvb2xlYW4iPT09dD8hIWk6aX0saS5hZGRGdW5jdGlvbj0oZSx0KT0+e2lmKE4odm9pZCAwIT09ZSksIUx0KXtMdD1uZXcgV2Vha01hcDt2YXIgcj1FdC5sZW5ndGg7aWYoTHQpZm9yKHZhciBhPTA7YTwwK3I7YSsrKXt2YXIgbj1OdChhKTtuJiZMdC5zZXQobixhKX19aWYocj1MdC5nZXQoZSl8fDApcmV0dXJuIHI7aWYoVXQubGVuZ3RoKXI9VXQucG9wKCk7ZWxzZXt0cnl7RXQuZ3JvdygxKX1jYXRjaChlKXtpZighKGUgaW5zdGFuY2VvZiBSYW5nZUVycm9yKSl0aHJvdyBlO3Rocm93IlVuYWJsZSB0byBncm93IHdhc20gdGFibGUuIFNldCBBTExPV19UQUJMRV9HUk9XVEguIn1yPUV0Lmxlbmd0aC0xfXRyeXthPXIsRXQuc2V0KGEsZSksSXRbYV09RXQuZ2V0KGEpfWNhdGNoKG8pe2lmKCEobyBpbnN0YW5jZW9mIFR5cGVFcnJvcikpdGhyb3cgbztpZihOKHZvaWQgMCE9PXQsIk1pc3Npbmcgc2lnbmF0dXJlIGFyZ3VtZW50IHRvIGFkZEZ1bmN0aW9uOiAiK2UpLCJmdW5jdGlvbiI9PXR5cGVvZiBXZWJBc3NlbWJseS5GdW5jdGlvbil7YT1XZWJBc3NlbWJseS5GdW5jdGlvbixuPXtpOiJpMzIiLGo6Imk2NCIsZjoiZjMyIixkOiJmNjQiLGU6ImV4dGVybnJlZiIscDoiaTMyIn07Zm9yKHZhciBpPXtwYXJhbWV0ZXJzOltdLHJlc3VsdHM6InYiPT10WzBdP1tdOltuW3RbMF1dXX0sdT0xO3U8dC5sZW5ndGg7Kyt1KU4odFt1XWluIG4sImludmFsaWQgc2lnbmF0dXJlIGNoYXI6ICIrdFt1XSksaS5wYXJhbWV0ZXJzLnB1c2goblt0W3VdXSk7dD1uZXcgYShpLGUpfWVsc2V7Zm9yKGE9WzFdLG49dC5zbGljZSgwLDEpLHQ9dC5zbGljZSgxKSxpPXtpOjEyNyxwOjEyNyxqOjEyNixmOjEyNSxkOjEyNCxlOjExMX0sYS5wdXNoKDk2KSxOKDE2Mzg0Pih1PXQubGVuZ3RoKSksMTI4PnU/YS5wdXNoKHUpOmEucHVzaCh1JTEyOHwxMjgsdT4+NyksdT0wO3U8dC5sZW5ndGg7Kyt1KU4odFt1XWluIGksImludmFsaWQgc2lnbmF0dXJlIGNoYXI6ICIrdFt1XSksYS5wdXNoKGlbdFt1XV0pOyJ2Ij09bj9hLnB1c2goMCk6YS5wdXNoKDEsaVtuXSksdD1bMCw5NywxMTUsMTA5LDEsMCwwLDAsMV0sTigxNjM4ND4obj1hLmxlbmd0aCkpLDEyOD5uP3QucHVzaChuKTp0LnB1c2gobiUxMjh8MTI4LG4+PjcpLHQucHVzaC5hcHBseSh0LGEpLHQucHVzaCgyLDcsMSwxLDEwMSwxLDEwMiwwLDAsNyw1LDEsMSwxMDIsMCwwKSx0PW5ldyBXZWJBc3NlbWJseS5Nb2R1bGUobmV3IFVpbnQ4QXJyYXkodCkpLHQ9bmV3IFdlYkFzc2VtYmx5Lkluc3RhbmNlKHQse2U6e2Y6ZX19KS5leHBvcnRzLmZ9YT1yLEV0LnNldChhLHQpLEl0W2FdPUV0LmdldChhKX1yZXR1cm4gTHQuc2V0KGUscikscn0saS5yZW1vdmVGdW5jdGlvbj1lPT57THQuZGVsZXRlKE50KGUpKSxFdC5zZXQoZSxudWxsKSxJdFtlXT1FdC5nZXQoZSksVXQucHVzaChlKX0saS5zZXRWYWx1ZT1mdW5jdGlvbihlLHQscj0iaTgiKXtzd2l0Y2goci5lbmRzV2l0aCgiKiIpJiYocj0iKiIpLHIpe2Nhc2UiaTEiOmNhc2UiaTgiOlNbMHxlXT10O2JyZWFrO2Nhc2UiaTE2IjpSW2U+PjFdPXQ7YnJlYWs7Y2FzZSJpMzIiOk1bZT4+Ml09dDticmVhaztjYXNlImk2NCI6eFtlPj4zXT1CaWdJbnQodCk7YnJlYWs7Y2FzZSJmbG9hdCI6RltlPj4yXT10O2JyZWFrO2Nhc2UiZG91YmxlIjpQW2U+PjNdPXQ7YnJlYWs7Y2FzZSIqIjpPW2U+PjJdPXQ7YnJlYWs7ZGVmYXVsdDpRKGBpbnZhbGlkIHR5cGUgZm9yIHNldFZhbHVlOiAke3J9YCl9fSxpLmdldFZhbHVlPWZ1bmN0aW9uKGUsdD0iaTgiKXtzd2l0Y2godC5lbmRzV2l0aCgiKiIpJiYodD0iKiIpLHQpe2Nhc2UiaTEiOmNhc2UiaTgiOnJldHVybiBTWzB8ZV07Y2FzZSJpMTYiOnJldHVybiBSW2U+PjFdO2Nhc2UiaTMyIjpyZXR1cm4gTVtlPj4yXTtjYXNlImk2NCI6cmV0dXJuIHhbZT4+M107Y2FzZSJmbG9hdCI6cmV0dXJuIEZbZT4+Ml07Y2FzZSJkb3VibGUiOnJldHVybiBQW2U+PjNdO2Nhc2UiKiI6cmV0dXJuIE9bZT4+Ml07ZGVmYXVsdDpRKGBpbnZhbGlkIHR5cGUgZm9yIGdldFZhbHVlOiAke3R9YCl9fSxpLnN0cmluZ1RvVVRGOD1UdCxpLmxlbmd0aEJ5dGVzVVRGOD1GZSxpLnN0cmluZ1RvTmV3VVRGOD1SdCxpLkZTPV90LCJ3cml0ZUk1M1RvSTY0IHdyaXRlSTUzVG9JNjRDbGFtcGVkIHdyaXRlSTUzVG9JNjRTaWduYWxpbmcgd3JpdGVJNTNUb1U2NENsYW1wZWQgd3JpdGVJNTNUb1U2NFNpZ25hbGluZyByZWFkSTUzRnJvbUk2NCByZWFkSTUzRnJvbVU2NCBjb252ZXJ0STMyUGFpclRvSTUzIGNvbnZlcnRJMzJQYWlyVG9JNTNDaGVja2VkIGNvbnZlcnRVMzJQYWlyVG9JNTMgaW5ldFB0b240IGluZXROdG9wNCBpbmV0UHRvbjYgaW5ldE50b3A2IHJlYWRTb2NrYWRkciB3cml0ZVNvY2thZGRyIGdldEhvc3RCeU5hbWUgZ2V0Q2FsbHN0YWNrIGVtc2NyaXB0ZW5Mb2cgY29udmVydFBDdG9Tb3VyY2VMb2NhdGlvbiByZWFkRW1Bc21BcmdzIGpzdG9pX3EganN0b2lfcyBsaXN0ZW5PbmNlIGF1dG9SZXN1bWVBdWRpb0NvbnRleHQgZ2V0RHluQ2FsbGVyIGR5bkNhbGwgaGFuZGxlRXhjZXB0aW9uIHJ1bnRpbWVLZWVwYWxpdmVQdXNoIHJ1bnRpbWVLZWVwYWxpdmVQb3AgY2FsbFVzZXJDYWxsYmFjayBtYXliZUV4aXQgYXNtanNNYW5nbGUgaGFuZGxlQWxsb2NhdG9ySW5pdCBIYW5kbGVBbGxvY2F0b3IgZ2V0TmF0aXZlVHlwZVNpemUgU1RBQ0tfU0laRSBTVEFDS19BTElHTiBQT0lOVEVSX1NJWkUgQVNTRVJUSU9OUyBjd3JhcCByZWFsbHlOZWdhdGl2ZSB1blNpZ24gc3RyTGVuIHJlU2lnbiBmb3JtYXRTdHJpbmcgaW50QXJyYXlUb1N0cmluZyBBc2NpaVRvU3RyaW5nIFVURjE2VG9TdHJpbmcgc3RyaW5nVG9VVEYxNiBsZW5ndGhCeXRlc1VURjE2IFVURjMyVG9TdHJpbmcgc3RyaW5nVG9VVEYzMiBsZW5ndGhCeXRlc1VURjMyIHJlZ2lzdGVyS2V5RXZlbnRDYWxsYmFjayBtYXliZUNTdHJpbmdUb0pzU3RyaW5nIGZpbmRFdmVudFRhcmdldCBmaW5kQ2FudmFzRXZlbnRUYXJnZXQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZpbGxNb3VzZUV2ZW50RGF0YSByZWdpc3Rlck1vdXNlRXZlbnRDYWxsYmFjayByZWdpc3RlcldoZWVsRXZlbnRDYWxsYmFjayByZWdpc3RlclVpRXZlbnRDYWxsYmFjayByZWdpc3RlckZvY3VzRXZlbnRDYWxsYmFjayBmaWxsRGV2aWNlT3JpZW50YXRpb25FdmVudERhdGEgcmVnaXN0ZXJEZXZpY2VPcmllbnRhdGlvbkV2ZW50Q2FsbGJhY2sgZmlsbERldmljZU1vdGlvbkV2ZW50RGF0YSByZWdpc3RlckRldmljZU1vdGlvbkV2ZW50Q2FsbGJhY2sgc2NyZWVuT3JpZW50YXRpb24gZmlsbE9yaWVudGF0aW9uQ2hhbmdlRXZlbnREYXRhIHJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VFdmVudENhbGxiYWNrIGZpbGxGdWxsc2NyZWVuQ2hhbmdlRXZlbnREYXRhIHJlZ2lzdGVyRnVsbHNjcmVlbkNoYW5nZUV2ZW50Q2FsbGJhY2sgSlNFdmVudHNfcmVxdWVzdEZ1bGxzY3JlZW4gSlNFdmVudHNfcmVzaXplQ2FudmFzRm9yRnVsbHNjcmVlbiByZWdpc3RlclJlc3RvcmVPbGRTdHlsZSBoaWRlRXZlcnl0aGluZ0V4Y2VwdEdpdmVuRWxlbWVudCByZXN0b3JlSGlkZGVuRWxlbWVudHMgc2V0TGV0dGVyYm94IHNvZnRGdWxsc2NyZWVuUmVzaXplV2ViR0xSZW5kZXJUYXJnZXQgZG9SZXF1ZXN0RnVsbHNjcmVlbiBmaWxsUG9pbnRlcmxvY2tDaGFuZ2VFdmVudERhdGEgcmVnaXN0ZXJQb2ludGVybG9ja0NoYW5nZUV2ZW50Q2FsbGJhY2sgcmVnaXN0ZXJQb2ludGVybG9ja0Vycm9yRXZlbnRDYWxsYmFjayByZXF1ZXN0UG9pbnRlckxvY2sgZmlsbFZpc2liaWxpdHlDaGFuZ2VFdmVudERhdGEgcmVnaXN0ZXJWaXNpYmlsaXR5Q2hhbmdlRXZlbnRDYWxsYmFjayByZWdpc3RlclRvdWNoRXZlbnRDYWxsYmFjayBmaWxsR2FtZXBhZEV2ZW50RGF0YSByZWdpc3RlckdhbWVwYWRFdmVudENhbGxiYWNrIHJlZ2lzdGVyQmVmb3JlVW5sb2FkRXZlbnRDYWxsYmFjayBmaWxsQmF0dGVyeUV2ZW50RGF0YSBiYXR0ZXJ5IHJlZ2lzdGVyQmF0dGVyeUV2ZW50Q2FsbGJhY2sgc2V0Q2FudmFzRWxlbWVudFNpemUgZ2V0Q2FudmFzRWxlbWVudFNpemUganNTdGFja1RyYWNlIHN0YWNrVHJhY2UgY2hlY2tXYXNpQ2xvY2sgd2FzaVJpZ2h0c1RvTXVzbE9GbGFncyB3YXNpT0ZsYWdzVG9NdXNsT0ZsYWdzIGNyZWF0ZUR5bmNhbGxXcmFwcGVyIHNhZmVTZXRUaW1lb3V0IHNldEltbWVkaWF0ZVdyYXBwZWQgY2xlYXJJbW1lZGlhdGVXcmFwcGVkIHBvbHlmaWxsU2V0SW1tZWRpYXRlIGdldFByb21pc2UgbWFrZVByb21pc2UgaWRzVG9Qcm9taXNlcyBtYWtlUHJvbWlzZUNhbGxiYWNrIHNldE1haW5Mb29wIGdldFNvY2tldEZyb21GRCBnZXRTb2NrZXRBZGRyZXNzIEZTX3VubGluayBGU19ta2RpclRyZWUgX3NldE5ldHdvcmtDYWxsYmFjayIuc3BsaXQoIiAiKS5mb3JFYWNoKChmdW5jdGlvbihlKXsidW5kZWZpbmVkIj09dHlwZW9mIGdsb2JhbFRoaXN8fE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZ2xvYmFsVGhpcyxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbFRoaXMsZSx7Y29uZmlndXJhYmxlOiEwLGdldCgpe3ZhciB0PWBcYCR7ZX1cYCBpcyBhIGxpYnJhcnkgc3ltYm9sIGFuZCBub3QgaW5jbHVkZWQgYnkgZGVmYXVsdDsgYWRkIGl0IHRvIHlvdXIgbGlicmFyeS5qcyBfX2RlcHMgb3IgdG8gREVGQVVMVF9MSUJSQVJZX0ZVTkNTX1RPX0lOQ0xVREUgb24gdGhlIGNvbW1hbmQgbGluZWAscj1lO3Iuc3RhcnRzV2l0aCgiXyIpfHwocj0iJCIrZSksdCs9YCAoZS5nLiAtc0RFRkFVTFRfTElCUkFSWV9GVU5DU19UT19JTkNMVURFPScke3J9JylgLGNlKGUpJiYodCs9Ii4gQWx0ZXJuYXRpdmVseSwgZm9yY2luZyBmaWxlc3lzdGVtIHN1cHBvcnQgKC1zRk9SQ0VfRklMRVNZU1RFTSkgY2FuIGV4cG9ydCB0aGlzIGZvciB5b3UiKSxnZSh0KX19KSxmZShlKX0pKSwicnVuIGFkZE9uUHJlUnVuIGFkZE9uSW5pdCBhZGRPblByZU1haW4gYWRkT25FeGl0IGFkZE9uUG9zdFJ1biBhZGRSdW5EZXBlbmRlbmN5IHJlbW92ZVJ1bkRlcGVuZGVuY3kgRlNfY3JlYXRlRm9sZGVyIEZTX2NyZWF0ZVBhdGggRlNfY3JlYXRlTGF6eUZpbGUgRlNfY3JlYXRlTGluayBGU19jcmVhdGVEZXZpY2UgRlNfcmVhZEZpbGUgb3V0IGVyciBjYWxsTWFpbiBhYm9ydCB3YXNtTWVtb3J5IHdhc21FeHBvcnRzIHN0YWNrQWxsb2Mgc3RhY2tTYXZlIHN0YWNrUmVzdG9yZSBnZXRUZW1wUmV0MCBzZXRUZW1wUmV0MCB3cml0ZVN0YWNrQ29va2llIGNoZWNrU3RhY2tDb29raWUgTUFYX0lOVDUzIE1JTl9JTlQ1MyBiaWdpbnRUb0k1M0NoZWNrZWQgcHRyVG9TdHJpbmcgemVyb01lbW9yeSBleGl0SlMgZ2V0SGVhcE1heCBncm93TWVtb3J5IE1PTlRIX0RBWVNfUkVHVUxBUiBNT05USF9EQVlTX0xFQVAgTU9OVEhfREFZU19SRUdVTEFSX0NVTVVMQVRJVkUgTU9OVEhfREFZU19MRUFQX0NVTVVMQVRJVkUgaXNMZWFwWWVhciB5ZGF5RnJvbURhdGUgYXJyYXlTdW0gYWRkRGF5cyBFUlJOT19DT0RFUyBFUlJOT19NRVNTQUdFUyBzZXRFcnJObyBETlMgUHJvdG9jb2xzIFNvY2tldHMgaW5pdFJhbmRvbUZpbGwgcmFuZG9tRmlsbCB0aW1lcnMgd2Fybk9uY2UgVU5XSU5EX0NBQ0hFIHJlYWRFbUFzbUFyZ3NBcnJheSBnZXRFeGVjdXRhYmxlTmFtZSBrZWVwUnVudGltZUFsaXZlIGFzeW5jTG9hZCBhbGlnbk1lbW9yeSBtbWFwQWxsb2Mgd2FzbVRhYmxlIG5vRXhpdFJ1bnRpbWUgZ2V0Q0Z1bmMgdWxlYjEyOEVuY29kZSBzaWdUb1dhc21UeXBlcyBnZW5lcmF0ZUZ1bmNUeXBlIGNvbnZlcnRKc0Z1bmN0aW9uVG9XYXNtIGZyZWVUYWJsZUluZGV4ZXMgZnVuY3Rpb25zSW5UYWJsZU1hcCBnZXRFbXB0eVRhYmxlU2xvdCB1cGRhdGVUYWJsZU1hcCBnZXRGdW5jdGlvbkFkZHJlc3MgUEFUSCBQQVRIX0ZTIFVURjhEZWNvZGVyIFVURjhBcnJheVRvU3RyaW5nIFVURjhUb1N0cmluZyBzdHJpbmdUb1VURjhBcnJheSBpbnRBcnJheUZyb21TdHJpbmcgc3RyaW5nVG9Bc2NpaSBVVEYxNkRlY29kZXIgc3RyaW5nVG9VVEY4T25TdGFjayB3cml0ZUFycmF5VG9NZW1vcnkgSlNFdmVudHMgc3BlY2lhbEhUTUxUYXJnZXRzIGN1cnJlbnRGdWxsc2NyZWVuU3RyYXRlZ3kgcmVzdG9yZU9sZFdpbmRvd2VkU3R5bGUgZGVtYW5nbGUgZGVtYW5nbGVBbGwgRXhpdFN0YXR1cyBnZXRFbnZTdHJpbmdzIGRvUmVhZHYgZG9Xcml0ZXYgcHJvbWlzZU1hcCBCcm93c2VyIHdnZXQgU1lTQ0FMTFMgcHJlbG9hZFBsdWdpbnMgRlNfY3JlYXRlUHJlbG9hZGVkRmlsZSBGU19tb2RlU3RyaW5nVG9GbGFncyBGU19nZXRNb2RlIEZTX3N0ZGluX2dldENoYXJfYnVmZmVyIEZTX3N0ZGluX2dldENoYXIgRlNfY3JlYXRlRGF0YUZpbGUgTUVNRlMgVFRZIFBJUEVGUyBTT0NLRlMiLnNwbGl0KCIgIikuZm9yRWFjaChmZSkscT1mdW5jdGlvbiBlKCl7SHR8fFp0KCksSHR8fChxPWUpfSxadCgpLHQucmVhZHl9KTtjbGFzcyBEe3N0YXRpYyBhc3luYyBpbml0aWFsaXplKGUsdCl7Y29uc3Qgcj1hd2FpdCBVKHtsb2NhdGVGaWxlOih0LHIpPT5lfHxyK3QscHJlUnVuOmU9Pnsib2JqZWN0Ij09dHlwZW9mIHQmJk9iamVjdC5lbnRyaWVzKHQpLmZvckVhY2goKChbdCxyXSk9PmUuRU5WW3RdPXIpKX19KTtyZXR1cm4gbmV3IEQocil9Y29uc3RydWN0b3IoZSl7dGhpcy5yZWZlcmVuY2VUcmFja2VyPW5ldyBXZWFrTWFwLHRoaXMucmVmZXJlbmNlTWFwPW5ldyBNYXAsdGhpcy5hdmFpbGFibGVSZWZlcmVuY2VzPVtdLHRoaXMubW9kdWxlPWUsdGhpcy5sdWFMX2NoZWNrdmVyc2lvbl89dGhpcy5jd3JhcCgibHVhTF9jaGVja3ZlcnNpb25fIixudWxsLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhTF9nZXRtZXRhZmllbGQ9dGhpcy5jd3JhcCgibHVhTF9nZXRtZXRhZmllbGQiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwic3RyaW5nIl0pLHRoaXMubHVhTF9jYWxsbWV0YT10aGlzLmN3cmFwKCJsdWFMX2NhbGxtZXRhIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsInN0cmluZyJdKSx0aGlzLmx1YUxfdG9sc3RyaW5nPXRoaXMuY3dyYXAoImx1YUxfdG9sc3RyaW5nIiwic3RyaW5nIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfYXJnZXJyb3I9dGhpcy5jd3JhcCgibHVhTF9hcmdlcnJvciIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFMX3R5cGVlcnJvcj10aGlzLmN3cmFwKCJsdWFMX3R5cGVlcnJvciIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFMX2NoZWNrbHN0cmluZz10aGlzLmN3cmFwKCJsdWFMX2NoZWNrbHN0cmluZyIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFMX29wdGxzdHJpbmc9dGhpcy5jd3JhcCgibHVhTF9vcHRsc3RyaW5nIiwic3RyaW5nIixbIm51bWJlciIsIm51bWJlciIsInN0cmluZyIsIm51bWJlciJdKSx0aGlzLmx1YUxfY2hlY2tudW1iZXI9dGhpcy5jd3JhcCgibHVhTF9jaGVja251bWJlciIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFMX29wdG51bWJlcj10aGlzLmN3cmFwKCJsdWFMX29wdG51bWJlciIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFMX2NoZWNraW50ZWdlcj10aGlzLmN3cmFwKCJsdWFMX2NoZWNraW50ZWdlciIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFMX29wdGludGVnZXI9dGhpcy5jd3JhcCgibHVhTF9vcHRpbnRlZ2VyIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfY2hlY2tzdGFjaz10aGlzLmN3cmFwKCJsdWFMX2NoZWNrc3RhY2siLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFMX2NoZWNrdHlwZT10aGlzLmN3cmFwKCJsdWFMX2NoZWNrdHlwZSIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfY2hlY2thbnk9dGhpcy5jd3JhcCgibHVhTF9jaGVja2FueSIsbnVsbCxbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfbmV3bWV0YXRhYmxlPXRoaXMuY3dyYXAoImx1YUxfbmV3bWV0YXRhYmxlIiwibnVtYmVyIixbIm51bWJlciIsInN0cmluZyJdKSx0aGlzLmx1YUxfc2V0bWV0YXRhYmxlPXRoaXMuY3dyYXAoImx1YUxfc2V0bWV0YXRhYmxlIixudWxsLFsibnVtYmVyIiwic3RyaW5nIl0pLHRoaXMubHVhTF90ZXN0dWRhdGE9dGhpcy5jd3JhcCgibHVhTF90ZXN0dWRhdGEiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwic3RyaW5nIl0pLHRoaXMubHVhTF9jaGVja3VkYXRhPXRoaXMuY3dyYXAoImx1YUxfY2hlY2t1ZGF0YSIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFMX3doZXJlPXRoaXMuY3dyYXAoImx1YUxfd2hlcmUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFMX2ZpbGVyZXN1bHQ9dGhpcy5jd3JhcCgibHVhTF9maWxlcmVzdWx0IiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsInN0cmluZyJdKSx0aGlzLmx1YUxfZXhlY3Jlc3VsdD10aGlzLmN3cmFwKCJsdWFMX2V4ZWNyZXN1bHQiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhTF9yZWY9dGhpcy5jd3JhcCgibHVhTF9yZWYiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhTF91bnJlZj10aGlzLmN3cmFwKCJsdWFMX3VucmVmIixudWxsLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhTF9sb2FkZmlsZXg9dGhpcy5jd3JhcCgibHVhTF9sb2FkZmlsZXgiLCJudW1iZXIiLFsibnVtYmVyIiwic3RyaW5nIiwic3RyaW5nIl0pLHRoaXMubHVhTF9sb2FkYnVmZmVyeD10aGlzLmN3cmFwKCJsdWFMX2xvYWRidWZmZXJ4IiwibnVtYmVyIixbIm51bWJlciIsInN0cmluZ3xudW1iZXIiLCJudW1iZXIiLCJzdHJpbmd8bnVtYmVyIiwic3RyaW5nIl0pLHRoaXMubHVhTF9sb2Fkc3RyaW5nPXRoaXMuY3dyYXAoImx1YUxfbG9hZHN0cmluZyIsIm51bWJlciIsWyJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFMX25ld3N0YXRlPXRoaXMuY3dyYXAoImx1YUxfbmV3c3RhdGUiLCJudW1iZXIiLFtdKSx0aGlzLmx1YUxfbGVuPXRoaXMuY3dyYXAoImx1YUxfbGVuIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfYWRkZ3N1Yj10aGlzLmN3cmFwKCJsdWFMX2FkZGdzdWIiLG51bGwsWyJudW1iZXIiLCJzdHJpbmciLCJzdHJpbmciLCJzdHJpbmciXSksdGhpcy5sdWFMX2dzdWI9dGhpcy5jd3JhcCgibHVhTF9nc3ViIiwic3RyaW5nIixbIm51bWJlciIsInN0cmluZyIsInN0cmluZyIsInN0cmluZyJdKSx0aGlzLmx1YUxfc2V0ZnVuY3M9dGhpcy5jd3JhcCgibHVhTF9zZXRmdW5jcyIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfZ2V0c3VidGFibGU9dGhpcy5jd3JhcCgibHVhTF9nZXRzdWJ0YWJsZSIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFMX3RyYWNlYmFjaz10aGlzLmN3cmFwKCJsdWFMX3RyYWNlYmFjayIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsInN0cmluZyIsIm51bWJlciJdKSx0aGlzLmx1YUxfcmVxdWlyZWY9dGhpcy5jd3JhcCgibHVhTF9yZXF1aXJlZiIsbnVsbCxbIm51bWJlciIsInN0cmluZyIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfYnVmZmluaXQ9dGhpcy5jd3JhcCgibHVhTF9idWZmaW5pdCIsbnVsbCxbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfcHJlcGJ1ZmZzaXplPXRoaXMuY3dyYXAoImx1YUxfcHJlcGJ1ZmZzaXplIiwic3RyaW5nIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YUxfYWRkbHN0cmluZz10aGlzLmN3cmFwKCJsdWFMX2FkZGxzdHJpbmciLG51bGwsWyJudW1iZXIiLCJzdHJpbmciLCJudW1iZXIiXSksdGhpcy5sdWFMX2FkZHN0cmluZz10aGlzLmN3cmFwKCJsdWFMX2FkZHN0cmluZyIsbnVsbCxbIm51bWJlciIsInN0cmluZyJdKSx0aGlzLmx1YUxfYWRkdmFsdWU9dGhpcy5jd3JhcCgibHVhTF9hZGR2YWx1ZSIsbnVsbCxbIm51bWJlciJdKSx0aGlzLmx1YUxfcHVzaHJlc3VsdD10aGlzLmN3cmFwKCJsdWFMX3B1c2hyZXN1bHQiLG51bGwsWyJudW1iZXIiXSksdGhpcy5sdWFMX3B1c2hyZXN1bHRzaXplPXRoaXMuY3dyYXAoImx1YUxfcHVzaHJlc3VsdHNpemUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFMX2J1ZmZpbml0c2l6ZT10aGlzLmN3cmFwKCJsdWFMX2J1ZmZpbml0c2l6ZSIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfbmV3c3RhdGU9dGhpcy5jd3JhcCgibHVhX25ld3N0YXRlIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9jbG9zZT10aGlzLmN3cmFwKCJsdWFfY2xvc2UiLG51bGwsWyJudW1iZXIiXSksdGhpcy5sdWFfbmV3dGhyZWFkPXRoaXMuY3dyYXAoImx1YV9uZXd0aHJlYWQiLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhX3Jlc2V0dGhyZWFkPXRoaXMuY3dyYXAoImx1YV9yZXNldHRocmVhZCIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFfYXRwYW5pYz10aGlzLmN3cmFwKCJsdWFfYXRwYW5pYyIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfdmVyc2lvbj10aGlzLmN3cmFwKCJsdWFfdmVyc2lvbiIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFfYWJzaW5kZXg9dGhpcy5jd3JhcCgibHVhX2Fic2luZGV4IiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9nZXR0b3A9dGhpcy5jd3JhcCgibHVhX2dldHRvcCIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFfc2V0dG9wPXRoaXMuY3dyYXAoImx1YV9zZXR0b3AiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfcHVzaHZhbHVlPXRoaXMuY3dyYXAoImx1YV9wdXNodmFsdWUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfcm90YXRlPXRoaXMuY3dyYXAoImx1YV9yb3RhdGUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfY29weT10aGlzLmN3cmFwKCJsdWFfY29weSIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9jaGVja3N0YWNrPXRoaXMuY3dyYXAoImx1YV9jaGVja3N0YWNrIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV94bW92ZT10aGlzLmN3cmFwKCJsdWFfeG1vdmUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfaXNudW1iZXI9dGhpcy5jd3JhcCgibHVhX2lzbnVtYmVyIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9pc3N0cmluZz10aGlzLmN3cmFwKCJsdWFfaXNzdHJpbmciLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2lzY2Z1bmN0aW9uPXRoaXMuY3dyYXAoImx1YV9pc2NmdW5jdGlvbiIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfaXNpbnRlZ2VyPXRoaXMuY3dyYXAoImx1YV9pc2ludGVnZXIiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2lzdXNlcmRhdGE9dGhpcy5jd3JhcCgibHVhX2lzdXNlcmRhdGEiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3R5cGU9dGhpcy5jd3JhcCgibHVhX3R5cGUiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3R5cGVuYW1lPXRoaXMuY3dyYXAoImx1YV90eXBlbmFtZSIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfdG9udW1iZXJ4PXRoaXMuY3dyYXAoImx1YV90b251bWJlcngiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3RvaW50ZWdlcng9dGhpcy5jd3JhcCgibHVhX3RvaW50ZWdlcngiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3RvYm9vbGVhbj10aGlzLmN3cmFwKCJsdWFfdG9ib29sZWFuIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV90b2xzdHJpbmc9dGhpcy5jd3JhcCgibHVhX3RvbHN0cmluZyIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfcmF3bGVuPXRoaXMuY3dyYXAoImx1YV9yYXdsZW4iLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3RvY2Z1bmN0aW9uPXRoaXMuY3dyYXAoImx1YV90b2NmdW5jdGlvbiIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfdG91c2VyZGF0YT10aGlzLmN3cmFwKCJsdWFfdG91c2VyZGF0YSIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfdG90aHJlYWQ9dGhpcy5jd3JhcCgibHVhX3RvdGhyZWFkIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV90b3BvaW50ZXI9dGhpcy5jd3JhcCgibHVhX3RvcG9pbnRlciIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfYXJpdGg9dGhpcy5jd3JhcCgibHVhX2FyaXRoIixudWxsLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3Jhd2VxdWFsPXRoaXMuY3dyYXAoImx1YV9yYXdlcXVhbCIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfY29tcGFyZT10aGlzLmN3cmFwKCJsdWFfY29tcGFyZSIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfcHVzaG5pbD10aGlzLmN3cmFwKCJsdWFfcHVzaG5pbCIsbnVsbCxbIm51bWJlciJdKSx0aGlzLmx1YV9wdXNobnVtYmVyPXRoaXMuY3dyYXAoImx1YV9wdXNobnVtYmVyIixudWxsLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3B1c2hpbnRlZ2VyPXRoaXMuY3dyYXAoImx1YV9wdXNoaW50ZWdlciIsbnVsbCxbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9wdXNobHN0cmluZz10aGlzLmN3cmFwKCJsdWFfcHVzaGxzdHJpbmciLCJzdHJpbmciLFsibnVtYmVyIiwic3RyaW5nfG51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9wdXNoc3RyaW5nPXRoaXMuY3dyYXAoImx1YV9wdXNoc3RyaW5nIiwic3RyaW5nIixbIm51bWJlciIsInN0cmluZ3xudW1iZXIiXSksdGhpcy5sdWFfcHVzaGNjbG9zdXJlPXRoaXMuY3dyYXAoImx1YV9wdXNoY2Nsb3N1cmUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfcHVzaGJvb2xlYW49dGhpcy5jd3JhcCgibHVhX3B1c2hib29sZWFuIixudWxsLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3B1c2hsaWdodHVzZXJkYXRhPXRoaXMuY3dyYXAoImx1YV9wdXNobGlnaHR1c2VyZGF0YSIsbnVsbCxbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9wdXNodGhyZWFkPXRoaXMuY3dyYXAoImx1YV9wdXNodGhyZWFkIiwibnVtYmVyIixbIm51bWJlciJdKSx0aGlzLmx1YV9nZXRnbG9iYWw9dGhpcy5jd3JhcCgibHVhX2dldGdsb2JhbCIsIm51bWJlciIsWyJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFfZ2V0dGFibGU9dGhpcy5jd3JhcCgibHVhX2dldHRhYmxlIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9nZXRmaWVsZD10aGlzLmN3cmFwKCJsdWFfZ2V0ZmllbGQiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwic3RyaW5nIl0pLHRoaXMubHVhX2dldGk9dGhpcy5jd3JhcCgibHVhX2dldGkiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3Jhd2dldD10aGlzLmN3cmFwKCJsdWFfcmF3Z2V0IiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9yYXdnZXRpPXRoaXMuY3dyYXAoImx1YV9yYXdnZXRpIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9yYXdnZXRwPXRoaXMuY3dyYXAoImx1YV9yYXdnZXRwIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9jcmVhdGV0YWJsZT10aGlzLmN3cmFwKCJsdWFfY3JlYXRldGFibGUiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfbmV3dXNlcmRhdGF1dj10aGlzLmN3cmFwKCJsdWFfbmV3dXNlcmRhdGF1diIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfZ2V0bWV0YXRhYmxlPXRoaXMuY3dyYXAoImx1YV9nZXRtZXRhdGFibGUiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2dldGl1c2VydmFsdWU9dGhpcy5jd3JhcCgibHVhX2dldGl1c2VydmFsdWUiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3NldGdsb2JhbD10aGlzLmN3cmFwKCJsdWFfc2V0Z2xvYmFsIixudWxsLFsibnVtYmVyIiwic3RyaW5nIl0pLHRoaXMubHVhX3NldHRhYmxlPXRoaXMuY3dyYXAoImx1YV9zZXR0YWJsZSIsbnVsbCxbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9zZXRmaWVsZD10aGlzLmN3cmFwKCJsdWFfc2V0ZmllbGQiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFfc2V0aT10aGlzLmN3cmFwKCJsdWFfc2V0aSIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9yYXdzZXQ9dGhpcy5jd3JhcCgibHVhX3Jhd3NldCIsbnVsbCxbIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9yYXdzZXRpPXRoaXMuY3dyYXAoImx1YV9yYXdzZXRpIixudWxsLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3Jhd3NldHA9dGhpcy5jd3JhcCgibHVhX3Jhd3NldHAiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfc2V0bWV0YXRhYmxlPXRoaXMuY3dyYXAoImx1YV9zZXRtZXRhdGFibGUiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3NldGl1c2VydmFsdWU9dGhpcy5jd3JhcCgibHVhX3NldGl1c2VydmFsdWUiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2NhbGxrPXRoaXMuY3dyYXAoImx1YV9jYWxsayIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9wY2FsbGs9dGhpcy5jd3JhcCgibHVhX3BjYWxsayIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfbG9hZD10aGlzLmN3cmFwKCJsdWFfbG9hZCIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiLCJzdHJpbmciLCJzdHJpbmciXSksdGhpcy5sdWFfZHVtcD10aGlzLmN3cmFwKCJsdWFfZHVtcCIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfeWllbGRrPXRoaXMuY3dyYXAoImx1YV95aWVsZGsiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3Jlc3VtZT10aGlzLmN3cmFwKCJsdWFfcmVzdW1lIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9zdGF0dXM9dGhpcy5jd3JhcCgibHVhX3N0YXR1cyIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFfaXN5aWVsZGFibGU9dGhpcy5jd3JhcCgibHVhX2lzeWllbGRhYmxlIiwibnVtYmVyIixbIm51bWJlciJdKSx0aGlzLmx1YV9zZXR3YXJuZj10aGlzLmN3cmFwKCJsdWFfc2V0d2FybmYiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfd2FybmluZz10aGlzLmN3cmFwKCJsdWFfd2FybmluZyIsbnVsbCxbIm51bWJlciIsInN0cmluZyIsIm51bWJlciJdKSx0aGlzLmx1YV9lcnJvcj10aGlzLmN3cmFwKCJsdWFfZXJyb3IiLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhX25leHQ9dGhpcy5jd3JhcCgibHVhX25leHQiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2NvbmNhdD10aGlzLmN3cmFwKCJsdWFfY29uY2F0IixudWxsLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2xlbj10aGlzLmN3cmFwKCJsdWFfbGVuIixudWxsLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3N0cmluZ3RvbnVtYmVyPXRoaXMuY3dyYXAoImx1YV9zdHJpbmd0b251bWJlciIsIm51bWJlciIsWyJudW1iZXIiLCJzdHJpbmciXSksdGhpcy5sdWFfZ2V0YWxsb2NmPXRoaXMuY3dyYXAoImx1YV9nZXRhbGxvY2YiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3NldGFsbG9jZj10aGlzLmN3cmFwKCJsdWFfc2V0YWxsb2NmIixudWxsLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3RvY2xvc2U9dGhpcy5jd3JhcCgibHVhX3RvY2xvc2UiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfY2xvc2VzbG90PXRoaXMuY3dyYXAoImx1YV9jbG9zZXNsb3QiLG51bGwsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfZ2V0c3RhY2s9dGhpcy5jd3JhcCgibHVhX2dldHN0YWNrIiwibnVtYmVyIixbIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9nZXRpbmZvPXRoaXMuY3dyYXAoImx1YV9nZXRpbmZvIiwibnVtYmVyIixbIm51bWJlciIsInN0cmluZyIsIm51bWJlciJdKSx0aGlzLmx1YV9nZXRsb2NhbD10aGlzLmN3cmFwKCJsdWFfZ2V0bG9jYWwiLCJzdHJpbmciLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3NldGxvY2FsPXRoaXMuY3dyYXAoImx1YV9zZXRsb2NhbCIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfZ2V0dXB2YWx1ZT10aGlzLmN3cmFwKCJsdWFfZ2V0dXB2YWx1ZSIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfc2V0dXB2YWx1ZT10aGlzLmN3cmFwKCJsdWFfc2V0dXB2YWx1ZSIsInN0cmluZyIsWyJudW1iZXIiLCJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFfdXB2YWx1ZWlkPXRoaXMuY3dyYXAoImx1YV91cHZhbHVlaWQiLCJudW1iZXIiLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX3VwdmFsdWVqb2luPXRoaXMuY3dyYXAoImx1YV91cHZhbHVlam9pbiIsbnVsbCxbIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciIsIm51bWJlciJdKSx0aGlzLmx1YV9zZXRob29rPXRoaXMuY3dyYXAoImx1YV9zZXRob29rIixudWxsLFsibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIiwibnVtYmVyIl0pLHRoaXMubHVhX2dldGhvb2s9dGhpcy5jd3JhcCgibHVhX2dldGhvb2siLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhX2dldGhvb2ttYXNrPXRoaXMuY3dyYXAoImx1YV9nZXRob29rbWFzayIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFfZ2V0aG9va2NvdW50PXRoaXMuY3dyYXAoImx1YV9nZXRob29rY291bnQiLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhX3NldGNzdGFja2xpbWl0PXRoaXMuY3dyYXAoImx1YV9zZXRjc3RhY2tsaW1pdCIsIm51bWJlciIsWyJudW1iZXIiLCJudW1iZXIiXSksdGhpcy5sdWFvcGVuX2Jhc2U9dGhpcy5jd3JhcCgibHVhb3Blbl9iYXNlIiwibnVtYmVyIixbIm51bWJlciJdKSx0aGlzLmx1YW9wZW5fY29yb3V0aW5lPXRoaXMuY3dyYXAoImx1YW9wZW5fY29yb3V0aW5lIiwibnVtYmVyIixbIm51bWJlciJdKSx0aGlzLmx1YW9wZW5fdGFibGU9dGhpcy5jd3JhcCgibHVhb3Blbl90YWJsZSIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFvcGVuX2lvPXRoaXMuY3dyYXAoImx1YW9wZW5faW8iLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhb3Blbl9vcz10aGlzLmN3cmFwKCJsdWFvcGVuX29zIiwibnVtYmVyIixbIm51bWJlciJdKSx0aGlzLmx1YW9wZW5fc3RyaW5nPXRoaXMuY3dyYXAoImx1YW9wZW5fc3RyaW5nIiwibnVtYmVyIixbIm51bWJlciJdKSx0aGlzLmx1YW9wZW5fdXRmOD10aGlzLmN3cmFwKCJsdWFvcGVuX3V0ZjgiLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhb3Blbl9tYXRoPXRoaXMuY3dyYXAoImx1YW9wZW5fbWF0aCIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFvcGVuX2RlYnVnPXRoaXMuY3dyYXAoImx1YW9wZW5fZGVidWciLCJudW1iZXIiLFsibnVtYmVyIl0pLHRoaXMubHVhb3Blbl9wYWNrYWdlPXRoaXMuY3dyYXAoImx1YW9wZW5fcGFja2FnZSIsIm51bWJlciIsWyJudW1iZXIiXSksdGhpcy5sdWFMX29wZW5saWJzPXRoaXMuY3dyYXAoImx1YUxfb3BlbmxpYnMiLG51bGwsWyJudW1iZXIiXSl9bHVhX3JlbW92ZShlLHQpe3RoaXMubHVhX3JvdGF0ZShlLHQsLTEpLHRoaXMubHVhX3BvcChlLDEpfWx1YV9wb3AoZSx0KXt0aGlzLmx1YV9zZXR0b3AoZSwtdC0xKX1sdWFMX2dldG1ldGF0YWJsZShlLHQpe3JldHVybiB0aGlzLmx1YV9nZXRmaWVsZChlLHUsdCl9bHVhX3lpZWxkKGUsdCl7cmV0dXJuIHRoaXMubHVhX3lpZWxkayhlLHQsMCxudWxsKX1sdWFfdXB2YWx1ZWluZGV4KGUpe3JldHVybiB1LWV9cmVmKGUpe2NvbnN0IHQ9dGhpcy5yZWZlcmVuY2VUcmFja2VyLmdldChlKTtpZih0KXJldHVybiB0LnJlZkNvdW50KyssdC5pbmRleDtjb25zdCByPXRoaXMuYXZhaWxhYmxlUmVmZXJlbmNlcy5wb3AoKSxhPXZvaWQgMD09PXI/dGhpcy5yZWZlcmVuY2VNYXAuc2l6ZSsxOnI7cmV0dXJuIHRoaXMucmVmZXJlbmNlTWFwLnNldChhLGUpLHRoaXMucmVmZXJlbmNlVHJhY2tlci5zZXQoZSx7cmVmQ291bnQ6MSxpbmRleDphfSksdGhpcy5sYXN0UmVmSW5kZXg9YSxhfXVucmVmKGUpe2NvbnN0IHQ9dGhpcy5yZWZlcmVuY2VNYXAuZ2V0KGUpO2lmKHZvaWQgMD09PXQpcmV0dXJuO2NvbnN0IHI9dGhpcy5yZWZlcmVuY2VUcmFja2VyLmdldCh0KTtpZih2b2lkIDA9PT1yKXJldHVybiB0aGlzLnJlZmVyZW5jZVRyYWNrZXIuZGVsZXRlKHQpLHZvaWQgdGhpcy5hdmFpbGFibGVSZWZlcmVuY2VzLnB1c2goZSk7ci5yZWZDb3VudC0tLHIucmVmQ291bnQ8PTAmJih0aGlzLnJlZmVyZW5jZVRyYWNrZXIuZGVsZXRlKHQpLHRoaXMucmVmZXJlbmNlTWFwLmRlbGV0ZShlKSx0aGlzLmF2YWlsYWJsZVJlZmVyZW5jZXMucHVzaChlKSl9Z2V0UmVmKGUpe3JldHVybiB0aGlzLnJlZmVyZW5jZU1hcC5nZXQoZSl9Z2V0TGFzdFJlZkluZGV4KCl7cmV0dXJuIHRoaXMubGFzdFJlZkluZGV4fXByaW50UmVmcygpe2Zvcihjb25zdFtlLHRdb2YgdGhpcy5yZWZlcmVuY2VNYXAuZW50cmllcygpKWNvbnNvbGUubG9nKGUsdCl9Y3dyYXAoZSx0LHIpe3JldHVybiByLnNvbWUoKGU9PiJzdHJpbmd8bnVtYmVyIj09PWUpKT8oLi4uYSk9Pntjb25zdCBuPVtdLGk9ci5tYXAoKChlLHQpPT57dmFyIHI7aWYoInN0cmluZ3xudW1iZXIiPT09ZSl7aWYoIm51bWJlciI9PXR5cGVvZiBhW3RdKXJldHVybiJudW1iZXIiO2lmKChudWxsPT09KHI9YVt0XSl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGVuZ3RoKT4xMDI0KXtjb25zdCBlPXRoaXMubW9kdWxlLnN0cmluZ1RvTmV3VVRGOChhW3RdKTtyZXR1cm4gYVt0XT1lLG4ucHVzaChlKSwibnVtYmVyIn1yZXR1cm4ic3RyaW5nIn1yZXR1cm4gZX0pKTt0cnl7cmV0dXJuIHRoaXMubW9kdWxlLmNjYWxsKGUsdCxpLGEpfWZpbmFsbHl7Zm9yKGNvbnN0IGUgb2Ygbil0aGlzLm1vZHVsZS5fZnJlZShlKX19OiguLi5hKT0+dGhpcy5tb2R1bGUuY2NhbGwoZSx0LHIsYSl9fXZhciBWPSIxLjE2LjAiO2NsYXNzIFl7Y29uc3RydWN0b3IoZSx0KXt2YXIgcjt2b2lkIDA9PT1lJiYoIm9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJnZvaWQgMCE9PXdpbmRvdy5kb2N1bWVudHx8Im9iamVjdCI9PXR5cGVvZiBzZWxmJiYiRGVkaWNhdGVkV29ya2VyR2xvYmFsU2NvcGUiPT09KG51bGw9PT0ocj1udWxsPT09c2VsZnx8dm9pZCAwPT09c2VsZj92b2lkIDA6c2VsZi5jb25zdHJ1Y3Rvcil8fHZvaWQgMD09PXI/dm9pZCAwOnIubmFtZSkpJiYoZT1gaHR0cHM6Ly91bnBrZy5jb20vd2FzbW9vbkAke1Z9L2Rpc3QvZ2x1ZS53YXNtYCksdGhpcy5sdWFXYXNtUHJvbWlzZT1ELmluaXRpYWxpemUoZSx0KX1hc3luYyBtb3VudEZpbGUoZSx0KXt0aGlzLm1vdW50RmlsZVN5bmMoYXdhaXQgdGhpcy5nZXRMdWFNb2R1bGUoKSxlLHQpfW1vdW50RmlsZVN5bmMoZSx0LHIpe2NvbnN0IGE9dC5sYXN0SW5kZXhPZigiLyIpLG49dC5zdWJzdHJpbmcoYSsxKSxpPXQuc3Vic3RyaW5nKDAsdC5sZW5ndGgtbi5sZW5ndGgtMSk7aWYoaS5sZW5ndGg+MCl7Y29uc3QgdD1pLnNwbGl0KCIvIikucmV2ZXJzZSgpO2xldCByPSIiO2Zvcig7dC5sZW5ndGg7KXtjb25zdCBhPXQucG9wKCk7aWYoIWEpY29udGludWU7Y29uc3Qgbj1gJHtyfS8ke2F9YDt0cnl7ZS5tb2R1bGUuRlMubWtkaXIobil9Y2F0Y2goZSl7fXI9bn19ZS5tb2R1bGUuRlMud3JpdGVGaWxlKHQscil9YXN5bmMgY3JlYXRlRW5naW5lKGU9e30pe3JldHVybiBuZXcgTihhd2FpdCB0aGlzLmdldEx1YU1vZHVsZSgpLGUpfWFzeW5jIGdldEx1YU1vZHVsZSgpe3JldHVybiB0aGlzLmx1YVdhc21Qcm9taXNlfX10LkRlY29yYXRpb249cyx0LkxVQUlfTUFYU1RBQ0s9aSx0LkxVQV9NVUxUUkVUPW4sdC5MVUFfUkVHSVNUUllJTkRFWD11LHQuTHVhRW5naW5lPU4sdC5MdWFGYWN0b3J5PVksdC5MdWFHbG9iYWw9cCx0Lkx1YU11bHRpUmV0dXJuPWMsdC5MdWFSYXdSZXN1bHQ9Yix0Lkx1YVRocmVhZD1mLHQuTHVhVGltZW91dEVycm9yPW8sdC5MdWFUeXBlRXh0ZW5zaW9uPW0sdC5MdWFXYXNtPUQsdC5Qb2ludGVyU2l6ZT1hLHQuZGVjb3JhdGU9bCx0LmRlY29yYXRlRnVuY3Rpb249dyx0LmRlY29yYXRlUHJveHk9QSx0LmRlY29yYXRlVXNlcmRhdGE9eH0oVGUuZXhwb3J0cyk7dmFyIGtlPVRlLmV4cG9ydHMsU2U9VGUuZXhwb3J0cy5EZWNvcmF0aW9uLEFlPVRlLmV4cG9ydHMuTFVBSV9NQVhTVEFDSyxSZT1UZS5leHBvcnRzLkxVQV9NVUxUUkVULE1lPVRlLmV4cG9ydHMuTFVBX1JFR0lTVFJZSU5ERVgsT2U9VGUuZXhwb3J0cy5MdWFFbmdpbmUsRmU9VGUuZXhwb3J0cy5MdWFFdmVudENvZGVzLHhlPVRlLmV4cG9ydHMuTHVhRXZlbnRNYXNrcyxQZT1UZS5leHBvcnRzLkx1YUZhY3RvcnksSWU9VGUuZXhwb3J0cy5MdWFHbG9iYWwsTmU9VGUuZXhwb3J0cy5MdWFMaWJyYXJpZXMsQ2U9VGUuZXhwb3J0cy5MdWFNdWx0aVJldHVybixVZT1UZS5leHBvcnRzLkx1YVJhd1Jlc3VsdCxEZT1UZS5leHBvcnRzLkx1YVJldHVybixCZT1UZS5leHBvcnRzLkx1YVRocmVhZCxWZT1UZS5leHBvcnRzLkx1YVRpbWVvdXRFcnJvcixZZT1UZS5leHBvcnRzLkx1YVR5cGUsamU9VGUuZXhwb3J0cy5MdWFUeXBlRXh0ZW5zaW9uLHplPVRlLmV4cG9ydHMuTHVhV2FzbSxIZT1UZS5leHBvcnRzLlBvaW50ZXJTaXplLCRlPVRlLmV4cG9ydHMuZGVjb3JhdGUsR2U9VGUuZXhwb3J0cy5kZWNvcmF0ZUZ1bmN0aW9uLFdlPVRlLmV4cG9ydHMuZGVjb3JhdGVQcm94eSxxZT1UZS5leHBvcnRzLmRlY29yYXRlVXNlcmRhdGE7ZXhwb3J0e1NlIGFzIERlY29yYXRpb24sQWUgYXMgTFVBSV9NQVhTVEFDSyxSZSBhcyBMVUFfTVVMVFJFVCxNZSBhcyBMVUFfUkVHSVNUUllJTkRFWCxPZSBhcyBMdWFFbmdpbmUsRmUgYXMgTHVhRXZlbnRDb2Rlcyx4ZSBhcyBMdWFFdmVudE1hc2tzLFBlIGFzIEx1YUZhY3RvcnksSWUgYXMgTHVhR2xvYmFsLE5lIGFzIEx1YUxpYnJhcmllcyxDZSBhcyBMdWFNdWx0aVJldHVybixVZSBhcyBMdWFSYXdSZXN1bHQsRGUgYXMgTHVhUmV0dXJuLEJlIGFzIEx1YVRocmVhZCxWZSBhcyBMdWFUaW1lb3V0RXJyb3IsWWUgYXMgTHVhVHlwZSxqZSBhcyBMdWFUeXBlRXh0ZW5zaW9uLHplIGFzIEx1YVdhc20sSGUgYXMgUG9pbnRlclNpemUsJGUgYXMgZGVjb3JhdGUsR2UgYXMgZGVjb3JhdGVGdW5jdGlvbixXZSBhcyBkZWNvcmF0ZVByb3h5LHFlIGFzIGRlY29yYXRlVXNlcmRhdGEsa2UgYXMgZGVmYXVsdH07Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPS9zbS8wZWU2YzBjOTkxOWE0YTc1MGRlNzY0NDdhNTc5NGE0OGEzNjg2YWZmNjJiOWFhYjNkMjI1NmM0MDU3NTZlNDI5Lm1hcA==');
  const factory = new LuaFactory();
  let canRunLUA = true; // <- this should probably be false initially // but then people will complain about it not working
  let lua = await factory.createEngine();


  // @ts-ignore
  const sbfuncArgs = Symbol('sbfuncArgs');
  const sbfuncwatcher = Symbol('sbfuncwatcher');
  const sbfuncstatus = Symbol('sbfuncstatus');

  // Utility functions
  const formatRes = (res) => {
    if (res === '') return '[empty String]';
    if (res === true) return '[boolean True]';
    if (res === false) return '[boolean False]';
    if (res === null) return '[empty Null]';
    if (res === undefined) return '[empty Undefined]';
    if (typeof res === 'object') {
      if (Array.isArray(res)) return '[object Array]';
      return '[object Object]';
    }
    if (typeof res === 'function') return '[object Function]';
    if (typeof res === 'number') return `[number ${res}]`;
    return `[string|empty <\n${res}\n>]`;
  };
  const _getVarObjectFromName = (name, util, type) => {
    const stageTarget = runtime.getTargetForStage();
    const target = util.target;
    let listObject = Object.create(null);

    listObject = stageTarget.lookupVariableByNameAndType(name, type);
    if (listObject) return listObject;
    listObject = target.lookupVariableByNameAndType(name, type);
    if (listObject) return listObject;
  };

  function _parseJSON(obj) {
    if (Array.isArray(obj)) return {};
    if (typeof obj === 'object') return obj;
    try {
      obj = JSON.parse(obj);
      if (Array.isArray(obj)) return {};
      if (typeof obj === 'object') return obj;
      return {};
    } catch {
      return {};
    }
  }

  // Resetting the lua runtime
  // @ts-ignore
  let reloadOnStart = true; // <- this is a variable to make sure the lua engine is reset on flag click
  async function resetLua() {
    const threads = runtime.threads;
    const oldStatus = [];
    for (var i = 0; i < threads.length; i++) {
      const thisThread = threads[i];
      oldStatus.push(thisThread.status);
      thisThread.status = 5;
    }
    lua.global.close();
    lua = await factory.createEngine();
    for (var i = 0; i < threads.length; i++) {
      threads[i].status = oldStatus[i];
    }
  }

  const cbfsb = runtime._convertBlockForScratchBlocks.bind(runtime);
  runtime._convertBlockForScratchBlocks = function (blockInfo, categoryInfo) {
    const res = cbfsb(blockInfo, categoryInfo);
    if (blockInfo.outputShape) {
      res.json.outputShape = blockInfo.outputShape;
    }
    return res;
  };

  // Actual extension code
  class extension {
    get lua() {
      return lua;
    }
    static get MoreFields() {
      if (!runtime.ext_0znzwMoreFields) return false;
      if (!ArgumentType.INLINETEXTAREA) return false;
      if (!runtime.ext_0znzwMoreFields.constructor.customFieldTypes) return false;
      return true;
    }
    static get customFieldTypes() {
      return extension.MoreFields ? runtime.ext_0znzwMoreFields.constructor.customFieldTypes : {};
    }
    constructor() {
      this.DEBUG = true;
      this.DO_INIT = true;
      this._curErrorMsg = '';
      this._lastErrorMsg = '';

      // Some things may require util
      this.preservedUtil = null;
      this.setupClasses();
    }
    getInfo() {
      const MoreFields = extension.MoreFields;
      return {
        id: extId,
        name: 'Lua',
        color1: '#000080',
        color2: '#808080',
        color3: '#ffffff',
        menuIconURI,
        blocks: [
          {opcode: 'VMState', func: 'isLUAenabled', blockType: BlockType.BOOLEAN, text: 'is lua on?'},
          {opcode: 'toggleInit', func: 'setScratchCommandsEnabled', blockType: BlockType.COMMAND, text: 'enable scratch commands for lua? [INIT]', arguments: {INIT: {type: ArgumentType.BOOLEAN}}},
          {opcode: 'luaVMdo', blockType: BlockType.COMMAND, text: '[ACTION] lua vm', arguments: {ACTION: {type: ArgumentType.STRING, menu: `luaVMdo`, defaultValue: `stop`}}, func: 'luaVMdo'},
          {opcode: 'no_op_0', blockType: BlockType.COMMAND, text: 'run lua [CODE]', arguments: {CODE: {type: MoreFields ? 'TextareaInputInline' : ArgumentType.STRING, defaultValue: `--data.set("variable", "value", is a list?) \ndata.set("my variable", "It works!", false) \nprint(data.get("my variable"))`}}, func: 'runLua'},
          {opcode: 'no_op_1', blockType: BlockType.REPORTER, text: 'run lua [CODE]', arguments: {CODE: {type: MoreFields ? 'TextareaInputInline' : ArgumentType.STRING, defaultValue: `--data.set("variable", "value", is a list?) \ndata.set("my variable", "Success!", false) \nreturn(data.get("my variable"))`}}, func: 'runLua', outputShape: 3},
          '---',
          {opcode: 'no_op_4', blockType: Scratch.BlockType.REPORTER, text: 'variable [VAR]', outputShape: Scratch.extensions.isPenguinmod ? 5 : 3, blockShape: Scratch.extensions.isPenguinmod ? 5 : 3, arguments: {VAR: {type: ArgumentType.STRING}}, allowDropAnywhere: true, func: 'getVar'},
          '---',
          {opcode: 'linkedFunctionCallback', blockType: BlockType.EVENT, text: 'when sbfunc() is called', isEdgeActivated: false, shouldRestartExistingThreads: true},
          {opcode: 'linkedFunctionCallbackReturn', blockType: BlockType.COMMAND, text: 'return [DATA]', arguments: {DATA: {type: ArgumentType.STRING}}, isTerminal: true},
          {opcode: 'no_op_5', blockType: Scratch.BlockType.REPORTER, text: '[TYPE] arguments', arguments: {TYPE: {type: ArgumentType.STRING, defaultValue: 'pure', menu: 'argreptypes'}}, allowDropAnywhere: true, disableMonitor: true, outputShape: 3, func: 'getsbfuncArgs'},
          {opcode: 'no_op_6', blockType: Scratch.BlockType.REPORTER, text: 'argument [NUM]', arguments: {NUM: {type: ArgumentType.NUMBER, defaultValue: 1}}, allowDropAnywhere: true, disableMonitor: true, func: 'getsbfuncArgsnum'},
          {opcode: 'no_op_7', blockType: Scratch.BlockType.REPORTER, text: 'argument count', allowDropAnywhere: true, disableMonitor: true, func: 'getsbfuncArgscnt'},
          '---',
          {opcode: 'onError', blockType: BlockType.EVENT, text: 'when catching an error', isEdgeActivated: false, shouldRestartExistingThreads: true},
          {opcode: 'curError', blockType: Scratch.BlockType.REPORTER, text: 'current error', allowDropAnywhere: true},
          {opcode: 'lastError', blockType: Scratch.BlockType.REPORTER, text: 'last error', allowDropAnywhere: true},
          {opcode: 'clearLastErrorMsg', blockType: Scratch.BlockType.COMMAND, text: 'clear last error message'},
        ],
        menus: {luaVMdo: {acceptReporters: true, items: ['stop', 'start', 'reset']}, argreptypes: {acceptReporters: true, items: ['pure', 'stringified']}},
        customFieldTypes: extension.customFieldTypes,
      };
    }

    // no-op functions ignore these and leave them blank
    isLUAenabled() {
      return canRunLUA;
    }
    no_op_0() {}
    no_op_1() {}
    no_op_2() {}
    no_op_3() {}
    no_op_4() {}
    no_op_5() {}
    no_op_6() {}
    no_op_7() {}
    onError() {}
    lastError() {
      return this._lastErrorMsg || '';
    }
    curError() {
      return this._curErrorMsg || '';
    }

    _extensions() {
      // @ts-ignore
      const arr = Array.from(vm.extensionManager._loadedExtensions.keys());
      if (typeof arr[0] !== 'string') arr.push('');
      return arr;
    }
    runBlock({EXT, OPCODE, ARGS}, util, blockJSON) {
      /* @author https://github.com/TheShovel/ */
      /* @author https://scratch.mit.edu/users/0znzw/ */
      /* @link https://github.com/PenguinMod/PenguinMod-ExtensionsGallery/blob/main/static/extensions/TheShovel/extexp.js */
      // (and the subsequent custom functions ^)
      if (((EXT = Cast.toString(EXT)), (!this._extensions().includes(EXT) || EXT === '') && !runtime[`ext_${EXT}`])) return '';
      const fn = runtime._primitives[`${EXT}_${Cast.toString(OPCODE)}`] || runtime[`ext_${EXT}`]?.[Cast.toString(OPCODE)];
      if (!fn) return '';
      // blockJSON is not "as" important as util
      // util is usually required for a block to even run
      // expect a lot of errors if it is missing
      const res = fn(_parseJSON(ARGS), this._util(util), blockJSON || {});
      if (this.DEBUG) console.trace(`runBlock_JS | Ran ${EXT}_${OPCODE} and got:\n`, formatRes(res));
      return res;
    }

    getVar(args) {
      const v = lua.global.get(Cast.toString(args.VAR));
      return (v === null) ? '' : v;
    }


    linkedFunctionCallback(){}
    
    linkedFunctionCallbackReturn(args, { thread }) {
      // Make sure to do this first otherwise the default return value may be returned. //what's "this"
      // this fixes an edge case where there is only 1 thread.      
      // Don't cast the return value as we don't know what it can be :3
      if (thread[sbfuncwatcher]) thread[sbfuncwatcher](args.DATA);
      thread.stopThisScript(); //never defined. is this a natural scratch api function or something?
      thread.status = Thread.STATUS_DONE; // likely has something to do with this. u sure this is right?
    }

    _util(util) {
      return this.preservedUtil || util;
    }
    _constructFakeUtil(realUtil) {
      return this._util(realUtil) || {target: vm.editingTarget, thread: runtime.threads[0], stackFrame: {}};
    }

    async luaVMdo(args) {
      switch (args.ACTION) {
        case 'stop':
          lua.global.close();
          canRunLUA = false;
          break;
        case 'start':
          if (!canRunLUA) {
            await resetLua();
            canRunLUA = true;
          }
          break;
        default:
          canRunLUA = false;
          await resetLua();
          canRunLUA = true;
          break;
      }
    }

    getsbfuncArgs(args, { thread }) {
      if (!thread[sbfuncArgs]) return '';
      if (Cast.toString(args.TYPE) == 'stringified') {
        return thread[sbfuncArgs].map(Cast.toString);
      }
      return thread[sbfuncArgs];
    }
    getsbfuncArgsnum(args, { thread }) {
      if (!thread[sbfuncArgs]) return '';
      return thread[sbfuncArgs][Cast.toNumber(args.NUM) - 1] ?? ''; //first is 1 not 0
    }
    getsbfuncArgscnt(args, { thread }) {
      const argsList = thread[sbfuncArgs];
      if (!Array.isArray(argsList)) return 0;
      return argsList.length;
    }
    clearLastErrorMsg(){this._lastErrorMsg = '';}



    setupClasses() {
      const MathUtil = {PI: Math.PI, E: Math.E, degToRad: (deg) => deg * (Math.PI / 180), radToDeg: (rad) => rad * (180 / Math.PI)};
      this.MathUtil = MathUtil;
      this.Functions = {
        // Motion functions
        motion_moveSteps: (util, steps) => runtime.ext_scratch3_motion._moveSteps.call(runtime.ext_scratch3_motion, Cast.toNumber(steps), util.target),
        motion_turn: (util, deg) => util.target.setDirection(util.target.direction + Cast.toNumber(deg)),
        motion_goTo: (util, x, y) => util.target.setXY(Cast.toNumber(x), Cast.toNumber(y)),
        motion_changePos: (util, dx, dy) => util.target.setXY(util.target.x + Cast.toNumber(dx), util.target.y + Cast.toNumber(dy)),
        motion_setX: (util, x) => util.target.setXY(Cast.toNumber(x), util.target.y),
        motion_setY: (util, y) => util.target.setXY(util.target.x, Cast.toNumber(y)),
        motion_changeX: (util, dx) => util.target.setXY(util.target.x + Cast.toNumber(dx), util.target.y),
        motion_changeY: (util, dy) => util.target.setXY(util.target.x, util.target.y + Cast.toNumber(dy)),
        motion_pointInDir: (util, deg) => (util.target.direction = Cast.toNumber(deg)),
        motion_setRotationStyle: (util, style) => util.target.setRotationStyle(Cast.toString(style)),
        motion_ifOnEdgeBounce: (util) => runtime.ext_scratch3_motion._ifOnEdgeBounce.call(runtime.ext_scratch3_motion, util.target),

        // Looks
        looks_say: (util, msg) => runtime.ext_scratch3_looks._say.call(runtime.ext_scratch3_looks, Cast.toString(msg), util.target),
        looks_sayForSecs: (util, msg, secs) => runtime.ext_scratch3_looks.sayforsecs.call(runtime.ext_scratch3_looks, {MESSAGE: msg, SECS: secs}, util),
        looks_think: (util, msg) => runtime.emit(runtime.ext_scratch3_looks.SAY_OR_THINK, util.target, 'think', Cast.toString(msg)),
        looks_thinkForSecs: (util, msg, secs) => runtime.ext_scratch3_looks.thinkforsecs.call(runtime.ext_scratch3_looks, {MESSAGE: msg, SECS: secs}, util),
        looks_show: (util) => runtime.ext_scratch3_looks.show.call(runtime.ext_scratch3_looks, null, util),
        looks_hide: (util) => runtime.ext_scratch3_looks.hide.call(runtime.ext_scratch3_looks, null, util),
        looks_getCostume: (util, costume) => 0,
        looks_setCostume: (util, costume) => 0,
        looks_nextCostume: (util, costume) => 0,
        looks_lastCostume: (util, costume) => 0,
        looks_getSize: (util, costume) => 0,
        looks_setSize: (util, costume) => 0,
        looks_changeSize: (util, costume) => 0,
        looks_setEffect: (util, costume) => 0,
        looks_changeEffect: (util, costume) => 0,
        looks_effectClear: (util, costume) => 0,

        //Events
        events_broadcast: (util, msg) => util.startHats('event_whenbroadcastreceived', {BROADCAST_OPTION: msg}),
        // @ts-ignore
        events_broadcastandwait: (util, msg) => 0,

        // Control
        // @ts-ignore
        control_wait: (_, seconds) => new Promise((resolve) => setTimeout(resolve, Cast.toNumber(seconds) * 1000)),
        // @ts-ignore
        control_clone: (util, spr) => 0,
        // @ts-ignore
        control_deleteClone: (util) => 0,

        //Sensing
        // @ts-ignore
        sensing_loudness: (util) => 0,
        // @ts-ignore
        sensing_loud: (util) => 0,
        sensing_mouseX: () => runtime.ioDevices.mouse._scratchX,
        sensing_mouseY: () => runtime.ioDevices.mouse._scratchY,
        // @ts-ignore
        sensing_mouseDown: (util) => runtime.ioDevices.mouse,
        // @ts-ignore
        sensing_timer: (util) => 0,
        // @ts-ignore
        sensing_resettimer: (util) => 0,
        // @ts-ignore
        sensing_username: (util) => 0,
        // @ts-ignore
        sensing_current: (util) => 0,
        // @ts-ignore
        sensing_dayssince2000: (util, datetype) => 0,
        // @ts-ignore
        sensing_distanceto: (util, sprite) => 0,
        // @ts-ignore
        sensing_colorIsTouchingColor: (util, colour1, colour2) => 0,
        // @ts-ignore
        sensing_touchingcolor: (util, color) => 0,
        // @ts-ignore
        sensing_touchingobject: (util, sprite) => 0,
        // @ts-ignore
        sensing_keypressed: (util, key) => 0,
        // @ts-ignore
        sensing_ask: (util) => 0,
        // @ts-ignore
        sensing_answer: (util) => 0,

        //Data
        data_setvar: (util, name, val) => (_getVarObjectFromName(Cast.toString(name), util, '').value = val),
        // @ts-ignore
        data_getvar: (util, name) => _getVarObjectFromName(Cast.toString(name), '').value,
        // @ts-ignore
        data_makevar: (util, name) => 0,
        // @ts-ignore
        data_deletevar: (util, name) => 0,
        // @ts-ignore
        data_changevar: (util, name, val) => 0,
        // @ts-ignore
        data_showvar: (util, name) => 0,
        // @ts-ignore
        data_hidevar: (util, name) => 0,
        // @ts-ignore
        data_setlist: (util, name, list) => 0,
        // @ts-ignore
        data_getlist: (util, name) => 0,
        // @ts-ignore
        data_addtolist: (util, name, value, pos) => 0,
        // @ts-ignore
        data_removefromlist: (util, name, pos) => 0,
        // @ts-ignore
        data_clearlist: (util, name) => 0,
        // @ts-ignore
        data_replacelistitem: (util, name, val, pos) => 0,
        // @ts-ignore
        data_listitem: (util, name, pos) => 0,
        // @ts-ignore
        data_listitemnum: (util, name, item) => 0,
        // @ts-ignore
        data_makelist: (util, name) => 0,
        // @ts-ignore
        data_deletelist: (util, name) => 0,
        // @ts-ignore
        data_getvars: (util) => 0,
        // @ts-ignore
        data_getlists: (util) => 0,
        // @ts-ignore
        data_listlength: (util, name) => 0,
      };
    }

    initLuaCommands(util) {
      // Register all the commands for lua.
      util = this._constructFakeUtil(util);
      const ref =
        (fn, fnn) =>
        (...args) =>
          // @ts-ignore I know it "could" be undefined but it wont be
          this.Functions[fn || fnn](util, ...args);
      const bindHere = (fn) => fn.bind(this);

      // Setting  sbfunc
      lua.global.set('sbfunc', async (...args) => {
        const returns = [];
        let alive = 0;
        const bindAlive = thread => {
          ++alive;
          const status_getter = thread.__lookupGetter__('status');
          const status_setter = thread.__lookupSetter__('status');
          thread.__defineGetter__('status', (...args) => {
            if (status_getter) status_getter(...args);
            return thread[sbfuncstatus];
          });
          thread.__defineSetter__('status', (...args) => {
            if (
              thread[sbfuncstatus] !== args[0] &&
              args[0] === Thread.STATUS_DONE &&
              !--alive
            ) {
              thread[sbfuncwatcher]('');
              for (const thread of threads) {
                if (thread.status == Thread.STATUS_DONE) continue;
                thread.stopThisScript();
                thread.status = Thread.STATUS_DONE;
              }
            }
            thread[sbfuncstatus] = args[0]
            if (status_setter) return status_setter(...args);
            return args[0];
          });
        };
        const threads = util.startHats(`${extId}_linkedFunctionCallback`);
        for (const thread of threads) {
          thread.status = Thread.STATUS_PROMISE_WAIT;
          bindAlive(thread);
          // Don't let the thread run till we can resolve.
          thread[sbfuncArgs] = args;
          returns.push(new Promise(resolve => {
            // Allow the thread to run.
            thread[sbfuncwatcher] = (value) => resolve(value);
            thread.status = Thread.STATUS_RUNNING;
          }));
        }
        // We only care about one return value,
        // the rest are useless. (for now)
        const res = await Promise.any(returns);
        // kill any extra threads
        for (const thread of threads) {
          if (thread.status == Thread.STATUS_DONE) continue;
          thread.stopThisScript();
          thread.status = Thread.STATUS_DONE;
        }
        return res;
      });
      // Setting up the target // idk lmao
      lua.global.set('sprite', {switch: (name) => runtime.setEditingTarget(runtime.getSpriteTargetByName(Cast.toString(name)) || runtime.getTargetForStage()), x: () => util.target.x, y: () => util.target.y, direction: () => util.target.direction, size: () => Math.round(util.target.size), trueSize: () => util.target.size, rotationStyle: () => util.target.rotationStyle, costume: (type) => (Cast.toString(type) === 'name' ? util.target.getCostumes()[util.target.currentCostume].name : util.target.currentCostume + 1)});

      // Custom category: MathUtil
      lua.global.set('MathUtil', this.MathUtil);

      // Category: motion
      lua.global.set('motion', {move: ref('motion_moveSteps'), moveSteps: ref('motion_moveSteps'), turn: ref('motion_turn'), rotate: ref('motion_turn'), goTo: ref('motion_goTo'), setPos: ref('motion_goTo'), set: ref('motion_goTo'), XY: ref('motion_goTo'), changePos: ref('motion_changePos'), change: ref('motion_changePos'), transform: ref('motion_changePos'), setX: ref('motion_setX'), X: ref('motion_setX'), setY: ref('motion_setY'), Y: ref('motion_setY'), changeX: ref('motion_changeX'), changeY: ref('motion_changeY'), pointInDir: ref('motion_pointInDir'), point: ref('motion_pointInDir'), setRotationStyle: ref('motion_setRotationStyle'), RotStyle: ref('motion_setRotationStyle'), RotationStyle: ref('motion_setRotationStyle'), ifOnEdgeBounce: ref('motion_ifOnEdgeBounce')});
      
      // These require async support:
      //   motion_glideTo
      //   motion_glideSecsToXY
      // Category: looks
      lua.global.set('looks', {say: ref('looks_say'), sayForSecs: ref('looks_sayForSecs'), think: ref('looks_think'), thinkForSecs: ref('looks_thinkForSecs'), show: ref('looks_show'), hide: ref('looks_hide')});
      // Category: events
      lua.global.set('events', {broadcast: ref('events_broadcast')});
      // Category: control
      lua.global.set('control', {wait: ref('control_wait')});
      // Category: data
      lua.global.set('data', {
        set(varName, value, isList) {
          _getVarObjectFromName(Cast.toString(varName), util, Cast.toBoolean(isList) ? 'list' : '').value = value;
        },
        get(varName, isList) {
          isList = Cast.toBoolean(isList);
          const varObject = _getVarObjectFromName(Cast.toString(varName), isList ? 'list' : '');
          if (isList) {
            return Array.isArray(varObject.value) ? varObject.value : [varObject.value];
          } else {
            return varObject.value;
          }
        },
      });

      // Custom category: Cast
      lua.global.set('Cast', Cast);

      // Custom category: JS
      lua.global.set('JS', {
        JSON: {
          parse(...args) {
            // @ts-expect-error
            return JSON.parse(...args);
          },
          stringify(...args) {
            // @ts-expect-error
            return JSON.stringify(...args);
          },
        },
        Array: {
          new(length) {
            return new Array(Cast.toNumber(length) || 0);
          },
          from(value) {
            // @ts-ignore
            return Array.from(value);
          },
          fromIndexed(object) {
            if (Array.isArray(object)) return object;
            if (typeof object !== 'object') return [];
            return [];
          },
          toIndexed(array) {
            if (!Array.isArray(array)) return {};
            // @ts-ignore
            return Object.fromEntries(array.map((v, i) => [i, v]));
          },
          isArray(value) {
            return Array.isArray(value);
          },
        },
        Object: {
          create(prototype) {
            return Object.create(prototype || {});
          },
          assign(a, b) {
            // @ts-ignore
            return Object.assign(a, b);
          },
          new() {
            return Object.create(null);
          },
        },
      });
      // Custom functions
      lua.global.set('scratch', {
        fetch(url, opts, ...args) {
          opts = opts || {};
          return Scratch.fetch(Cast.toString(url), opts, ...args);
        },
        preserveUtil: function () {
          // Util may become outdated, use this with causion!
          this.extension.preservedUtil = this.util;
        }.bind({util, extension: this}),
        wipeUtil: bindHere(function () {
          this.preservedUtil = null;
        }),
        primitiveRunBlock: bindHere(this.runBlock),
        runBlock: async (EXT, OPCODE, ARGS) => {
          const res = await this.runBlock(
            {EXT: Cast.toString(EXT), OPCODE: Cast.toString(OPCODE), ARGS: Cast.toString(ARGS)},
            this.preservedUtil || util,
            // we dont have access to the REAL blockJSON
            {},
          );
          if (this.DEBUG) console.trace(`runBlock_LUA | Ran ${EXT}_${OPCODE} and got:\n`, formatRes(res));
          return res;
        },
        // This is just a cool novelty to show its possible :D
        _scratchLoader: `data:application/javascript;base64,${btoa(`
              (async function(Scratch) {
                const SafeScratch = {
                  extensions: {
                    unsandboxed: true,
                    register(object) {
                      Scratch.extensions.register(object);
                    }
                  },
                  Cast: Object.assign({}, Object.fromEntries(Object.getOwnPropertyNames(Scratch.Cast).flatMap(v => [
                    'constructor', 'prototype', 'name', 'length'
                  ].includes(v) ? [] : [[
                    v, Scratch.Cast[v]
                  ]]))),
                  BlockType: Object.assign({}, Scratch.BlockType),
                  ArgumentType: Object.assign({}, Scratch.ArgumentType),
                };
                await window._luaExtensionLoader(Scratch);
              })(Scratch);
          `)}`,
        // @ts-ignore
        async _loadHack(url) {
          const gsm = vm.extensionManager.securityManager.getSandboxMode;
          // @ts-ignore
          vm.extensionManager.securityManager.getSandboxMode = () => Promise.resolve('unsandboxed');
          try {
            await vm.extensionManager.loadExtensionURL(Cast.toString(url));
          } finally {
            vm.extensionManager.securityManager.getSandboxMode = gsm;
            // @ts-ignore
            delete window._luaExtensionLoader;
          }
        },
        _loadObject(object) {
          // @ts-ignore
          window._luaExtensionLoader = object;
          // A extension to load the LUA extension
          return this._loadHack(this._scratchLoader);
        },
      });
    }

    // Some "secret" stuff for lua to use :3
    async secret_load({url}) {
      return await vm.extensionManager.loadExtensionURL(Cast.toString(url));
    }
    secret_injectFunction({namespace, args, js}) {
      lua.global.set(Cast.toString(namespace), new Function('lua', ...args.split(' '), js).bind(window, lua));
    }

    // Running, etc...
    setScratchCommandsEnabled({INIT}) {
      this.DO_INIT = Cast.toBoolean(INIT);
    }

    async runLua({ CODE }, util) {
      if (!canRunLUA) return '';

      if (this.DO_INIT) this.initLuaCommands(util);

      try {
          const result = await lua.doString(Cast.toString(CODE));
          try {
              lua.global.pop();
          } catch (popError) {
              console.warn('Lua stack pop error:', popError);
          } // pop the return value from the Lua stack
            this._curErrorMsg = '';
          return result ?? '';
      } catch (error) {
          const message = typeof error?.message === 'string' ? error.message : Cast.toString(error);
          this._lastErrorMsg = message;
          this._curErrorMsg = message;
          util.startHats('Drago0znzwLua_onError');
          return '';
      }
}

  }
  // need to find out how to get this to work without screwing up the vm.

  //runtime.on('PROJECT_START', () => reloadOnStart && resetLua());
  //runtime.on('PROJECT_STOP_ALL', () => reloadOnStart && resetLua());

  Scratch.extensions.register((runtime.ext_secret_dragonianlua = new extension()));
})(Scratch);